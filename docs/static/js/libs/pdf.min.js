(function t(e,r){if(typeof exports==="object"&&typeof module==="object")module.exports=r();else if(typeof define==="function"&&define.amd)define("pdfjs-dist/build/pdf",[],r);else if(typeof exports==="object")exports["pdfjs-dist/build/pdf"]=r();else e["pdfjs-dist/build/pdf"]=e.pdfjsLib=r()})(globalThis,()=>{return(()=>{var __webpack_modules__=[,(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0;e.arrayByteLength=Z;e.arraysToBytes=tt;e.assert=U;e.bytesToString=J;e.createPromiseCapability=_t;e.createValidAbsoluteUrl=B;e.escapeString=ut;e.getModificationDate=bt;e.getVerbosityLevel=I;e.info=L;e.isArrayBuffer=vt;e.isArrayEqual=mt;e.isAscii=dt;e.objectFromMap=nt;e.objectSize=rt;e.setVerbosityLevel=D;e.shadow=q;e.string32=et;e.stringToBytes=Q;e.stringToPDFString=ht;e.stringToUTF16BEString=ft;e.stringToUTF8String=pt;e.unreachable=j;e.utf8StringToString=gt;e.warn=N;r(2);const n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;const s=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=s;const i=1.35;e.LINE_FACTOR=i;const a=.35;e.LINE_DESCENT_FACTOR=a;const o={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=o;const l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=l;const c="pdfjs_internal_editor_";e.AnnotationEditorPrefix=c;const h={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};e.AnnotationEditorType=h;const u={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};e.AnnotationEditorParamsType=u;const d={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=d;const f={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=f;const p={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=p;const g={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=g;const v={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=v;const m={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=m;const b={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=b;const _={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=_;const y={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=y;const A={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=A;const S={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=S;const x={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=x;const w={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=w;const E={O:"PageOpen",C:"PageClose"};e.PageActionEventType=E;const C={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.StreamType=C;const k={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};e.FontType=k;const T={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=T;const P={NONE:0,BINARY:1,STREAM:2};e.CMapCompressionType=P;const M={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=M;const F={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.UNSUPPORTED_FEATURES=F;const R={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=R;let O=T.WARNINGS;function D(t){if(Number.isInteger(t)){O=t}}function I(){return O}function L(t){if(O>=T.INFOS){console.log(`Info: ${t}`)}}function N(t){if(O>=T.WARNINGS){console.log(`Warning: ${t}`)}}function j(t){throw new Error(t)}function U(t,e){if(!t){j(e)}}function W(t){if(!t){return false}switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return true;default:return false}}function B(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!t){return null}try{if(r&&typeof t==="string"){if(r.addDefaultProtocol&&t.startsWith("www.")){const s=t.match(/\./g);if(s&&s.length>=2){t=`http://${t}`}}if(r.tryConvertEncoding){try{t=pt(t)}catch(t){}}}const n=e?new URL(t,e):new URL(t);if(W(n)){return n}}catch(t){}return null}function q(t,e,r){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:false});return r}const G=function t(){function r(t,e){if(this.constructor===r){j("Cannot initialize BaseException.")}this.message=t;this.name=e}r.prototype=new Error;r.constructor=r;return r}();e.BaseException=G;class z extends G{constructor(t,e){super(t,"PasswordException");this.code=e}}e.PasswordException=z;class H extends G{constructor(t,e){super(t,"UnknownErrorException");this.details=e}}e.UnknownErrorException=H;class V extends G{constructor(t){super(t,"InvalidPDFException")}}e.InvalidPDFException=V;class X extends G{constructor(t){super(t,"MissingPDFException")}}e.MissingPDFException=X;class $ extends G{constructor(t,e){super(t,"UnexpectedResponseException");this.status=e}}e.UnexpectedResponseException=$;class Y extends G{constructor(t){super(t,"FormatError")}}e.FormatError=Y;class K extends G{constructor(t){super(t,"AbortException")}}e.AbortException=K;function J(e){if(typeof e!=="object"||e===null||e.length===undefined){j("Invalid argument for bytesToString")}const r=e.length;const n=8192;if(r<n){return String.fromCharCode.apply(null,e)}const s=[];for(let t=0;t<r;t+=n){const i=Math.min(t+n,r);const a=e.subarray(t,i);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function Q(e){if(typeof e!=="string"){j("Invalid argument for stringToBytes")}const r=e.length;const n=new Uint8Array(r);for(let t=0;t<r;++t){n[t]=e.charCodeAt(t)&255}return n}function Z(t){if(t.length!==undefined){return t.length}if(t.byteLength!==undefined){return t.byteLength}j("Invalid argument for arrayByteLength")}function tt(r){const n=r.length;if(n===1&&r[0]instanceof Uint8Array){return r[0]}let e=0;for(let t=0;t<n;t++){e+=Z(r[t])}let s=0;const i=new Uint8Array(e);for(let e=0;e<n;e++){let t=r[e];if(!(t instanceof Uint8Array)){if(typeof t==="string"){t=Q(t)}else{t=new Uint8Array(t)}}const a=t.byteLength;i.set(t,s);s+=a}return i}function et(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function rt(t){return Object.keys(t).length}function nt(t){const e=Object.create(null);for(const[r,n]of t){e[r]=n}return e}function st(){const t=new Uint8Array(4);t[0]=1;const e=new Uint32Array(t.buffer,0,1);return e[0]===1}function it(){try{new Function("");return true}catch(t){return false}}class at{static get isLittleEndian(){return q(this,"isLittleEndian",st())}static get isEvalSupported(){return q(this,"isEvalSupported",it())}static get isOffscreenCanvasSupported(){return q(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas!=="undefined")}}e.FeatureTest=at;const ot=[...Array(256).keys()].map(t=>t.toString(16).padStart(2,"0"));class lt{static makeHexColor(t,e,r){return`#${ot[t]}${ot[e]}${ot[r]}`}static scaleMinMax(t,e){let r;if(t[0]){if(t[0]<0){r=e[0];e[0]=e[1];e[1]=r}e[0]*=t[0];e[1]*=t[0];if(t[3]<0){r=e[2];e[2]=e[3];e[3]=r}e[2]*=t[3];e[3]*=t[3]}else{r=e[0];e[0]=e[2];e[2]=r;r=e[1];e[1]=e[3];e[3]=r;if(t[1]<0){r=e[2];e[2]=e[3];e[3]=r}e[2]*=t[1];e[3]*=t[1];if(t[2]<0){r=e[0];e[0]=e[1];e[1]=r}e[0]*=t[2];e[1]*=t[2]}e[0]+=t[4];e[1]+=t[4];e[2]+=t[5];e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const r=t[0]*e[0]+t[1]*e[2]+e[4];const n=t[0]*e[1]+t[1]*e[3]+e[5];return[r,n]}static applyInverseTransform(t,e){const r=e[0]*e[3]-e[1]*e[2];const n=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/r;const s=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/r;return[n,s]}static getAxialAlignedBoundingBox(t,e){const r=lt.applyTransform(t,e);const n=lt.applyTransform(t.slice(2,4),e);const s=lt.applyTransform([t[0],t[3]],e);const i=lt.applyTransform([t[2],t[1]],e);return[Math.min(r[0],n[0],s[0],i[0]),Math.min(r[1],n[1],s[1],i[1]),Math.max(r[0],n[0],s[0],i[0]),Math.max(r[1],n[1],s[1],i[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static apply3dTransform(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]];const r=t[0]*e[0]+t[1]*e[2];const n=t[0]*e[1]+t[1]*e[3];const s=t[2]*e[0]+t[3]*e[2];const i=t[2]*e[1]+t[3]*e[3];const a=(r+i)/2;const o=Math.sqrt((r+i)**2-4*(r*i-s*n))/2;const l=a+o||1;const c=a-o||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(t){const e=t.slice(0);if(t[0]>t[2]){e[0]=t[2];e[2]=t[0]}if(t[1]>t[3]){e[1]=t[3];e[3]=t[1]}return e}static intersect(t,e){const r=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2]));const n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(r>n){return null}const s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3]));const i=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));if(s>i){return null}return[r,s,n,i]}static bezierBoundingBox(e,r,n,s,i,a,o,l){const c=[],t=[[],[]];let h,u,d,f,p,g,v,m;for(let t=0;t<2;++t){if(t===0){u=6*e-12*n+6*i;h=-3*e+9*n-9*i+3*o;d=3*n-3*e}else{u=6*r-12*s+6*a;h=-3*r+9*s-9*a+3*l;d=3*s-3*r}if(Math.abs(h)<1e-12){if(Math.abs(u)<1e-12){continue}f=-d/u;if(0<f&&f<1){c.push(f)}continue}v=u*u-4*d*h;m=Math.sqrt(v);if(v<0){continue}p=(-u+m)/(2*h);if(0<p&&p<1){c.push(p)}g=(-u-m)/(2*h);if(0<g&&g<1){c.push(g)}}let b=c.length,_;const y=b;while(b--){f=c[b];_=1-f;t[0][b]=_*_*_*e+3*_*_*f*n+3*_*f*f*i+f*f*f*o;t[1][b]=_*_*_*r+3*_*_*f*s+3*_*f*f*a+f*f*f*l}t[0][y]=e;t[1][y]=r;t[0][y+1]=o;t[1][y+1]=l;t[0].length=t[1].length=y+2;return[Math.min(...t[0]),Math.min(...t[1]),Math.max(...t[0]),Math.max(...t[1])]}}e.Util=lt;const ct=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ht(r){if(r[0]>="ï"){let t;if(r[0]==="þ"&&r[1]==="ÿ"){t="utf-16be"}else if(r[0]==="ÿ"&&r[1]==="þ"){t="utf-16le"}else if(r[0]==="ï"&&r[1]==="»"&&r[2]==="¿"){t="utf-8"}if(t){try{const e=new TextDecoder(t,{fatal:true});const s=Q(r);return e.decode(s)}catch(t){N(`stringToPDFString: "${t}".`)}}}const n=[];for(let t=0,e=r.length;t<e;t++){const i=ct[r.charCodeAt(t)];n.push(i?String.fromCharCode(i):r.charAt(t))}return n.join("")}function ut(t){return t.replace(/([()\\\n\r])/g,t=>{if(t==="\n"){return"\\n"}else if(t==="\r"){return"\\r"}return`\\${t}`})}function dt(t){return/^[\x00-\x7F]*$/.test(t)}function ft(r){const n=["þÿ"];for(let t=0,e=r.length;t<e;t++){const s=r.charCodeAt(t);n.push(String.fromCharCode(s>>8&255),String.fromCharCode(s&255))}return n.join("")}function pt(t){return decodeURIComponent(escape(t))}function gt(t){return unescape(encodeURIComponent(t))}function vt(t){return typeof t==="object"&&t!==null&&t.byteLength!==undefined}function mt(r,n){if(r.length!==n.length){return false}for(let t=0,e=r.length;t<e;t++){if(r[t]!==n[t]){return false}}return true}function bt(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Date;const e=[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")];return e.join("")}function _t(){const t=Object.create(null);let n=false;Object.defineProperty(t,"settled",{get(){return n}});t.promise=new Promise(function(e,r){t.resolve=function(t){n=true;e(t)};t.reject=function(t){n=true;r(t)}});return t}},(t,e,r)=>{"use strict";var n=r(3);if(!globalThis._pdfjsCompatibilityChecked){globalThis._pdfjsCompatibilityChecked=true;(function t(){if(globalThis.btoa||!n.isNodeJS){return}globalThis.btoa=function(t){return Buffer.from(t,"binary").toString("base64")}})();(function t(){if(globalThis.atob||!n.isNodeJS){return}globalThis.atob=function(t){return Buffer.from(t,"base64").toString("binary")}})();(function t(){if(globalThis.DOMMatrix||!n.isNodeJS){return}globalThis.DOMMatrix=require("dommatrix/dist/dommatrix.js")})();(function t(){if(globalThis.ReadableStream||!n.isNodeJS){return}globalThis.ReadableStream=require("web-streams-polyfill/dist/ponyfill.js").ReadableStream})();(function t(){if(Array.prototype.at){return}r(4)})();(function t(){if(Uint8Array.prototype.at){return}r(76)})();(function t(){if(globalThis.structuredClone){return}r(86)})()}},(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.isNodeJS=void 0;const r=typeof process==="object"&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=r},(t,e,r)=>{r(5);var n=r(75);t.exports=n("Array","at")},(t,e,r)=>{"use strict";var n=r(6);var a=r(41);var o=r(65);var l=r(63);var s=r(70);n({target:"Array",proto:true},{at:function t(e){var r=a(this);var n=o(r);var s=l(e);var i=s>=0?s:n+s;return i<0||i>=n?undefined:r[i]}});s("at")},(t,e,r)=>{var u=r(7);var d=r(8).f;var f=r(45);var p=r(49);var g=r(39);var v=r(57);var m=r(69);t.exports=function(t,e){var r=t.target;var n=t.global;var s=t.stat;var i,a,o,l,c,h;if(n){a=u}else if(s){a=u[r]||g(r,{})}else{a=(u[r]||{}).prototype}if(a)for(o in e){c=e[o];if(t.dontCallGetSet){h=d(a,o);l=h&&h.value}else l=a[o];i=m(n?o:r+(s?".":"#")+o,t.forced);if(!i&&l!==undefined){if(typeof c==typeof l)continue;v(c,l)}if(t.sham||l&&l.sham){f(c,"sham",true)}p(a,o,c,t)}}},t=>{var e=function(t){return t&&t.Math==Math&&t};t.exports=e(typeof globalThis=="object"&&globalThis)||e(typeof window=="object"&&window)||e(typeof self=="object"&&self)||e(typeof global=="object"&&global)||function(){return this}()||Function("return this")()},(t,e,r)=>{var n=r(9);var s=r(11);var i=r(13);var a=r(14);var o=r(15);var l=r(20);var c=r(40);var h=r(43);var u=Object.getOwnPropertyDescriptor;e.f=n?u:function t(e,r){e=o(e);r=l(r);if(h)try{return u(e,r)}catch(t){}if(c(e,r))return a(!s(i.f,e,r),e[r])}},(t,e,r)=>{var n=r(10);t.exports=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},t=>{t.exports=function(t){try{return!!t()}catch(t){return true}}},(t,e,r)=>{var n=r(12);var s=Function.prototype.call;t.exports=n?s.bind(s):function(){return s.apply(s,arguments)}},(t,e,r)=>{var n=r(10);t.exports=!n(function(){var t=function(){}.bind();return typeof t!="function"||t.hasOwnProperty("prototype")})},(t,e)=>{"use strict";var r={}.propertyIsEnumerable;var n=Object.getOwnPropertyDescriptor;var s=n&&!r.call({1:2},1);e.f=s?function t(e){var r=n(this,e);return!!r&&r.enumerable}:r},t=>{t.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}},(t,e,r)=>{var n=r(16);var s=r(19);t.exports=function(t){return n(s(t))}},(t,e,r)=>{var n=r(17);var s=r(10);var i=r(18);var a=Object;var o=n("".split);t.exports=s(function(){return!a("z").propertyIsEnumerable(0)})?function(t){return i(t)=="String"?o(t,""):a(t)}:a},(t,e,r)=>{var n=r(12);var s=Function.prototype;var i=s.bind;var a=s.call;var o=n&&i.bind(a,a);t.exports=n?function(t){return t&&o(t)}:function(t){return t&&function(){return a.apply(t,arguments)}}},(t,e,r)=>{var n=r(17);var s=n({}.toString);var i=n("".slice);t.exports=function(t){return i(s(t),8,-1)}},t=>{var e=TypeError;t.exports=function(t){if(t==undefined)throw e("Can't call method on "+t);return t}},(t,e,r)=>{var n=r(21);var s=r(24);t.exports=function(t){var e=n(t,"string");return s(e)?e:e+""}},(t,e,r)=>{var s=r(11);var i=r(22);var a=r(24);var o=r(31);var l=r(34);var n=r(35);var c=TypeError;var h=n("toPrimitive");t.exports=function(t,e){if(!i(t)||a(t))return t;var r=o(t,h);var n;if(r){if(e===undefined)e="default";n=s(r,t,e);if(!i(n)||a(n))return n;throw c("Can't convert object to primitive value")}if(e===undefined)e="number";return l(t,e)}},(t,e,r)=>{var n=r(23);t.exports=function(t){return typeof t=="object"?t!==null:n(t)}},t=>{t.exports=function(t){return typeof t=="function"}},(t,e,r)=>{var n=r(25);var s=r(23);var i=r(26);var a=r(27);var o=Object;t.exports=a?function(t){return typeof t=="symbol"}:function(t){var e=n("Symbol");return s(e)&&i(e.prototype,o(t))}},(t,e,r)=>{var n=r(7);var s=r(23);var i=function(t){return s(t)?t:undefined};t.exports=function(t,e){return arguments.length<2?i(n[t]):n[t]&&n[t][e]}},(t,e,r)=>{var n=r(17);t.exports=n({}.isPrototypeOf)},(t,e,r)=>{var n=r(28);t.exports=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(t,e,r)=>{var n=r(29);var s=r(10);t.exports=!!Object.getOwnPropertySymbols&&!s(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41})},(t,e,r)=>{var n=r(7);var s=r(30);var i=n.process;var a=n.Deno;var o=i&&i.versions||a&&a.version;var l=o&&o.v8;var c,h;if(l){c=l.split(".");h=c[0]>0&&c[0]<4?1:+(c[0]+c[1])}if(!h&&s){c=s.match(/Edge\/(\d+)/);if(!c||c[1]>=74){c=s.match(/Chrome\/(\d+)/);if(c)h=+c[1]}}t.exports=h},(t,e,r)=>{var n=r(25);t.exports=n("navigator","userAgent")||""},(t,e,r)=>{var n=r(32);t.exports=function(t,e){var r=t[e];return r==null?undefined:n(r)}},(t,e,r)=>{var n=r(23);var s=r(33);var i=TypeError;t.exports=function(t){if(n(t))return t;throw i(s(t)+" is not a function")}},t=>{var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},(t,e,r)=>{var s=r(11);var i=r(23);var a=r(22);var o=TypeError;t.exports=function(t,e){var r,n;if(e==="string"&&i(r=t.toString)&&!a(n=s(r,t)))return n;if(i(r=t.valueOf)&&!a(n=s(r,t)))return n;if(e!=="string"&&i(r=t.toString)&&!a(n=s(r,t)))return n;throw o("Can't convert object to primitive value")}},(t,e,r)=>{var n=r(7);var s=r(36);var i=r(40);var a=r(42);var o=r(28);var l=r(27);var c=s("wks");var h=n.Symbol;var u=h&&h["for"];var d=l?h:h&&h.withoutSetter||a;t.exports=function(t){if(!i(c,t)||!(o||typeof c[t]=="string")){var e="Symbol."+t;if(o&&i(h,t)){c[t]=h[t]}else if(l&&u){c[t]=u(e)}else{c[t]=d(e)}}return c[t]}},(t,e,r)=>{var n=r(37);var s=r(38);(t.exports=function(t,e){return s[t]||(s[t]=e!==undefined?e:{})})("versions",[]).push({version:"3.24.1",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"})},t=>{t.exports=false},(t,e,r)=>{var n=r(7);var s=r(39);var i="__core-js_shared__";var a=n[i]||s(i,{});t.exports=a},(t,e,r)=>{var n=r(7);var s=Object.defineProperty;t.exports=function(e,r){try{s(n,e,{value:r,configurable:true,writable:true})}catch(t){n[e]=r}return r}},(t,e,r)=>{var n=r(17);var s=r(41);var i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function t(e,r){return i(s(e),r)}},(t,e,r)=>{var n=r(19);var s=Object;t.exports=function(t){return s(n(t))}},(t,e,r)=>{var n=r(17);var s=0;var i=Math.random();var a=n(1..toString);t.exports=function(t){return"Symbol("+(t===undefined?"":t)+")_"+a(++s+i,36)}},(t,e,r)=>{var n=r(9);var s=r(10);var i=r(44);t.exports=!n&&!s(function(){return Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a!=7})},(t,e,r)=>{var n=r(7);var s=r(22);var i=n.document;var a=s(i)&&s(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},(t,e,r)=>{var n=r(9);var s=r(46);var i=r(14);t.exports=n?function(t,e,r){return s.f(t,e,i(1,r))}:function(t,e,r){t[e]=r;return t}},(t,e,r)=>{var n=r(9);var s=r(43);var i=r(47);var a=r(48);var o=r(20);var l=TypeError;var c=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var u="enumerable";var d="configurable";var f="writable";e.f=n?i?function t(e,r,n){a(e);r=o(r);a(n);if(typeof e==="function"&&r==="prototype"&&"value"in n&&f in n&&!n[f]){var s=h(e,r);if(s&&s[f]){e[r]=n.value;n={configurable:d in n?n[d]:s[d],enumerable:u in n?n[u]:s[u],writable:false}}}return c(e,r,n)}:c:function t(e,r,n){a(e);r=o(r);a(n);if(s)try{return c(e,r,n)}catch(t){}if("get"in n||"set"in n)throw l("Accessors not supported");if("value"in n)e[r]=n.value;return e}},(t,e,r)=>{var n=r(9);var s=r(10);t.exports=n&&s(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:false}).prototype!=42})},(t,e,r)=>{var n=r(22);var s=String;var i=TypeError;t.exports=function(t){if(n(t))return t;throw i(s(t)+" is not an object")}},(t,e,r)=>{var a=r(23);var o=r(46);var l=r(50);var c=r(39);t.exports=function(t,e,r,n){if(!n)n={};var s=n.enumerable;var i=n.name!==undefined?n.name:e;if(a(r))l(r,i,n);if(n.global){if(s)t[e]=r;else c(e,r)}else{try{if(!n.unsafe)delete t[e];else if(t[e])s=true}catch(t){}if(s)t[e]=r;else o.f(t,e,{value:r,enumerable:false,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t}},(t,e,r)=>{var n=r(10);var s=r(23);var i=r(40);var a=r(9);var o=r(51).CONFIGURABLE;var l=r(52);var c=r(53);var h=c.enforce;var u=c.get;var d=Object.defineProperty;var f=a&&!n(function(){return d(function(){},"length",{value:8}).length!==8});var p=String(String).split("String");var g=t.exports=function(t,e,r){if(String(e).slice(0,7)==="Symbol("){e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"}if(r&&r.getter)e="get "+e;if(r&&r.setter)e="set "+e;if(!i(t,"name")||o&&t.name!==e){if(a)d(t,"name",{value:e,configurable:true});else t.name=e}if(f&&r&&i(r,"arity")&&t.length!==r.arity){d(t,"length",{value:r.arity})}try{if(r&&i(r,"constructor")&&r.constructor){if(a)d(t,"prototype",{writable:false})}else if(t.prototype)t.prototype=undefined}catch(t){}var n=h(t);if(!i(n,"source")){n.source=p.join(typeof e=="string"?e:"")}return t};Function.prototype.toString=g(function t(){return s(this)&&u(this).source||l(this)},"toString")},(t,e,r)=>{var n=r(9);var s=r(40);var i=Function.prototype;var a=n&&Object.getOwnPropertyDescriptor;var o=s(i,"name");var l=o&&function t(){}.name==="something";var c=o&&(!n||n&&a(i,"name").configurable);t.exports={EXISTS:o,PROPER:l,CONFIGURABLE:c}},(t,e,r)=>{var n=r(17);var s=r(23);var i=r(38);var a=n(Function.toString);if(!s(i.inspectSource)){i.inspectSource=function(t){return a(t)}}t.exports=i.inspectSource},(t,e,r)=>{var n=r(54);var s=r(7);var i=r(17);var a=r(22);var o=r(45);var l=r(40);var c=r(38);var h=r(55);var u=r(56);var d="Object already initialized";var f=s.TypeError;var p=s.WeakMap;var g,v,m;var b=function(t){return m(t)?v(t):g(t,{})};var _=function(r){return function(t){var e;if(!a(t)||(e=v(t)).type!==r){throw f("Incompatible receiver, "+r+" required")}return e}};if(n||c.state){var y=c.state||(c.state=new p);var A=i(y.get);var S=i(y.has);var x=i(y.set);g=function(t,e){if(S(y,t))throw new f(d);e.facade=t;x(y,t,e);return e};v=function(t){return A(y,t)||{}};m=function(t){return S(y,t)}}else{var w=h("state");u[w]=true;g=function(t,e){if(l(t,w))throw new f(d);e.facade=t;o(t,w,e);return e};v=function(t){return l(t,w)?t[w]:{}};m=function(t){return l(t,w)}}t.exports={set:g,get:v,has:m,enforce:b,getterFor:_}},(t,e,r)=>{var n=r(7);var s=r(23);var i=r(52);var a=n.WeakMap;t.exports=s(a)&&/native code/.test(i(a))},(t,e,r)=>{var n=r(36);var s=r(42);var i=n("keys");t.exports=function(t){return i[t]||(i[t]=s(t))}},t=>{t.exports={}},(t,e,r)=>{var l=r(40);var c=r(58);var h=r(8);var u=r(46);t.exports=function(t,e,r){var n=c(e);var s=u.f;var i=h.f;for(var a=0;a<n.length;a++){var o=n[a];if(!l(t,o)&&!(r&&l(r,o))){s(t,o,i(e,o))}}}},(t,e,r)=>{var n=r(25);var s=r(17);var i=r(59);var a=r(68);var o=r(48);var l=s([].concat);t.exports=n("Reflect","ownKeys")||function t(e){var r=i.f(o(e));var n=a.f;return n?l(r,n(e)):r}},(t,e,r)=>{var n=r(60);var s=r(67);var i=s.concat("length","prototype");e.f=Object.getOwnPropertyNames||function t(e){return n(e,i)}},(t,e,r)=>{var n=r(17);var a=r(40);var o=r(15);var l=r(61).indexOf;var c=r(56);var h=n([].push);t.exports=function(t,e){var r=o(t);var n=0;var s=[];var i;for(i in r)!a(c,i)&&a(r,i)&&h(s,i);while(e.length>n)if(a(r,i=e[n++])){~l(s,i)||h(s,i)}return s}},(t,e,r)=>{var l=r(15);var c=r(62);var h=r(65);var n=function(o){return function(t,e,r){var n=l(t);var s=h(n);var i=c(r,s);var a;if(o&&e!=e)while(s>i){a=n[i++];if(a!=a)return true}else for(;s>i;i++){if((o||i in n)&&n[i]===e)return o||i||0}return!o&&-1}};t.exports={includes:n(true),indexOf:n(false)}},(t,e,r)=>{var n=r(63);var s=Math.max;var i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?s(r+e,0):i(r,e)}},(t,e,r)=>{var n=r(64);t.exports=function(t){var e=+t;return e!==e||e===0?0:n(e)}},t=>{var n=Math.ceil;var s=Math.floor;t.exports=Math.trunc||function t(e){var r=+e;return(r>0?s:n)(r)}},(t,e,r)=>{var n=r(66);t.exports=function(t){return n(t.length)}},(t,e,r)=>{var n=r(63);var s=Math.min;t.exports=function(t){return t>0?s(n(t),9007199254740991):0}},t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(t,e)=>{e.f=Object.getOwnPropertySymbols},(t,e,r)=>{var n=r(10);var s=r(23);var i=/#|\.prototype\./;var a=function(t,e){var r=l[o(t)];return r==h?true:r==c?false:s(e)?n(e):!!e};var o=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()};var l=a.data={};var c=a.NATIVE="N";var h=a.POLYFILL="P";t.exports=a},(t,e,r)=>{var n=r(35);var s=r(71);var i=r(46).f;var a=n("unscopables");var o=Array.prototype;if(o[a]==undefined){i(o,a,{configurable:true,value:s(null)})}t.exports=function(t){o[a][t]=true}},(t,e,r)=>{var s=r(48);var i=r(72);var n=r(67);var a=r(56);var o=r(74);var l=r(44);var c=r(55);var h=">";var u="<";var d="prototype";var f="script";var p=c("IE_PROTO");var g=function(){};var v=function(t){return u+f+h+t+u+"/"+f+h};var m=function(t){t.write(v(""));t.close();var e=t.parentWindow.Object;t=null;return e};var b=function(){var t=l("iframe");var e="java"+f+":";var r;t.style.display="none";o.appendChild(t);t.src=String(e);r=t.contentWindow.document;r.open();r.write(v("document.F=Object"));r.close();return r.F};var _;var y=function(){try{_=new ActiveXObject("htmlfile")}catch(t){}y=typeof document!="undefined"?document.domain&&_?m(_):b():m(_);var t=n.length;while(t--)delete y[d][n[t]];return y()};a[p]=true;t.exports=Object.create||function t(e,r){var n;if(e!==null){g[d]=s(e);n=new g;g[d]=null;n[p]=e}else n=y();return r===undefined?n:i.f(n,r)}},(t,e,r)=>{var n=r(9);var s=r(47);var l=r(46);var c=r(48);var h=r(15);var u=r(73);e.f=n&&!s?Object.defineProperties:function t(e,r){c(e);var n=h(r);var s=u(r);var i=s.length;var a=0;var o;while(i>a)l.f(e,o=s[a++],n[o]);return e}},(t,e,r)=>{var n=r(60);var s=r(67);t.exports=Object.keys||function t(e){return n(e,s)}},(t,e,r)=>{var n=r(25);t.exports=n("document","documentElement")},(t,e,r)=>{var n=r(7);var s=r(17);t.exports=function(t,e){return s(n[t].prototype[e])}},(t,e,r)=>{r(77)},(t,e,r)=>{"use strict";var n=r(78);var a=r(65);var o=r(63);var l=n.aTypedArray;var s=n.exportTypedArrayMethod;s("at",function t(e){var r=l(this);var n=a(r);var s=o(e);var i=s>=0?s:n+s;return i<0||i>=n?undefined:r[i]})},(t,e,r)=>{"use strict";var n=r(79);var a=r(9);var o=r(7);var s=r(23);var i=r(22);var l=r(40);var c=r(80);var h=r(33);var u=r(45);var d=r(49);var f=r(46).f;var p=r(26);var g=r(82);var v=r(84);var m=r(35);var b=r(42);var _=r(53);var y=_.enforce;var A=_.get;var S=o.Int8Array;var x=S&&S.prototype;var w=o.Uint8ClampedArray;var E=w&&w.prototype;var C=S&&g(S);var k=x&&g(x);var T=Object.prototype;var P=o.TypeError;var M=m("toStringTag");var F=b("TYPED_ARRAY_TAG");var R="TypedArrayConstructor";var O=n&&!!v&&c(o.opera)!=="Opera";var D=false;var I,L,N;var j={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};var U={BigInt64Array:8,BigUint64Array:8};var W=function t(e){if(!i(e))return false;var r=c(e);return r==="DataView"||l(j,r)||l(U,r)};var B=function(t){var e=g(t);if(!i(e))return;var r=A(e);return r&&l(r,R)?r[R]:B(e)};var q=function(t){if(!i(t))return false;var e=c(t);return l(j,e)||l(U,e)};var G=function(t){if(q(t))return t;throw P("Target is not a typed array")};var z=function(t){if(s(t)&&(!v||p(C,t)))return t;throw P(h(t)+" is not a typed array constructor")};var H=function(e,r,t,n){if(!a)return;if(t)for(var s in j){var i=o[s];if(i&&l(i.prototype,e))try{delete i.prototype[e]}catch(t){try{i.prototype[e]=r}catch(t){}}}if(!k[e]||t){d(k,e,t?r:O&&x[e]||r,n)}};var V=function(t,e,r){var n,s;if(!a)return;if(v){if(r)for(n in j){s=o[n];if(s&&l(s,t))try{delete s[t]}catch(t){}}if(!C[t]||r){try{return d(C,t,r?e:O&&C[t]||e)}catch(t){}}else return}for(n in j){s=o[n];if(s&&(!s[t]||r)){d(s,t,e)}}};for(I in j){L=o[I];N=L&&L.prototype;if(N)y(N)[R]=L;else O=false}for(I in U){L=o[I];N=L&&L.prototype;if(N)y(N)[R]=L}if(!O||!s(C)||C===Function.prototype){C=function t(){throw P("Incorrect invocation")};if(O)for(I in j){if(o[I])v(o[I],C)}}if(!O||!k||k===T){k=C.prototype;if(O)for(I in j){if(o[I])v(o[I].prototype,k)}}if(O&&g(E)!==k){v(E,k)}if(a&&!l(k,M)){D=true;f(k,M,{get:function(){return i(this)?this[F]:undefined}});for(I in j)if(o[I]){u(o[I],F,I)}}t.exports={NATIVE_ARRAY_BUFFER_VIEWS:O,TYPED_ARRAY_TAG:D&&F,aTypedArray:G,aTypedArrayConstructor:z,exportTypedArrayMethod:H,exportTypedArrayStaticMethod:V,getTypedArrayConstructor:B,isView:W,isTypedArray:q,TypedArray:C,TypedArrayPrototype:k}},t=>{t.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"},(t,e,r)=>{var n=r(81);var s=r(23);var i=r(18);var a=r(35);var o=a("toStringTag");var l=Object;var c=i(function(){return arguments}())=="Arguments";var h=function(t,e){try{return t[e]}catch(t){}};t.exports=n?i:function(t){var e,r,n;return t===undefined?"Undefined":t===null?"Null":typeof(r=h(e=l(t),o))=="string"?r:c?i(e):(n=i(e))=="Object"&&s(e.callee)?"Arguments":n}},(t,e,r)=>{var n=r(35);var s=n("toStringTag");var i={};i[s]="z";t.exports=String(i)==="[object z]"},(t,e,r)=>{var n=r(40);var s=r(23);var i=r(41);var a=r(55);var o=r(83);var l=a("IE_PROTO");var c=Object;var h=c.prototype;t.exports=o?c.getPrototypeOf:function(t){var e=i(t);if(n(e,l))return e[l];var r=e.constructor;if(s(r)&&e instanceof r){return r.prototype}return e instanceof c?h:null}},(t,e,r)=>{var n=r(10);t.exports=!n(function(){function t(){}t.prototype.constructor=null;return Object.getPrototypeOf(new t)!==t.prototype})},(t,e,r)=>{var i=r(17);var a=r(48);var o=r(85);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n=false;var t={};var s;try{s=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set);s(t,[]);n=t instanceof Array}catch(t){}return function t(e,r){a(e);o(r);if(n)s(e,r);else e.__proto__=r;return e}}():undefined)},(t,e,r)=>{var n=r(23);var s=String;var i=TypeError;t.exports=function(t){if(typeof t=="object"||n(t))return t;throw i("Can't set "+s(t)+" as a prototype")}},(t,e,r)=>{r(87);r(93);r(95);r(117);r(119);var n=r(128);t.exports=n.structuredClone},(t,e,r)=>{"use strict";var n=r(15);var s=r(70);var i=r(88);var a=r(53);var o=r(46).f;var l=r(89);var c=r(37);var h=r(9);var u="Array Iterator";var d=a.set;var f=a.getterFor(u);t.exports=l(Array,"Array",function(t,e){d(this,{type:u,target:n(t),index:0,kind:e})},function(){var t=f(this);var e=t.target;var r=t.kind;var n=t.index++;if(!e||n>=e.length){t.target=undefined;return{value:undefined,done:true}}if(r=="keys")return{value:n,done:false};if(r=="values")return{value:e[n],done:false};return{value:[n,e[n]],done:false}},"values");var p=i.Arguments=i.Array;s("keys");s("values");s("entries");if(!c&&h&&p.name!=="values")try{o(p,"name",{value:"values"})}catch(t){}},t=>{t.exports={}},(t,e,r)=>{"use strict";var m=r(6);var b=r(11);var _=r(37);var n=r(51);var y=r(23);var A=r(90);var S=r(82);var x=r(84);var w=r(92);var E=r(45);var C=r(49);var s=r(35);var k=r(88);var i=r(91);var T=n.PROPER;var P=n.CONFIGURABLE;var M=i.IteratorPrototype;var F=i.BUGGY_SAFARI_ITERATORS;var R=s("iterator");var O="keys";var D="values";var I="entries";var L=function(){return this};t.exports=function(t,e,r,n,s,i,a){A(r,e,n);var o=function(e){if(e===s&&d)return d;if(!F&&e in h)return h[e];switch(e){case O:return function t(){return new r(this,e)};case D:return function t(){return new r(this,e)};case I:return function t(){return new r(this,e)}}return function(){return new r(this)}};var l=e+" Iterator";var c=false;var h=t.prototype;var u=h[R]||h["@@iterator"]||s&&h[s];var d=!F&&u||o(s);var f=e=="Array"?h.entries||u:u;var p,g,v;if(f){p=S(f.call(new t));if(p!==Object.prototype&&p.next){if(!_&&S(p)!==M){if(x){x(p,M)}else if(!y(p[R])){C(p,R,L)}}w(p,l,true,true);if(_)k[l]=L}}if(T&&s==D&&u&&u.name!==D){if(!_&&P){E(h,"name",D)}else{c=true;d=function t(){return b(u,this)}}}if(s){g={values:o(D),keys:i?d:o(O),entries:o(I)};if(a)for(v in g){if(F||c||!(v in h)){C(h,v,g[v])}}else m({target:e,proto:true,forced:F||c},g)}if((!_||a)&&h[R]!==d){C(h,R,d,{name:s})}k[e]=d;return g}},(t,e,r)=>{"use strict";var i=r(91).IteratorPrototype;var a=r(71);var o=r(14);var l=r(92);var c=r(88);var h=function(){return this};t.exports=function(t,e,r,n){var s=e+" Iterator";t.prototype=a(i,{next:o(+!n,r)});l(t,s,false,true);c[s]=h;return t}},(t,e,r)=>{"use strict";var n=r(10);var s=r(23);var i=r(71);var a=r(82);var o=r(49);var l=r(35);var c=r(37);var h=l("iterator");var u=false;var d,f,p;if([].keys){p=[].keys();if(!("next"in p))u=true;else{f=a(a(p));if(f!==Object.prototype)d=f}}var g=d==undefined||n(function(){var t={};return d[h].call(t)!==t});if(g)d={};else if(c)d=i(d);if(!s(d[h])){o(d,h,function(){return this})}t.exports={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:u}},(t,e,r)=>{var n=r(46).f;var s=r(40);var i=r(35);var a=i("toStringTag");t.exports=function(t,e,r){if(t&&!r)t=t.prototype;if(t&&!s(t,a)){n(t,a,{configurable:true,value:e})}}},(t,e,r)=>{var n=r(81);var s=r(49);var i=r(94);if(!n){s(Object.prototype,"toString",i,{unsafe:true})}},(t,e,r)=>{"use strict";var n=r(81);var s=r(80);t.exports=n?{}.toString:function t(){return"[object "+s(this)+"]"}},(t,e,r)=>{r(96)},(t,e,r)=>{"use strict";var n=r(97);var s=r(114);n("Map",function(e){return function t(){return e(this,arguments.length?arguments[0]:undefined)}},s)},(t,e,r)=>{"use strict";var m=r(6);var b=r(7);var _=r(17);var y=r(69);var A=r(49);var S=r(98);var x=r(105);var w=r(111);var E=r(23);var C=r(22);var k=r(10);var T=r(112);var P=r(92);var M=r(113);t.exports=function(t,e,r){var n=t.indexOf("Map")!==-1;var s=t.indexOf("Weak")!==-1;var i=n?"set":"add";var a=b[t];var o=a&&a.prototype;var l=a;var c={};var h=function(t){var n=_(o[t]);A(o,t,t=="add"?function t(e){n(this,e===0?0:e);return this}:t=="delete"?function(t){return s&&!C(t)?false:n(this,t===0?0:t)}:t=="get"?function t(e){return s&&!C(e)?undefined:n(this,e===0?0:e)}:t=="has"?function t(e){return s&&!C(e)?false:n(this,e===0?0:e)}:function t(e,r){n(this,e===0?0:e,r);return this})};var u=y(t,!E(a)||!(s||o.forEach&&!k(function(){(new a).entries().next()})));if(u){l=r.getConstructor(e,t,n,i);S.enable()}else if(y(t,true)){var d=new l;var f=d[i](s?{}:-0,1)!=d;var p=k(function(){d.has(1)});var g=T(function(t){new a(t)});var v=!s&&k(function(){var t=new a;var e=5;while(e--)t[i](e,e);return!t.has(-0)});if(!g){l=e(function(t,e){w(t,o);var r=M(new a,t,l);if(e!=undefined)x(e,r[i],{that:r,AS_ENTRIES:n});return r});l.prototype=o;o.constructor=l}if(p||v){h("delete");h("has");n&&h("get")}if(v||f)h(i);if(s&&o.clear)delete o.clear}c[t]=l;m({global:true,constructor:true,forced:l!=a},c);P(l,t);if(!s)r.setStrong(l,t,n);return l}},(t,e,r)=>{var n=r(6);var a=r(17);var s=r(56);var i=r(22);var o=r(40);var l=r(46).f;var c=r(59);var h=r(99);var u=r(102);var d=r(42);var f=r(104);var p=false;var g=d("meta");var v=0;var m=function(t){l(t,g,{value:{objectID:"O"+v++,weakData:{}}})};var b=function(t,e){if(!i(t))return typeof t=="symbol"?t:(typeof t=="string"?"S":"P")+t;if(!o(t,g)){if(!u(t))return"F";if(!e)return"E";m(t)}return t[g].objectID};var _=function(t,e){if(!o(t,g)){if(!u(t))return true;if(!e)return false;m(t)}return t[g].weakData};var y=function(t){if(f&&p&&u(t)&&!o(t,g))m(t);return t};var A=function(){S.enable=function(){};p=true;var s=c.f;var i=a([].splice);var t={};t[g]=1;if(s(t).length){c.f=function(t){var e=s(t);for(var r=0,n=e.length;r<n;r++){if(e[r]===g){i(e,r,1);break}}return e};n({target:"Object",stat:true,forced:true},{getOwnPropertyNames:h.f})}};var S=t.exports={enable:A,fastKey:b,getWeakData:_,onFreeze:y};s[g]=true},(t,e,r)=>{var n=r(18);var s=r(15);var i=r(59).f;var a=r(100);var o=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var l=function(t){try{return i(t)}catch(t){return a(o)}};t.exports.f=function t(e){return o&&n(e)=="Window"?l(e):i(s(e))}},(t,e,r)=>{var l=r(62);var c=r(65);var h=r(101);var u=Array;var d=Math.max;t.exports=function(t,e,r){var n=c(t);var s=l(e,n);var i=l(r===undefined?n:r,n);var a=u(d(i-s,0));for(var o=0;s<i;s++,o++)h(a,o,t[s]);a.length=o;return a}},(t,e,r)=>{"use strict";var s=r(20);var i=r(46);var a=r(14);t.exports=function(t,e,r){var n=s(e);if(n in t)i.f(t,n,a(0,r));else t[n]=r}},(t,e,r)=>{var n=r(10);var s=r(22);var i=r(18);var a=r(103);var o=Object.isExtensible;var l=n(function(){o(1)});t.exports=l||a?function t(e){if(!s(e))return false;if(a&&i(e)=="ArrayBuffer")return false;return o?o(e):true}:o},(t,e,r)=>{var n=r(10);t.exports=n(function(){if(typeof ArrayBuffer=="function"){var t=new ArrayBuffer(8);if(Object.isExtensible(t))Object.defineProperty(t,"a",{value:8})}})},(t,e,r)=>{var n=r(10);t.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},(t,e,r)=>{var b=r(106);var _=r(11);var y=r(48);var A=r(33);var S=r(107);var x=r(65);var w=r(26);var E=r(108);var C=r(109);var k=r(110);var T=TypeError;var P=function(t,e){this.stopped=t;this.result=e};var M=P.prototype;t.exports=function(t,e,r){var n=r&&r.that;var s=!!(r&&r.AS_ENTRIES);var i=!!(r&&r.IS_RECORD);var a=!!(r&&r.IS_ITERATOR);var o=!!(r&&r.INTERRUPTED);var l=b(e,n);var c,h,u,d,f,p,g;var v=function(t){if(c)k(c,"normal",t);return new P(true,t)};var m=function(t){if(s){y(t);return o?l(t[0],t[1],v):l(t[0],t[1])}return o?l(t,v):l(t)};if(i){c=t.iterator}else if(a){c=t}else{h=C(t);if(!h)throw T(A(t)+" is not iterable");if(S(h)){for(u=0,d=x(t);d>u;u++){f=m(t[u]);if(f&&w(M,f))return f}return new P(false)}c=E(t,h)}p=i?t.next:c.next;while(!(g=_(p,c)).done){try{f=m(g.value)}catch(t){k(c,"throw",t)}if(typeof f=="object"&&f&&w(M,f))return f}return new P(false)}},(t,e,r)=>{var n=r(17);var s=r(32);var i=r(12);var a=n(n.bind);t.exports=function(t,e){s(t);return e===undefined?t:i?a(t,e):function(){return t.apply(e,arguments)}}},(t,e,r)=>{var n=r(35);var s=r(88);var i=n("iterator");var a=Array.prototype;t.exports=function(t){return t!==undefined&&(s.Array===t||a[i]===t)}},(t,e,r)=>{var n=r(11);var s=r(32);var i=r(48);var a=r(33);var o=r(109);var l=TypeError;t.exports=function(t,e){var r=arguments.length<2?o(t):e;if(s(r))return i(n(r,t));throw l(a(t)+" is not iterable")}},(t,e,r)=>{var n=r(80);var s=r(31);var i=r(88);var a=r(35);var o=a("iterator");t.exports=function(t){if(t!=undefined)return s(t,o)||s(t,"@@iterator")||i[n(t)]}},(t,e,r)=>{var i=r(11);var a=r(48);var o=r(31);t.exports=function(t,e,r){var n,s;a(t);try{n=o(t,"return");if(!n){if(e==="throw")throw r;return r}n=i(n,t)}catch(t){s=true;n=t}if(e==="throw")throw r;if(s)throw n;a(n);return r}},(t,e,r)=>{var n=r(26);var s=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw s("Incorrect invocation")}},(t,e,r)=>{var n=r(35);var s=n("iterator");var i=false;try{var a=0;var o={next:function(){return{done:!!a++}},return:function(){i=true}};o[s]=function(){return this};Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return false;var r=false;try{var n={};n[s]=function(){return{next:function(){return{done:r=true}}}};t(n)}catch(t){}return r}},(t,e,r)=>{var i=r(23);var a=r(22);var o=r(84);t.exports=function(t,e,r){var n,s;if(o&&i(n=e.constructor)&&n!==r&&a(s=n.prototype)&&s!==r.prototype)o(t,s);return t}},(t,e,r)=>{"use strict";var c=r(46).f;var h=r(71);var u=r(115);var d=r(106);var f=r(111);var p=r(105);var a=r(89);var o=r(116);var g=r(9);var v=r(98).fastKey;var n=r(53);var m=n.set;var b=n.getterFor;t.exports={getConstructor:function(t,r,n,s){var e=t(function(t,e){f(t,i);m(t,{type:r,index:h(null),first:undefined,last:undefined,size:0});if(!g)t.size=0;if(e!=undefined)p(e,t[s],{that:t,AS_ENTRIES:n})});var i=e.prototype;var o=b(r);var a=function(t,e,r){var n=o(t);var s=l(t,e);var i,a;if(s){s.value=r}else{n.last=s={index:a=v(e,true),key:e,value:r,previous:i=n.last,next:undefined,removed:false};if(!n.first)n.first=s;if(i)i.next=s;if(g)n.size++;else t.size++;if(a!=="F")n.index[a]=s}return t};var l=function(t,e){var r=o(t);var n=v(e);var s;if(n!=="F")return r.index[n];for(s=r.first;s;s=s.next){if(s.key==e)return s}};u(i,{clear:function t(){var e=this;var r=o(e);var n=r.index;var s=r.first;while(s){s.removed=true;if(s.previous)s.previous=s.previous.next=undefined;delete n[s.index];s=s.next}r.first=r.last=undefined;if(g)r.size=0;else e.size=0},delete:function(t){var e=this;var r=o(e);var n=l(e,t);if(n){var s=n.next;var i=n.previous;delete r.index[n.index];n.removed=true;if(i)i.next=s;if(s)s.previous=i;if(r.first==n)r.first=s;if(r.last==n)r.last=i;if(g)r.size--;else e.size--}return!!n},forEach:function t(e){var r=o(this);var n=d(e,arguments.length>1?arguments[1]:undefined);var s;while(s=s?s.next:r.first){n(s.value,s.key,this);while(s&&s.removed)s=s.previous}},has:function t(e){return!!l(this,e)}});u(i,n?{get:function t(e){var r=l(this,e);return r&&r.value},set:function t(e,r){return a(this,e===0?0:e,r)}}:{add:function t(e){return a(this,e=e===0?0:e,e)}});if(g)c(i,"size",{get:function(){return o(this).size}});return e},setStrong:function(t,e,r){var n=e+" Iterator";var s=b(e);var i=b(n);a(t,e,function(t,e){m(this,{type:n,target:t,state:s(t),kind:e,last:undefined})},function(){var t=i(this);var e=t.kind;var r=t.last;while(r&&r.removed)r=r.previous;if(!t.target||!(t.last=r=r?r.next:t.state.first)){t.target=undefined;return{value:undefined,done:true}}if(e=="keys")return{value:r.key,done:false};if(e=="values")return{value:r.value,done:false};return{value:[r.key,r.value],done:false}},r?"entries":"values",!r,true);o(e)}}},(t,e,r)=>{var s=r(49);t.exports=function(t,e,r){for(var n in e)s(t,n,e[n],r);return t}},(t,e,r)=>{"use strict";var n=r(25);var s=r(46);var i=r(35);var a=r(9);var o=i("species");t.exports=function(t){var e=n(t);var r=s.f;if(a&&e&&!e[o]){r(e,o,{configurable:true,get:function(){return this}})}}},(t,e,r)=>{r(118)},(t,e,r)=>{"use strict";var n=r(97);var s=r(114);n("Set",function(e){return function t(){return e(this,arguments.length?arguments[0]:undefined)}},s)},(t,e,r)=>{var n=r(37);var s=r(6);var p=r(7);var g=r(25);var i=r(17);var a=r(10);var o=r(42);var v=r(23);var m=r(120);var b=r(22);var _=r(24);var d=r(105);var f=r(48);var y=r(80);var A=r(40);var S=r(101);var x=r(45);var w=r(65);var l=r(121);var E=r(122);var C=r(124);var c=r(29);var h=r(125);var u=r(126);var k=r(127);var T=p.Object;var P=p.Date;var M=p.Error;var F=p.EvalError;var R=p.RangeError;var O=p.ReferenceError;var D=p.SyntaxError;var I=p.TypeError;var L=p.URIError;var N=p.PerformanceMark;var j=p.WebAssembly;var U=j&&j.CompileError||M;var W=j&&j.LinkError||M;var B=j&&j.RuntimeError||M;var q=g("DOMException");var G=g("Set");var z=g("Map");var H=z.prototype;var V=i(H.has);var X=i(H.get);var $=i(H.set);var Y=i(G.prototype.add);var K=g("Object","keys");var J=i([].push);var Q=i(true.valueOf);var Z=i(1..valueOf);var tt=i("".valueOf);var et=i(P.prototype.getTime);var rt=o("structuredClone");var nt="DataCloneError";var st="Transferring";var it=function(n){return!a(function(){var t=new p.Set([7]);var e=n(t);var r=n(T(7));return e==t||!e.has(7)||typeof r!="object"||r!=7})&&n};var at=function(r,n){return!a(function(){var t=new n;var e=r({a:t,b:t});return!(e&&e.a===e.b&&e.a instanceof n&&e.a.stack===t.stack)})};var ot=function(e){return!a(function(){var t=e(new p.AggregateError([1],rt,{cause:3}));return t.name!="AggregateError"||t.errors[0]!=1||t.message!=rt||t.cause!=3})};var lt=p.structuredClone;var ct=n||!at(lt,M)||!at(lt,q)||!ot(lt);var ht=!lt&&it(function(t){return new N(rt,{detail:t}).detail});var ut=it(lt)||ht;var dt=function(t){throw new q("Uncloneable type: "+t,nt)};var ft=function(t,e){throw new q((e||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",nt)};var pt=function(e,r){if(_(e))dt("Symbol");if(!b(e))return e;if(r){if(V(r,e))return X(r,e)}else r=new z;var n=y(e);var t=false;var s,i,a,o,l,c,h,u,d,f;switch(n){case"Array":a=[];t=true;break;case"Object":a={};t=true;break;case"Map":a=new z;t=true;break;case"Set":a=new G;t=true;break;case"RegExp":a=new RegExp(e.source,E(e));break;case"Error":i=e.name;switch(i){case"AggregateError":a=g("AggregateError")([]);break;case"EvalError":a=F();break;case"RangeError":a=R();break;case"ReferenceError":a=O();break;case"SyntaxError":a=D();break;case"TypeError":a=I();break;case"URIError":a=L();break;case"CompileError":a=U();break;case"LinkError":a=W();break;case"RuntimeError":a=B();break;default:a=M()}t=true;break;case"DOMException":a=new q(e.message,e.name);t=true;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":s=p[n];if(!b(s))ft(n);a=new s(pt(e.buffer,r),e.byteOffset,n==="DataView"?e.byteLength:e.length);break;case"DOMQuad":try{a=new DOMQuad(pt(e.p1,r),pt(e.p2,r),pt(e.p3,r),pt(e.p4,r))}catch(t){if(ut){a=ut(e)}else ft(n)}break;case"FileList":s=p.DataTransfer;if(m(s)){o=new s;for(l=0,c=w(e);l<c;l++){o.items.add(pt(e[l],r))}a=o.files}else if(ut){a=ut(e)}else ft(n);break;case"ImageData":try{a=new ImageData(pt(e.data,r),e.width,e.height,{colorSpace:e.colorSpace})}catch(t){if(ut){a=ut(e)}else ft(n)}break;default:if(ut){a=ut(e)}else switch(n){case"BigInt":a=T(e.valueOf());break;case"Boolean":a=T(Q(e));break;case"Number":a=T(Z(e));break;case"String":a=T(tt(e));break;case"Date":a=new P(et(e));break;case"ArrayBuffer":s=p.DataView;if(!s&&typeof e.slice!="function")ft(n);try{if(typeof e.slice=="function"){a=e.slice(0)}else{c=e.byteLength;a=new ArrayBuffer(c);d=new s(e);f=new s(a);for(l=0;l<c;l++){f.setUint8(l,d.getUint8(l))}}}catch(t){throw new q("ArrayBuffer is detached",nt)}break;case"SharedArrayBuffer":a=e;break;case"Blob":try{a=e.slice(0,e.size,e.type)}catch(t){ft(n)}break;case"DOMPoint":case"DOMPointReadOnly":s=p[n];try{a=s.fromPoint?s.fromPoint(e):new s(e.x,e.y,e.z,e.w)}catch(t){ft(n)}break;case"DOMRect":case"DOMRectReadOnly":s=p[n];try{a=s.fromRect?s.fromRect(e):new s(e.x,e.y,e.width,e.height)}catch(t){ft(n)}break;case"DOMMatrix":case"DOMMatrixReadOnly":s=p[n];try{a=s.fromMatrix?s.fromMatrix(e):new s(e)}catch(t){ft(n)}break;case"AudioData":case"VideoFrame":if(!v(e.clone))ft(n);try{a=e.clone()}catch(t){dt(n)}break;case"File":try{a=new File([e],e.name,e)}catch(t){ft(n)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":ft(n);default:dt(n)}}$(r,e,a);if(t)switch(n){case"Array":case"Object":h=K(e);for(l=0,c=w(h);l<c;l++){u=h[l];S(a,u,pt(e[u],r))}break;case"Map":e.forEach(function(t,e){$(a,pt(e,r),pt(t,r))});break;case"Set":e.forEach(function(t){Y(a,pt(t,r))});break;case"Error":x(a,"message",pt(e.message,r));if(A(e,"cause")){x(a,"cause",pt(e.cause,r))}if(i=="AggregateError"){a.errors=pt(e.errors,r)}case"DOMException":if(C){x(a,"stack",pt(e.stack,r))}}return a};var gt=lt&&!a(function(){if(u&&c>92||k&&c>94||h&&c>97)return false;var t=new ArrayBuffer(8);var e=lt(t,{transfer:[t]});return t.byteLength!=0||e.byteLength!=8});var vt=function(t,e){if(!b(t))throw I("Transfer option cannot be converted to a sequence");var r=[];d(t,function(t){J(r,f(t))});var n=0;var s=w(r);var i,a,o,l,c,h,u;if(gt){l=lt(r,{transfer:r});while(n<s)$(e,r[n],l[n++])}else while(n<s){i=r[n++];if(V(e,i))throw new q("Duplicate transferable",nt);a=y(i);switch(a){case"ImageBitmap":o=p.OffscreenCanvas;if(!m(o))ft(a,st);try{h=new o(i.width,i.height);u=h.getContext("bitmaprenderer");u.transferFromImageBitmap(i);c=h.transferToImageBitmap()}catch(t){}break;case"AudioData":case"VideoFrame":if(!v(i.clone)||!v(i.close))ft(a,st);try{c=i.clone();i.close()}catch(t){}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":ft(a,st)}if(c===undefined)throw new q("This object cannot be transferred: "+a,nt);$(e,i,c)}};s({global:true,enumerable:true,sham:!gt,forced:ct},{structuredClone:function t(e){var r=l(arguments.length,1)>1&&arguments[1]!=null?f(arguments[1]):undefined;var n=r?r.transfer:undefined;var s;if(n!==undefined){s=new z;vt(n,s)}return pt(e,s)}})},(t,e,r)=>{var n=r(17);var s=r(10);var i=r(23);var a=r(80);var o=r(25);var l=r(52);var c=function(){};var h=[];var u=o("Reflect","construct");var d=/^\s*(?:class|function)\b/;var f=n(d.exec);var p=!d.exec(c);var g=function t(e){if(!i(e))return false;try{u(c,h,e);return true}catch(t){return false}};var v=function t(e){if(!i(e))return false;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return false}try{return p||!!f(d,l(e))}catch(t){return true}};v.sham=true;t.exports=!u||s(function(){var t;return g(g.call)||!g(Object)||!g(function(){t=true})||t})?v:g},t=>{var r=TypeError;t.exports=function(t,e){if(t<e)throw r("Not enough arguments");return t}},(t,e,r)=>{var n=r(11);var s=r(40);var i=r(26);var a=r(123);var o=RegExp.prototype;t.exports=function(t){var e=t.flags;return e===undefined&&!("flags"in o)&&!s(t,"flags")&&i(o,t)?n(a,t):e}},(t,e,r)=>{"use strict";var n=r(48);t.exports=function(){var t=n(this);var e="";if(t.hasIndices)e+="d";if(t.global)e+="g";if(t.ignoreCase)e+="i";if(t.multiline)e+="m";if(t.dotAll)e+="s";if(t.unicode)e+="u";if(t.unicodeSets)e+="v";if(t.sticky)e+="y";return e}},(t,e,r)=>{var n=r(10);var s=r(14);t.exports=!n(function(){var t=Error("a");if(!("stack"in t))return true;Object.defineProperty(t,"stack",s(1,7));return t.stack!==7})},(t,e,r)=>{var n=r(126);var s=r(127);t.exports=!n&&!s&&typeof window=="object"&&typeof document=="object"},t=>{t.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},(t,e,r)=>{var n=r(18);var s=r(7);t.exports=n(s.process)=="process"},(t,e,r)=>{var n=r(7);t.exports=n},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0;exports.getDocument=getDocument;exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory;exports.version=void 0;var _util=__w_pdfjs_require__(1);var _annotation_storage=__w_pdfjs_require__(130);var _display_utils=__w_pdfjs_require__(133);var _font_loader=__w_pdfjs_require__(136);var _canvas=__w_pdfjs_require__(137);var _worker_options=__w_pdfjs_require__(140);var _is_node=__w_pdfjs_require__(3);var _message_handler=__w_pdfjs_require__(141);var _metadata=__w_pdfjs_require__(142);var _optional_content_config=__w_pdfjs_require__(143);var _transport_stream=__w_pdfjs_require__(144);var _xfa_text=__w_pdfjs_require__(145);function _classPrivateMethodInitSpec(t,e){_checkPrivateRedeclaration(t,e);e.add(t)}function _classPrivateMethodGet(t,e,r){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return r}function _classPrivateFieldInitSpec(t,e,r){_checkPrivateRedeclaration(t,e);e.set(t,r)}function _checkPrivateRedeclaration(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function _classPrivateFieldSet(t,e,r){var n=_classExtractFieldDescriptor(t,e,"set");_classApplyDescriptorSet(t,n,r);return r}function _classPrivateFieldGet(t,e){var r=_classExtractFieldDescriptor(t,e,"get");return _classApplyDescriptorGet(t,r)}function _classExtractFieldDescriptor(t,e,r){if(!e.has(t)){throw new TypeError("attempted to "+r+" private field on non-instance")}return e.get(t)}function _classStaticPrivateFieldSpecSet(t,e,r,n){_classCheckPrivateStaticAccess(t,e);_classCheckPrivateStaticFieldDescriptor(r,"set");_classApplyDescriptorSet(t,r,n);return n}function _classApplyDescriptorSet(t,e,r){if(e.set){e.set.call(t,r)}else{if(!e.writable){throw new TypeError("attempted to set read only private field")}e.value=r}}function _classStaticPrivateFieldSpecGet(t,e,r){_classCheckPrivateStaticAccess(t,e);_classCheckPrivateStaticFieldDescriptor(r,"get");return _classApplyDescriptorGet(t,r)}function _classCheckPrivateStaticFieldDescriptor(t,e){if(t===undefined){throw new TypeError("attempted to "+e+" private static field before its declaration")}}function _classCheckPrivateStaticAccess(t,e){if(t!==e){throw new TypeError("Private static access of wrong provenance")}}function _classApplyDescriptorGet(t,e){if(e.get){return e.get.call(t)}return e.value}const DEFAULT_RANGE_CHUNK_SIZE=65536;const RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;if(_is_node.isNodeJS){const{NodeCanvasFactory,NodeCMapReaderFactory,NodeStandardFontDataFactory}=__w_pdfjs_require__(146);exports.DefaultCanvasFactory=DefaultCanvasFactory=NodeCanvasFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=NodeCMapReaderFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=NodeStandardFontDataFactory}let createPDFNetworkStream;function setPDFNetworkStreamFactory(t){createPDFNetworkStream=t}function getDocument(t){const i=new PDFDocumentLoadingTask;let e;if(typeof t==="string"||t instanceof URL){e={url:t}}else if((0,_util.isArrayBuffer)(t)){e={data:t}}else if(t instanceof PDFDataRangeTransport){e={range:t}}else{if(typeof t!=="object"){throw new Error("Invalid parameter in getDocument, "+"need either string, URL, TypedArray, or parameter object.")}if(!t.url&&!t.data&&!t.range){throw new Error("Invalid parameter object: need either .data, .range or .url")}e=t}const a=Object.create(null);let r=null,o=null;for(const n in e){const s=e[n];switch(n){case"url":if(typeof window!=="undefined"){try{a[n]=new URL(s,window.location).href;continue}catch(t){(0,_util.warn)(`Cannot create valid URL: "${t}".`)}}else if(typeof s==="string"||s instanceof URL){a[n]=s.toString();continue}throw new Error("Invalid PDF url data: "+"either string or URL-object is expected in the url property.");case"range":r=s;continue;case"worker":o=s;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer!=="undefined"&&s instanceof Buffer){a[n]=new Uint8Array(s)}else if(s instanceof Uint8Array){break}else if(typeof s==="string"){a[n]=(0,_util.stringToBytes)(s)}else if(typeof s==="object"&&s!==null&&!isNaN(s.length)){a[n]=new Uint8Array(s)}else if((0,_util.isArrayBuffer)(s)){a[n]=new Uint8Array(s)}else{throw new Error("Invalid PDF binary data: either TypedArray, "+"string, or array-like object is expected in the data property.")}continue}a[n]=s}a.CMapReaderFactory=a.CMapReaderFactory||DefaultCMapReaderFactory;a.StandardFontDataFactory=a.StandardFontDataFactory||DefaultStandardFontDataFactory;a.ignoreErrors=a.stopAtErrors!==true;a.fontExtraProperties=a.fontExtraProperties===true;a.pdfBug=a.pdfBug===true;a.enableXfa=a.enableXfa===true;if(!Number.isInteger(a.rangeChunkSize)||a.rangeChunkSize<1){a.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE}if(typeof a.docBaseUrl!=="string"||(0,_display_utils.isDataScheme)(a.docBaseUrl)){a.docBaseUrl=null}if(!Number.isInteger(a.maxImageSize)||a.maxImageSize<-1){a.maxImageSize=-1}if(typeof a.cMapUrl!=="string"){a.cMapUrl=null}if(typeof a.standardFontDataUrl!=="string"){a.standardFontDataUrl=null}if(typeof a.useWorkerFetch!=="boolean"){a.useWorkerFetch=a.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&a.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory}if(typeof a.isEvalSupported!=="boolean"){a.isEvalSupported=true}if(typeof a.disableFontFace!=="boolean"){a.disableFontFace=_is_node.isNodeJS}if(typeof a.useSystemFonts!=="boolean"){a.useSystemFonts=!_is_node.isNodeJS&&!a.disableFontFace}if(typeof a.ownerDocument!=="object"||a.ownerDocument===null){a.ownerDocument=globalThis.document}if(typeof a.disableRange!=="boolean"){a.disableRange=false}if(typeof a.disableStream!=="boolean"){a.disableStream=false}if(typeof a.disableAutoFetch!=="boolean"){a.disableAutoFetch=false}(0,_util.setVerbosityLevel)(a.verbosity);if(!o){const c={verbosity:a.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};o=c.port?PDFWorker.fromPort(c):new PDFWorker(c);i._worker=o}const l=i.docId;o.promise.then(function(){if(i.destroyed){throw new Error("Loading aborted")}const t=_fetchDocument(o,a,r,l);const e=new Promise(function(t){let e;if(r){e=new _transport_stream.PDFDataTransportStream({length:a.length,initialData:a.initialData,progressiveDone:a.progressiveDone,contentDispositionFilename:a.contentDispositionFilename,disableRange:a.disableRange,disableStream:a.disableStream},r)}else if(!a.data){e=createPDFNetworkStream({url:a.url,length:a.length,httpHeaders:a.httpHeaders,withCredentials:a.withCredentials,rangeChunkSize:a.rangeChunkSize,disableRange:a.disableRange,disableStream:a.disableStream})}t(e)});return Promise.all([t,e]).then(function(t){let[e,r]=t;if(i.destroyed){throw new Error("Loading aborted")}const n=new _message_handler.MessageHandler(l,e,o.port);const s=new WorkerTransport(n,i,r,a);i._transport=s;n.send("Ready",null)})}).catch(i._capability.reject);return i}async function _fetchDocument(t,e,r,n){if(t.destroyed){throw new Error("Worker was destroyed")}if(r){e.length=r.length;e.initialData=r.initialData;e.progressiveDone=r.progressiveDone;e.contentDispositionFilename=r.contentDispositionFilename}const s=await t.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.16.105",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});if(e.data){e.data=null}if(t.destroyed){throw new Error("Worker was destroyed")}return s}class PDFDocumentLoadingTask{constructor(){var t,e;this._capability=(0,_util.createPromiseCapability)();this._transport=null;this._worker=null;this.docId=`d${_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(t=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),e=t++,t)),e}`;this.destroyed=false;this.onPassword=null;this.onProgress=null;this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var t;this.destroyed=true;await((t=this._transport)===null||t===void 0?void 0:t.destroy());this._transport=null;if(this._worker){this._worker.destroy();this._worker=null}}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var _docId={writable:true,value:0};class PDFDataRangeTransport{constructor(t,e){let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;this.length=t;this.initialData=e;this.progressiveDone=r;this.contentDispositionFilename=n;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._progressiveDoneListeners=[];this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const r of this._rangeListeners){r(t,e)}}onDataProgress(e,r){this._readyCapability.promise.then(()=>{for(const t of this._progressListeners){t(e,r)}})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners){t(e)}})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners){t()}})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,e){this._pdfInfo=t;this._transport=e;Object.defineProperty(this,"fingerprint",{get(){(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, "+"please use `PDFDocumentProxy.fingerprints` instead.");return this.fingerprints[0]}});Object.defineProperty(this,"getStats",{value:async()=>{(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, "+"please use the `PDFDocumentProxy.stats`-getter instead.");return this.stats||{streamTypes:{},fontTypes:{}}}})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){if(this._transport.annotationStorage.size<=0){(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, "+"please use the getData-method instead.")}return this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,e,r,n){let s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;this._pageIndex=t;this._pageInfo=e;this._ownerDocument=n;this._transport=r;this._stats=s?new _display_utils.StatTimer:null;this._pdfBug=s;this.commonObjs=r.commonObjs;this.objs=new PDFObjects;this._bitmaps=new Set;this.cleanupAfterRender=false;this.pendingCleanup=false;this._intentStates=new Map;this._annotationPromises=new Map;this.destroyed=false}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:t,rotation:e=this.rotate,offsetX:r=0,offsetY:n=0,dontFlip:s=false}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:e,offsetX:r,offsetY:n,dontFlip:s})}getAnnotations(){let{intent:t="display"}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const e=this._transport.getRenderingIntent(t);let r=this._annotationPromises.get(e.cacheKey);if(!r){r=this._transport.getAnnotations(this._pageIndex,e.renderingIntent);this._annotationPromises.set(e.cacheKey,r);r=r.then(t=>{for(const e of t){if(e.titleObj!==undefined){Object.defineProperty(e,"title",{get(){(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead.");return e.titleObj.str}})}if(e.contentsObj!==undefined){Object.defineProperty(e,"contents",{get(){(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead.");return e.contentsObj.str}})}}return t})}return r}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var t;return((t=this._transport._htmlForXfa)===null||t===void 0?void 0:t.children[this._pageIndex])||null}render(t){var e,r,n;let{canvasContext:s,viewport:i,intent:a="display",annotationMode:o=_util.AnnotationMode.ENABLE,transform:l=null,imageLayer:c=null,canvasFactory:h=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:g=null}=t;if(((e=arguments[0])===null||e===void 0?void 0:e.renderInteractiveForms)!==undefined){(0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, "+"please use the `annotationMode`-option instead.");if(arguments[0].renderInteractiveForms===true&&o===_util.AnnotationMode.ENABLE){o=_util.AnnotationMode.ENABLE_FORMS}}if(((r=arguments[0])===null||r===void 0?void 0:r.includeAnnotationStorage)!==undefined){(0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, "+"please use the `annotationMode`-option instead.");if(arguments[0].includeAnnotationStorage===true&&o===_util.AnnotationMode.ENABLE){o=_util.AnnotationMode.ENABLE_STORAGE}}if(this._stats){this._stats.time("Overall")}const v=this._transport.getRenderingIntent(a,o,g);this.pendingCleanup=false;if(!d){d=this._transport.getOptionalContentConfig()}let m=this._intentStates.get(v.cacheKey);if(!m){m=Object.create(null);this._intentStates.set(v.cacheKey,m)}if(m.streamReaderCancelTimeout){clearTimeout(m.streamReaderCancelTimeout);m.streamReaderCancelTimeout=null}const b=h||new DefaultCanvasFactory({ownerDocument:this._ownerDocument});const _=!!(v.renderingIntent&_util.RenderingIntentFlag.PRINT);if(!m.displayReadyCapability){m.displayReadyCapability=(0,_util.createPromiseCapability)();m.operatorList={fnArray:[],argsArray:[],lastChunk:false,separateAnnots:null};if(this._stats){this._stats.time("Page Request")}this._pumpOperatorList(v)}const y=t=>{m.renderTasks.delete(A);if(this.cleanupAfterRender||_){this.pendingCleanup=true}this._tryCleanup();if(t){A.capability.reject(t);this._abortOperatorList({intentState:m,reason:t instanceof Error?t:new Error(t)})}else{A.capability.resolve()}if(this._stats){this._stats.timeEnd("Rendering");this._stats.timeEnd("Overall")}};const A=new InternalRenderTask({callback:y,params:{canvasContext:s,viewport:i,transform:l,imageLayer:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:b,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:p});((n=m).renderTasks||(n.renderTasks=new Set)).add(A);const S=A.task;Promise.all([m.displayReadyCapability.promise,d]).then(t=>{let[e,r]=t;if(this.pendingCleanup){y();return}if(this._stats){this._stats.time("Rendering")}A.initializeGraphics({transparency:e,optionalContentConfig:r});A.operatorListChanged()}).catch(y);return S}getOperatorList(){let{intent:t="display",annotationMode:e=_util.AnnotationMode.ENABLE,printAnnotationStorage:r=null}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};function n(){if(i.operatorList.lastChunk){i.opListReadCapability.resolve(i.operatorList);i.renderTasks.delete(a)}}const s=this._transport.getRenderingIntent(t,e,r,true);let i=this._intentStates.get(s.cacheKey);if(!i){i=Object.create(null);this._intentStates.set(s.cacheKey,i)}let a;if(!i.opListReadCapability){var o;a=Object.create(null);a.operatorListChanged=n;i.opListReadCapability=(0,_util.createPromiseCapability)();((o=i).renderTasks||(o.renderTasks=new Set)).add(a);i.operatorList={fnArray:[],argsArray:[],lastChunk:false,separateAnnots:null};if(this._stats){this._stats.time("Page Request")}this._pumpOperatorList(s)}return i.opListReadCapability.promise}streamTextContent(){let{disableCombineTextItems:t=false,includeMarkedContent:e=false}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const r=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:t!==true,includeMarkedContent:e===true},{highWaterMark:r,size(t){return t.items.length}})}getTextContent(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(this._transport._htmlForXfa){return this.getXfa().then(t=>{return _xfa_text.XfaText.textContent(t)})}const r=this.streamTextContent(t);return new Promise(function(n,t){function s(){e.read().then(function(t){let{value:e,done:r}=t;if(r){n(i);return}Object.assign(i.styles,e.styles);i.items.push(...e.items);s()},t)}const e=r.getReader();const i={items:[],styles:Object.create(null)};s()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=true;const t=[];for(const e of this._intentStates.values()){this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:true});if(e.opListReadCapability){continue}for(const r of e.renderTasks){t.push(r.completed);r.cancel()}}this.objs.clear();for(const n of this._bitmaps){n.close()}this._bitmaps.clear();this._annotationPromises.clear();this._jsActionsPromise=null;this._structTreePromise=null;this.pendingCleanup=false;return Promise.all(t)}cleanup(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.pendingCleanup=true;return this._tryCleanup(t)}_tryCleanup(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!this.pendingCleanup){return false}for(const{renderTasks:e,operatorList:r}of this._intentStates.values()){if(e.size>0||!r.lastChunk){return false}}this._intentStates.clear();this.objs.clear();this._annotationPromises.clear();this._jsActionsPromise=null;this._structTreePromise=null;if(t&&this._stats){this._stats=new _display_utils.StatTimer}for(const n of this._bitmaps){n.close()}this._bitmaps.clear();this.pendingCleanup=false;return true}_startRenderPage(t,e){const r=this._intentStates.get(e);if(!r){return}if(this._stats){this._stats.timeEnd("Page Request")}if(r.displayReadyCapability){r.displayReadyCapability.resolve(t)}}_renderPageChunk(r,n){for(let t=0,e=r.length;t<e;t++){n.operatorList.fnArray.push(r.fnArray[t]);n.operatorList.argsArray.push(r.argsArray[t])}n.operatorList.lastChunk=r.lastChunk;n.operatorList.separateAnnots=r.separateAnnots;for(const t of n.renderTasks){t.operatorListChanged()}if(r.lastChunk){this._tryCleanup()}}_pumpOperatorList(t){let{renderingIntent:e,cacheKey:r,annotationStorageMap:n}=t;const s=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:r,annotationStorage:n});const i=s.getReader();const a=this._intentStates.get(r);a.streamReader=i;const o=()=>{i.read().then(t=>{let{value:e,done:r}=t;if(r){a.streamReader=null;return}if(this._transport.destroyed){return}this._renderPageChunk(e,a);o()},t=>{a.streamReader=null;if(this._transport.destroyed){return}if(a.operatorList){a.operatorList.lastChunk=true;for(const e of a.renderTasks){e.operatorListChanged()}this._tryCleanup()}if(a.displayReadyCapability){a.displayReadyCapability.reject(t)}else if(a.opListReadCapability){a.opListReadCapability.reject(t)}else{throw t}})};o()}_abortOperatorList(t){let{intentState:e,reason:r,force:n=false}=t;if(!e.streamReader){return}if(!n){if(e.renderTasks.size>0){return}if(r instanceof _display_utils.RenderingCancelledException){e.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:e,reason:r,force:true});e.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}e.streamReader.cancel(new _util.AbortException(r.message)).catch(()=>{});e.streamReader=null;if(this._transport.destroyed){return}for(const[s,i]of this._intentStates){if(i===e){this._intentStates.delete(s);break}}this.cleanup()}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[];this._deferred=Promise.resolve()}postMessage(t,e){const r={data:structuredClone(t,e)};this._deferred.then(()=>{for(const t of this._listeners){t.call(this,r)}})}addEventListener(t,e){this._listeners.push(e)}removeEventListener(t,e){const r=this._listeners.indexOf(e);this._listeners.splice(r,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:false,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof require==="function"){PDFWorkerUtil.isWorkerDisabled=true;PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js"}else if(typeof document==="object"){var _document,_document$currentScri;const pdfjsFilePath=(_document=document)===null||_document===void 0?void 0:(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;if(pdfjsFilePath){PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2")}}PDFWorkerUtil.isSameOrigin=function(t,e){let r;try{r=new URL(t);if(!r.origin||r.origin==="null"){return false}}catch(t){return false}const n=new URL(e,r);return r.origin===n.origin};PDFWorkerUtil.createCDNWrapper=function(t){const e=`importScripts("${t}");`;return URL.createObjectURL(new Blob([e]))}}class PDFWorker{constructor(){let{name:t=null,port:e=null,verbosity:r=(0,_util.getVerbosityLevel)()}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(e&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(e)){throw new Error("Cannot use more than one PDFWorker per port.")}this.name=t;this.destroyed=false;this.verbosity=r;this._readyCapability=(0,_util.createPromiseCapability)();this._port=null;this._webWorker=null;this._messageHandler=null;if(e){_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(e,this);this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t;this._messageHandler=new _message_handler.MessageHandler("main","worker",t);this._messageHandler.on("ready",function(){});this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:t}=PDFWorker;try{if(!PDFWorkerUtil.isSameOrigin(window.location.href,t)){t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href)}const e=new Worker(t);const r=new _message_handler.MessageHandler("main","worker",e);const n=()=>{e.removeEventListener("error",s);r.destroy();e.terminate();if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"))}else{this._setupFakeWorker()}};const s=()=>{if(!this._webWorker){n()}};e.addEventListener("error",s);r.on("test",t=>{e.removeEventListener("error",s);if(this.destroyed){n();return}if(t){this._messageHandler=r;this._port=e;this._webWorker=e;this._readyCapability.resolve();r.send("configure",{verbosity:this.verbosity})}else{this._setupFakeWorker();r.destroy();e.terminate()}});r.on("ready",t=>{e.removeEventListener("error",s);if(this.destroyed){n();return}try{i()}catch(t){this._setupFakeWorker()}});const i=()=>{const t=new Uint8Array;r.send("test",t,[t.buffer])};i();return}catch(t){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){if(!PDFWorkerUtil.isWorkerDisabled){(0,_util.warn)("Setting up fake worker.");PDFWorkerUtil.isWorkerDisabled=true}PDFWorker._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const r=`fake${PDFWorkerUtil.fakeWorkerId++}`;const n=new _message_handler.MessageHandler(r+"_worker",r,e);t.setup(n,e);const s=new _message_handler.MessageHandler(r,r+"_worker",e);this._messageHandler=s;this._readyCapability.resolve();s.send("configure",{verbosity:this.verbosity})}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=true;if(this._webWorker){this._webWorker.terminate();this._webWorker=null}_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port);this._port=null;if(this._messageHandler){this._messageHandler.destroy();this._messageHandler=null}}static fromPort(t){if(!(t!==null&&t!==void 0&&t.port)){throw new Error("PDFWorker.fromPort - invalid method signature.")}if(_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(t.port)){return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(t.port)}return new PDFWorker(t)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc){return _worker_options.GlobalWorkerOptions.workerSrc}if(PDFWorkerUtil.fallbackWorkerSrc!==null){if(!_is_node.isNodeJS){(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.')}return PDFWorkerUtil.fallbackWorkerSrc}throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var t;return((t=globalThis.pdfjsWorker)===null||t===void 0?void 0:t.WorkerMessageHandler)||null}catch(t){return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler){return mainWorkerMessageHandler}if(_is_node.isNodeJS&&typeof require==="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}await(0,_display_utils.loadScript)(this.workerSrc);return window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;var _workerPorts={writable:true,value:new WeakMap};{PDFWorker.getWorkerSrc=function(){(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead.");return this.workerSrc}}var _docStats=new WeakMap;var _pageCache=new WeakMap;var _pagePromises=new WeakMap;var _metadataPromise=new WeakMap;class WorkerTransport{constructor(t,e,r,n){_classPrivateFieldInitSpec(this,_docStats,{writable:true,value:null});_classPrivateFieldInitSpec(this,_pageCache,{writable:true,value:new Map});_classPrivateFieldInitSpec(this,_pagePromises,{writable:true,value:new Map});_classPrivateFieldInitSpec(this,_metadataPromise,{writable:true,value:null});this.messageHandler=t;this.loadingTask=e;this.commonObjs=new PDFObjects;this.fontLoader=new _font_loader.FontLoader({docId:e.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:n.ownerDocument,styleElement:n.styleElement});this._params=n;if(!n.useWorkerFetch){this.CMapReaderFactory=new n.CMapReaderFactory({baseUrl:n.cMapUrl,isCompressed:n.cMapPacked});this.StandardFontDataFactory=new n.StandardFontDataFactory({baseUrl:n.standardFontDataUrl})}this.destroyed=false;this.destroyCapability=null;this._passwordCapability=null;this._networkStream=r;this._fullReader=null;this._lastProgress=null;this.downloadInfoCapability=(0,_util.createPromiseCapability)();this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(this,_docStats)}getRenderingIntent(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_util.AnnotationMode.ENABLE;let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let s=_util.RenderingIntentFlag.DISPLAY;let i=null;switch(t){case"any":s=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":s=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case _util.AnnotationMode.DISABLE:s+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:s+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:s+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE;const a=s&_util.RenderingIntentFlag.PRINT&&r instanceof _annotation_storage.PrintAnnotationStorage?r:this.annotationStorage;i=a.serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${e}`)}if(n){s+=_util.RenderingIntentFlag.OPLIST}return{renderingIntent:s,cacheKey:`${s}_${_annotation_storage.AnnotationStorage.getHash(i)}`,annotationStorageMap:i}}destroy(){if(this.destroyCapability){return this.destroyCapability.promise}this.destroyed=true;this.destroyCapability=(0,_util.createPromiseCapability)();if(this._passwordCapability){this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"))}const t=[];for(const r of _classPrivateFieldGet(this,_pageCache).values()){t.push(r._destroy())}_classPrivateFieldGet(this,_pageCache).clear();_classPrivateFieldGet(this,_pagePromises).clear();if(this.hasOwnProperty("annotationStorage")){this.annotationStorage.resetModified()}const e=this.messageHandler.sendWithPromise("Terminate",null);t.push(e);Promise.all(t).then(()=>{this.commonObjs.clear();this.fontLoader.clear();_classPrivateFieldSet(this,_metadataPromise,null);this._getFieldObjectsPromise=null;this._hasJSActionsPromise=null;if(this._networkStream){this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated."))}if(this.messageHandler){this.messageHandler.destroy();this.messageHandler=null}this.destroyCapability.resolve()},this.destroyCapability.reject);return this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:l,loadingTask:n}=this;l.on("GetReader",(t,n)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available.");this._fullReader=this._networkStream.getFullReader();this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}};n.onPull=()=>{this._fullReader.read().then(function(t){let{value:e,done:r}=t;if(r){n.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(e),"GetReader - expected an ArrayBuffer.");n.enqueue(new Uint8Array(e),1,[e])}).catch(t=>{n.error(t)})};n.onCancel=t=>{this._fullReader.cancel(t);n.ready.catch(t=>{if(this.destroyed){return}throw t})}});l.on("ReaderHeadersReady",t=>{const e=(0,_util.createPromiseCapability)();const r=this._fullReader;r.headersReady.then(()=>{if(!r.isStreamingSupported||!r.isRangeSupported){if(this._lastProgress){var t;(t=n.onProgress)===null||t===void 0?void 0:t.call(n,this._lastProgress)}r.onProgress=t=>{var e;(e=n.onProgress)===null||e===void 0?void 0:e.call(n,{loaded:t.loaded,total:t.total})}}e.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},e.reject);return e.promise});l.on("GetRangeReader",(t,n)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const e=this._networkStream.getRangeReader(t.begin,t.end);if(!e){n.close();return}n.onPull=()=>{e.read().then(function(t){let{value:e,done:r}=t;if(r){n.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(e),"GetRangeReader - expected an ArrayBuffer.");n.enqueue(new Uint8Array(e),1,[e])}).catch(t=>{n.error(t)})};n.onCancel=t=>{e.cancel(t);n.ready.catch(t=>{if(this.destroyed){return}throw t})}});l.on("GetDoc",t=>{let{pdfInfo:e}=t;this._numPages=e.numPages;this._htmlForXfa=e.htmlForXfa;delete e.htmlForXfa;n._capability.resolve(new PDFDocumentProxy(e,this))});l.on("DocException",function(t){let e;switch(t.name){case"PasswordException":e=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":e=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":e=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":e=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":e=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}n._capability.reject(e)});l.on("PasswordRequest",t=>{this._passwordCapability=(0,_util.createPromiseCapability)();if(n.onPassword){const e=t=>{if(t instanceof Error){this._passwordCapability.reject(t)}else{this._passwordCapability.resolve({password:t})}};try{n.onPassword(e,t.code)}catch(t){this._passwordCapability.reject(t)}}else{this._passwordCapability.reject(new _util.PasswordException(t.message,t.code))}return this._passwordCapability.promise});l.on("DataLoaded",t=>{var e;(e=n.onProgress)===null||e===void 0?void 0:e.call(n,{loaded:t.length,total:t.length});this.downloadInfoCapability.resolve(t)});l.on("StartRenderPage",t=>{if(this.destroyed){return}const e=_classPrivateFieldGet(this,_pageCache).get(t.pageIndex);e._startRenderPage(t.transparency,t.cacheKey)});l.on("commonobj",t=>{var e;let[r,n,s]=t;if(this.destroyed){return}if(this.commonObjs.has(r)){return}switch(n){case"Font":const i=this._params;if("error"in s){const o=s.error;(0,_util.warn)(`Error during font loading: ${o}`);this.commonObjs.resolve(r,o);break}let t=null;if(i.pdfBug&&(e=globalThis.FontInspector)!==null&&e!==void 0&&e.enabled){t={registerFont(t,e){globalThis.FontInspector.fontAdded(t,e)}}}const a=new _font_loader.FontFaceObject(s,{isEvalSupported:i.isEvalSupported,disableFontFace:i.disableFontFace,ignoreErrors:i.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:t});this.fontLoader.bind(a).catch(t=>{return l.sendWithPromise("FontFallback",{id:r})}).finally(()=>{if(!i.fontExtraProperties&&a.data){a.data=null}this.commonObjs.resolve(r,a)});break;case"FontPath":case"Image":this.commonObjs.resolve(r,s);break;default:throw new Error(`Got unknown common object type ${n}`)}});l.on("obj",t=>{let[e,r,n,s]=t;if(this.destroyed){return}const i=_classPrivateFieldGet(this,_pageCache).get(r);if(i.objs.has(e)){return}switch(n){case"Image":i.objs.resolve(e,s);const o=8e6;if(s){let t;if(s.bitmap){const{bitmap:l,width:c,height:h}=s;t=c*h*4;i._bitmaps.add(l)}else{var a;t=((a=s.data)===null||a===void 0?void 0:a.length)||0}if(t>o){i.cleanupAfterRender=true}}break;case"Pattern":i.objs.resolve(e,s);break;default:throw new Error(`Got unknown object type ${n}`)}});l.on("DocProgress",t=>{var e;if(this.destroyed){return}(e=n.onProgress)===null||e===void 0?void 0:e.call(n,{loaded:t.loaded,total:t.total})});l.on("DocStats",t=>{if(this.destroyed){return}_classPrivateFieldSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(t.streamTypes),fontTypes:Object.freeze(t.fontTypes)}))});l.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this));l.on("FetchBuiltInCMap",t=>{if(this.destroyed){return Promise.reject(new Error("Worker was destroyed."))}if(!this.CMapReaderFactory){return Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))}return this.CMapReaderFactory.fetch(t)});l.on("FetchStandardFontData",t=>{if(this.destroyed){return Promise.reject(new Error("Worker was destroyed."))}if(!this.StandardFontDataFactory){return Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))}return this.StandardFontDataFactory.fetch(t)})}_onUnsupportedFeature(t){var e,r;let{featureId:n}=t;if(this.destroyed){return}(e=(r=this.loadingTask).onUnsupportedFeature)===null||e===void 0?void 0:e.call(r,n)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages){return Promise.reject(new Error("Invalid page request."))}const r=t-1,e=_classPrivateFieldGet(this,_pagePromises).get(r);if(e){return e}const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(t=>{if(this.destroyed){throw new Error("Transport destroyed")}const e=new PDFPageProxy(r,t,this,this._params.ownerDocument,this._params.pdfBug);_classPrivateFieldGet(this,_pageCache).set(r,e);return e});_classPrivateFieldGet(this,_pagePromises).set(r,n);return n}getPageIndex(t){if(typeof t!=="object"||t===null||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0){return Promise.reject(new Error("Invalid pageIndex request."))}return this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}saveDocument(){var t,e;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(t=(e=this._fullReader)===null||e===void 0?void 0:e.filename)!==null&&t!==void 0?t:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){if(typeof t!=="string"){return Promise.reject(new Error("Invalid destination request."))}return this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(t=>{return new _optional_content_config.OptionalContentConfig(t)})}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(t=>{var e,r,n,s;return{info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:(e=(r=this._fullReader)===null||r===void 0?void 0:r.filename)!==null&&e!==void 0?e:null,contentLength:(n=(s=this._fullReader)===null||s===void 0?void 0:s.contentLength)!==null&&n!==void 0?n:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;await this.messageHandler.sendWithPromise("Cleanup",null);if(this.destroyed){return}for(const e of _classPrivateFieldGet(this,_pageCache).values()){const r=e.cleanup();if(!r){throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`)}}this.commonObjs.clear();if(!t){this.fontLoader.clear()}_classPrivateFieldSet(this,_metadataPromise,null);this._getFieldObjectsPromise=null;this._hasJSActionsPromise=null}get loadingParams(){const t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}var _objs=new WeakMap;var _ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj);_classPrivateFieldInitSpec(this,_objs,{writable:true,value:Object.create(null)})}get(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(e){const r=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,t);r.capability.promise.then(()=>e(r.data));return null}const r=_classPrivateFieldGet(this,_objs)[t];if(!(r!==null&&r!==void 0&&r.capability.settled)){throw new Error(`Requesting object that isn't resolved yet ${t}.`)}return r.data}has(t){const e=_classPrivateFieldGet(this,_objs)[t];return(e===null||e===void 0?void 0:e.capability.settled)||false}resolve(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;const r=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,t);r.data=e;r.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(t){const e=_classPrivateFieldGet(this,_objs)[t];if(e){return e}return _classPrivateFieldGet(this,_objs)[t]={capability:(0,_util.createPromiseCapability)(),data:null}}var _internalRenderTask=new WeakMap;class RenderTask{constructor(t){_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:true,value:null});_classPrivateFieldSet(this,_internalRenderTask,t);this.onContinue=null}get promise(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}cancel(){_classPrivateFieldGet(this,_internalRenderTask).cancel()}get separateAnnots(){const{separateAnnots:t}=_classPrivateFieldGet(this,_internalRenderTask).operatorList;if(!t){return false}const{annotationCanvasMap:e}=_classPrivateFieldGet(this,_internalRenderTask);return t.form||t.canvas&&(e===null||e===void 0?void 0:e.size)>0}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor(t){let{callback:e,params:r,objs:n,commonObjs:s,annotationCanvasMap:i,operatorList:a,pageIndex:o,canvasFactory:l,useRequestAnimationFrame:c=false,pdfBug:h=false,pageColors:u=null}=t;this.callback=e;this.params=r;this.objs=n;this.commonObjs=s;this.annotationCanvasMap=i;this.operatorListIdx=null;this.operatorList=a;this._pageIndex=o;this.canvasFactory=l;this._pdfBug=h;this.pageColors=u;this.running=false;this.graphicsReadyCallback=null;this.graphicsReady=false;this._useRequestAnimationFrame=c===true&&typeof window!=="undefined";this.cancelled=false;this.capability=(0,_util.createPromiseCapability)();this.task=new RenderTask(this);this._cancelBound=this.cancel.bind(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);this._canvas=r.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(t){var e;let{transparency:r=false,optionalContentConfig:n}=t;if(this.cancelled){return}if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas)){throw new Error("Cannot use the same canvas during multiple render() operations. "+"Use different canvas or ensure previous operations were "+"cancelled or completed.")}_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}if(this._pdfBug&&(e=globalThis.StepperManager)!==null&&e!==void 0&&e.enabled){this.stepper=globalThis.StepperManager.create(this._pageIndex);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint()}const{canvasContext:s,viewport:i,transform:a,imageLayer:o,background:l}=this.params;this.gfx=new _canvas.CanvasGraphics(s,this.commonObjs,this.objs,this.canvasFactory,o,n,this.annotationCanvasMap,this.pageColors);this.gfx.beginDrawing({transform:a,viewport:i,transparency:r,background:l});this.operatorListIdx=0;this.graphicsReady=true;if(this.graphicsReadyCallback){this.graphicsReadyCallback()}}cancel(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;this.running=false;this.cancelled=true;if(this.gfx){this.gfx.endDrawing()}if(this._canvas){_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas)}this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){if(!this.graphicsReadyCallback){this.graphicsReadyCallback=this._continueBound}return}if(this.stepper){this.stepper.updateOperatorList(this.operatorList)}if(this.running){return}this._continue()}_continue(){this.running=true;if(this.cancelled){return}if(this.task.onContinue){this.task.onContinue(this._scheduleNextBound)}else{this._scheduleNext()}}_scheduleNext(){if(this._useRequestAnimationFrame){window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)})}else{Promise.resolve().then(this._nextBound).catch(this._cancelBound)}}async _next(){if(this.cancelled){return}this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=false;if(this.operatorList.lastChunk){this.gfx.endDrawing();if(this._canvas){_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas)}this.callback()}}}}var _canvasInUse={writable:true,value:new WeakSet};const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=r(1);var a=r(131);var s=r(135);function i(t,e,r){f(t,e);e.set(t,r)}function o(t,e){var r=h(t,e,"get");return l(t,r)}function l(t,e){if(e.get){return e.get.call(t)}return e.value}function c(t,e,r){var n=h(t,e,"set");u(t,n,r);return r}function h(t,e,r){if(!e.has(t)){throw new TypeError("attempted to "+r+" private field on non-instance")}return e.get(t)}function u(t,e,r){if(e.set){e.set.call(t,r)}else{if(!e.writable){throw new TypeError("attempted to set read only private field")}e.value=r}}function d(t,e){f(t,e);e.add(t)}function f(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function p(t,e,r){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return r}var g=new WeakSet;class v{constructor(){d(this,g);this._storage=new Map;this._modified=false;this.onSetModified=null;this.onResetModified=null;this.onAnnotationEditor=null}getValue(t,e){const r=this._storage.get(t);if(r===undefined){return e}return Object.assign(e,r)}getRawValue(t){return this._storage.get(t)}remove(t){this._storage.delete(t);if(this._storage.size===0){this.resetModified()}if(typeof this.onAnnotationEditor==="function"){for(const e of this._storage.values()){if(e instanceof a.AnnotationEditor){return}}this.onAnnotationEditor(null)}}setValue(t,e){const r=this._storage.get(t);let n=false;if(r!==undefined){for(const[s,i]of Object.entries(e)){if(r[s]!==i){n=true;r[s]=i}}}else{n=true;this._storage.set(t,e)}if(n){p(this,g,m).call(this)}if(e instanceof a.AnnotationEditor&&typeof this.onAnnotationEditor==="function"){this.onAnnotationEditor(e.constructor._type)}}has(t){return this._storage.has(t)}getAll(){return this._storage.size>0?(0,n.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){if(this._modified){this._modified=false;if(typeof this.onResetModified==="function"){this.onResetModified()}}}get print(){return new _(this)}get serializable(){if(this._storage.size===0){return null}const t=new Map;for(const[e,r]of this._storage){const n=r instanceof a.AnnotationEditor?r.serialize():r;if(n){t.set(e,n)}}return t}static getHash(t){if(!t){return""}const e=new s.MurmurHash3_64;for(const[r,n]of t){e.update(`${r}:${JSON.stringify(n)}`)}return e.hexdigest()}}e.AnnotationStorage=v;function m(){if(!this._modified){this._modified=true;if(typeof this.onSetModified==="function"){this.onSetModified()}}}var b=new WeakMap;class _ extends v{constructor(t){super();i(this,b,{writable:true,value:null});c(this,b,structuredClone(t.serializable))}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return o(this,b)}}e.PrintAnnotationStorage=_},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AnnotationEditor=void 0;var n=r(132);var s=r(1);function i(t,e,r){if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function a(t,e,r){o(t,e);e.set(t,r)}function o(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function l(t,e,r){var n=u(t,e,"set");c(t,n,r);return r}function c(t,e,r){if(e.set){e.set.call(t,r)}else{if(!e.writable){throw new TypeError("attempted to set read only private field")}e.value=r}}function h(t,e){var r=u(t,e,"get");return d(t,r)}function u(t,e,r){if(!e.has(t)){throw new TypeError("attempted to "+r+" private field on non-instance")}return e.get(t)}function d(t,e){if(e.get){return e.get.call(t)}return e.value}var f=new WeakMap;var p=new WeakMap;var g=new WeakMap;var v=new WeakMap;var m=new WeakMap;var b=new WeakMap;class _{constructor(t){a(this,f,{writable:true,value:this.focusin.bind(this)});a(this,p,{writable:true,value:this.focusout.bind(this)});a(this,g,{writable:true,value:false});a(this,v,{writable:true,value:false});a(this,m,{writable:true,value:false});a(this,b,{writable:true,value:_._zIndex++});if(this.constructor===_){(0,s.unreachable)("Cannot initialize AnnotationEditor.")}this.parent=t.parent;this.id=t.id;this.width=this.height=null;this.pageIndex=t.parent.pageIndex;this.name=t.name;this.div=null;const[e,r]=this.parent.viewportBaseDimensions;this.x=t.x/e;this.y=t.y/r;this.rotation=this.parent.viewport.rotation;this.isAttachedToDOM=false}static get _defaultLineColor(){return(0,s.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=h(this,b)}focusin(t){if(!h(this,g)){this.parent.setSelected(this)}else{l(this,g,false)}}focusout(t){if(!this.isAttachedToDOM){return}const e=t.relatedTarget;if(e!==null&&e!==void 0&&e.closest(`#${this.id}`)){return}t.preventDefault();if(!this.parent.isMultipleSelection){this.commitOrRemove()}}commitOrRemove(){if(this.isEmpty()){this.remove()}else{this.commit()}}commit(){this.parent.addToAnnotationStorage(this)}dragstart(t){const e=this.parent.div.getBoundingClientRect();this.startX=t.clientX-e.x;this.startY=t.clientY-e.y;t.dataTransfer.setData("text/plain",this.id);t.dataTransfer.effectAllowed="move"}setAt(t,e,r,n){const[s,i]=this.parent.viewportBaseDimensions;[r,n]=this.screenToPageTranslation(r,n);this.x=(t+r)/s;this.y=(e+n)/i;this.div.style.left=`${100*this.x}%`;this.div.style.top=`${100*this.y}%`}translate(t,e){const[r,n]=this.parent.viewportBaseDimensions;[t,e]=this.screenToPageTranslation(t,e);this.x+=t/r;this.y+=e/n;this.div.style.left=`${100*this.x}%`;this.div.style.top=`${100*this.y}%`}screenToPageTranslation(t,e){const{rotation:r}=this.parent.viewport;switch(r){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}setDims(t,e){const[r,n]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*t/r}%`;this.div.style.height=`${100*e/n}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div");this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360);this.div.className=this.name;this.div.setAttribute("id",this.id);this.div.setAttribute("tabIndex",0);this.setInForeground();this.div.addEventListener("focusin",h(this,f));this.div.addEventListener("focusout",h(this,p));const[t,e]=this.getInitialTranslation();this.translate(t,e);(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]);return this.div}pointerdown(t){const e=n.KeyboardManager.platform.isMac;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e){this.parent.toggleSelected(this)}else{this.parent.setSelected(this)}l(this,g,true)}getRect(t,e){const[r,n]=this.parent.viewportBaseDimensions;const[s,i]=this.parent.pageDimensions;const a=s*t/r;const o=i*e/n;const l=this.x*s;const c=this.y*i;const h=this.width*s;const u=this.height*i;switch(this.rotation){case 0:return[l+a,i-c-o-u,l+a+h,i-c-o];case 90:return[l+o,i-c+a,l+o+u,i-c+a+h];case 180:return[l-a-h,i-c+o,l-a,i-c+o+u];case 270:return[l-o-u,i-c-a-h,l-o,i-c-a];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[r,n,s,i]=t;const a=s-r;const o=i-n;switch(this.rotation){case 0:return[r,e-i,a,o];case 90:return[r,e-n,o,a];case 180:return[s,e-n,a,o];case 270:return[s,e-i,o,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return false}enableEditMode(){l(this,m,true)}disableEditMode(){l(this,m,false)}isInEditMode(){return h(this,m)}shouldGetKeyboardEvents(){return false}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t;(t=this.div)===null||t===void 0?void 0:t.addEventListener("focusin",h(this,f))}serialize(){(0,s.unreachable)("An editor must be serializable")}static deserialize(t,e){const r=new this.prototype.constructor({parent:e,id:e.getNextId()});r.rotation=t.rotation;const[n,s]=e.pageDimensions;const[i,a,o,l]=r.getRectInCurrentCoords(t.rect,s);r.x=i/n;r.y=a/s;r.width=o/n;r.height=l/s;return r}remove(){this.div.removeEventListener("focusin",h(this,f));this.div.removeEventListener("focusout",h(this,p));if(!this.isEmpty()){this.commit()}this.parent.remove(this)}select(){var t;(t=this.div)===null||t===void 0?void 0:t.classList.add("selectedEditor")}unselect(){var t;(t=this.div)===null||t===void 0?void 0:t.classList.remove("selectedEditor")}updateParams(t,e){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return h(this,v)}set isEditing(t){l(this,v,t);if(t){this.parent.setSelected(this);this.parent.setActiveEditor(this)}else{this.parent.setActiveEditor(null)}}}e.AnnotationEditor=_;i(_,"_colorManager",new n.ColorManager);i(_,"_zIndex",1)},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0;e.bindEvents=g;e.opacityToHex=v;var n=r(1);var s=r(133);function i(t,e,r){if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function a(t,e){c(t,e);e.add(t)}function o(t,e,r){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return r}function l(t,e,r){c(t,e);e.set(t,r)}function c(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function h(t,e,r){var n=f(t,e,"set");u(t,n,r);return r}function u(t,e,r){if(e.set){e.set.call(t,r)}else{if(!e.writable){throw new TypeError("attempted to set read only private field")}e.value=r}}function d(t,e){var r=f(t,e,"get");return p(t,r)}function f(t,e,r){if(!e.has(t)){throw new TypeError("attempted to "+r+" private field on non-instance")}return e.get(t)}function p(t,e){if(e.get){return e.get.call(t)}return e.value}function g(t,e,r){for(const n of r){e.addEventListener(n,t[n].bind(t))}}function v(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")}var m=new WeakMap;class b{constructor(){l(this,m,{writable:true,value:0})}getId(){var t,e;return`${n.AnnotationEditorPrefix}${h(this,m,(t=d(this,m),e=t++,t)),e}`}}var _=new WeakMap;var y=new WeakMap;var A=new WeakMap;var S=new WeakMap;class x{constructor(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:128;l(this,_,{writable:true,value:[]});l(this,y,{writable:true,value:false});l(this,A,{writable:true,value:void 0});l(this,S,{writable:true,value:-1});h(this,A,t)}add(t){let{cmd:e,undo:r,mustExec:n,type:s=NaN,overwriteIfSameType:i=false,keepUndo:a=false}=t;if(n){e()}if(d(this,y)){return}const o={cmd:e,undo:r,type:s};if(d(this,S)===-1){if(d(this,_).length>0){d(this,_).length=0}h(this,S,0);d(this,_).push(o);return}if(i&&d(this,_)[d(this,S)].type===s){if(a){o.undo=d(this,_)[d(this,S)].undo}d(this,_)[d(this,S)]=o;return}const l=d(this,S)+1;if(l===d(this,A)){d(this,_).splice(0,1)}else{h(this,S,l);if(l<d(this,_).length){d(this,_).splice(l)}}d(this,_).push(o)}undo(){if(d(this,S)===-1){return}h(this,y,true);d(this,_)[d(this,S)].undo();h(this,y,false);h(this,S,d(this,S)-1)}redo(){if(d(this,S)<d(this,_).length-1){h(this,S,d(this,S)+1);h(this,y,true);d(this,_)[d(this,S)].cmd();h(this,y,false)}}hasSomethingToUndo(){return d(this,S)!==-1}hasSomethingToRedo(){return d(this,S)<d(this,_).length-1}destroy(){h(this,_,null)}}e.CommandManager=x;var w=new WeakSet;class E{constructor(t){a(this,w);this.buffer=[];this.callbacks=new Map;this.allKeys=new Set;const e=E.platform.isMac;for(const[r,n]of t){for(const s of r){const i=s.startsWith("mac+");if(e&&i){this.callbacks.set(s.slice(4),n);this.allKeys.add(s.split("+").at(-1))}else if(!e&&!i){this.callbacks.set(s,n);this.allKeys.add(s.split("+").at(-1))}}}}static get platform(){const t=typeof navigator!=="undefined"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}exec(t,e){if(!this.allKeys.has(e.key)){return}const r=this.callbacks.get(o(this,w,C).call(this,e));if(!r){return}r.bind(t)();e.stopPropagation();e.preventDefault()}}e.KeyboardManager=E;function C(t){if(t.altKey){this.buffer.push("alt")}if(t.ctrlKey){this.buffer.push("ctrl")}if(t.metaKey){this.buffer.push("meta")}if(t.shiftKey){this.buffer.push("shift")}this.buffer.push(t.key);const e=this.buffer.join("+");this.buffer.length=0;return e}var k=new WeakMap;class T{constructor(){l(this,k,{writable:true,value:null})}copy(t){if(!t){return}if(Array.isArray(t)){h(this,k,t.map(t=>t.serialize()))}else{h(this,k,[t.serialize()])}h(this,k,d(this,k).filter(t=>!!t));if(d(this,k).length===0){h(this,k,null)}}paste(){return d(this,k)}isEmpty(){return d(this,k)===null}destroy(){h(this,k,null)}}class P{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);(0,s.getColorValues)(t);return(0,n.shadow)(this,"_colors",t)}convert(t){const r=(0,s.getRGB)(t);if(!window.matchMedia("(forced-colors: active)").matches){return r}for(const[e,n]of this._colors){if(n.every((t,e)=>t===r[e])){return P._colorsMapping.get(e)}}return r}getHexCode(t){const e=this._colors.get(t);if(!e){return t}return n.Util.makeHexColor(...e)}}e.ColorManager=P;i(P,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var M=new WeakMap;var F=new WeakMap;var R=new WeakMap;var O=new WeakMap;var D=new WeakMap;var I=new WeakMap;var L=new WeakMap;var N=new WeakMap;var j=new WeakMap;var U=new WeakMap;var W=new WeakMap;var B=new WeakMap;var q=new WeakMap;var G=new WeakMap;var z=new WeakMap;var H=new WeakMap;var V=new WeakMap;var X=new WeakSet;var $=new WeakSet;var Y=new WeakSet;var K=new WeakSet;var J=new WeakSet;var Q=new WeakSet;var Z=new WeakSet;var tt=new WeakSet;var et=new WeakSet;class rt{constructor(t,e){a(this,et);a(this,tt);a(this,Z);a(this,Q);a(this,J);a(this,K);a(this,Y);a(this,$);a(this,X);l(this,M,{writable:true,value:null});l(this,F,{writable:true,value:new Map});l(this,R,{writable:true,value:new Map});l(this,O,{writable:true,value:new T});l(this,D,{writable:true,value:new x});l(this,I,{writable:true,value:0});l(this,L,{writable:true,value:null});l(this,N,{writable:true,value:null});l(this,j,{writable:true,value:new b});l(this,U,{writable:true,value:false});l(this,W,{writable:true,value:n.AnnotationEditorType.NONE});l(this,B,{writable:true,value:new Set});l(this,q,{writable:true,value:this.keydown.bind(this)});l(this,G,{writable:true,value:this.onEditingAction.bind(this)});l(this,z,{writable:true,value:this.onPageChanging.bind(this)});l(this,H,{writable:true,value:{isEditing:false,isEmpty:true,hasEmptyClipboard:true,hasSomethingToUndo:false,hasSomethingToRedo:false,hasSelectedEditor:false}});l(this,V,{writable:true,value:null});h(this,V,t);h(this,N,e);d(this,N)._on("editingaction",d(this,G));d(this,N)._on("pagechanging",d(this,z))}destroy(){o(this,$,st).call(this);d(this,N)._off("editingaction",d(this,G));d(this,N)._off("pagechanging",d(this,z));for(const t of d(this,R).values()){t.destroy()}d(this,R).clear();d(this,F).clear();h(this,M,null);d(this,B).clear();d(this,O).destroy();d(this,D).destroy()}onPageChanging(t){let{pageNumber:e}=t;h(this,I,e-1)}focusMainContainer(){d(this,V).focus()}keydown(t){var e;if(!((e=this.getActive())!==null&&e!==void 0&&e.shouldGetKeyboardEvents())){rt._keyboardManager.exec(this,t)}}onEditingAction(t){if(["undo","redo","cut","copy","paste","delete","selectAll"].includes(t.name)){this[t.name]()}}setEditingState(t){if(t){o(this,X,nt).call(this);o(this,Y,it).call(this,{isEditing:d(this,W)!==n.AnnotationEditorType.NONE,isEmpty:o(this,tt,ht).call(this),hasSomethingToUndo:d(this,D).hasSomethingToUndo(),hasSomethingToRedo:d(this,D).hasSomethingToRedo(),hasSelectedEditor:false,hasEmptyClipboard:d(this,O).isEmpty()})}else{o(this,$,st).call(this);o(this,Y,it).call(this,{isEditing:false})}}registerEditorTypes(t){h(this,L,t);for(const e of d(this,L)){o(this,K,at).call(this,e.defaultPropertiesToUpdate)}}getId(){return d(this,j).getId()}addLayer(t){d(this,R).set(t.pageIndex,t);if(d(this,U)){t.enable()}else{t.disable()}}removeLayer(t){d(this,R).delete(t.pageIndex)}updateMode(t){h(this,W,t);if(t===n.AnnotationEditorType.NONE){this.setEditingState(false);o(this,Q,lt).call(this)}else{this.setEditingState(true);o(this,J,ot).call(this);for(const e of d(this,R).values()){e.updateMode(t)}}}updateToolbar(t){if(t===d(this,W)){return}d(this,N).dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){for(const r of d(this,B)){r.updateParams(t,e)}for(const n of d(this,L)){n.updateDefaultParams(t,e)}}getEditors(t){const e=[];for(const r of d(this,F).values()){if(r.pageIndex===t){e.push(r)}}return e}getEditor(t){return d(this,F).get(t)}addEditor(t){d(this,F).set(t.id,t)}removeEditor(t){d(this,F).delete(t.id);this.unselect(t)}setActiveEditor(t){if(d(this,M)===t){return}h(this,M,t);if(t){o(this,K,at).call(this,t.propertiesToUpdate)}}toggleSelected(t){if(d(this,B).has(t)){d(this,B).delete(t);t.unselect();o(this,Y,it).call(this,{hasSelectedEditor:this.hasSelection});return}d(this,B).add(t);t.select();o(this,K,at).call(this,t.propertiesToUpdate);o(this,Y,it).call(this,{hasSelectedEditor:true})}setSelected(t){for(const e of d(this,B)){if(e!==t){e.unselect()}}d(this,B).clear();d(this,B).add(t);t.select();o(this,K,at).call(this,t.propertiesToUpdate);o(this,Y,it).call(this,{hasSelectedEditor:true})}isSelected(t){return d(this,B).has(t)}unselect(t){t.unselect();d(this,B).delete(t);o(this,Y,it).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return d(this,B).size!==0}undo(){d(this,D).undo();o(this,Y,it).call(this,{hasSomethingToUndo:d(this,D).hasSomethingToUndo(),hasSomethingToRedo:true,isEmpty:o(this,tt,ht).call(this)})}redo(){d(this,D).redo();o(this,Y,it).call(this,{hasSomethingToUndo:true,hasSomethingToRedo:d(this,D).hasSomethingToRedo(),isEmpty:o(this,tt,ht).call(this)})}addCommands(t){d(this,D).add(t);o(this,Y,it).call(this,{hasSomethingToUndo:true,hasSomethingToRedo:false,isEmpty:o(this,tt,ht).call(this)})}delete(){if(d(this,M)){d(this,M).commitOrRemove()}if(!this.hasSelection){return}const e=[...d(this,B)];const t=()=>{for(const t of e){t.remove()}};const r=()=>{for(const t of e){o(this,Z,ct).call(this,t)}};this.addCommands({cmd:t,undo:r,mustExec:true})}copy(){if(d(this,M)){d(this,M).commitOrRemove()}if(this.hasSelection){const t=[];for(const e of d(this,B)){if(!e.isEmpty()){t.push(e)}}if(t.length===0){return}d(this,O).copy(t);o(this,Y,it).call(this,{hasEmptyClipboard:false})}}cut(){this.copy();this.delete()}paste(){if(d(this,O).isEmpty()){return}this.unselectAll();const e=d(this,R).get(d(this,I));const r=d(this,O).paste().map(t=>e.deserialize(t));const t=()=>{for(const t of r){o(this,Z,ct).call(this,t)}o(this,et,ut).call(this,r)};const n=()=>{for(const t of r){t.remove()}};this.addCommands({cmd:t,undo:n,mustExec:true})}selectAll(){for(const t of d(this,B)){t.commit()}o(this,et,ut).call(this,d(this,F).values())}unselectAll(){if(d(this,M)){d(this,M).commitOrRemove();return}if(o(this,et,ut).size===0){return}for(const t of d(this,B)){t.unselect()}d(this,B).clear();o(this,Y,it).call(this,{hasSelectedEditor:false})}isActive(t){return d(this,M)===t}getActive(){return d(this,M)}getMode(){return d(this,W)}}e.AnnotationEditorUIManager=rt;function nt(){d(this,V).addEventListener("keydown",d(this,q))}function st(){d(this,V).removeEventListener("keydown",d(this,q))}function it(t){const e=Object.entries(t).some(t=>{let[e,r]=t;return d(this,H)[e]!==r});if(e){d(this,N).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,H),t)})}}function at(t){d(this,N).dispatch("annotationeditorparamschanged",{source:this,details:t})}function ot(){if(!d(this,U)){h(this,U,true);for(const t of d(this,R).values()){t.enable()}}}function lt(){this.unselectAll();if(d(this,U)){h(this,U,false);for(const t of d(this,R).values()){t.disable()}}}function ct(t){const e=d(this,R).get(t.pageIndex);if(e){e.addOrRebuild(t)}else{this.addEditor(t)}}function ht(){if(d(this,F).size===0){return true}if(d(this,F).size===1){for(const t of d(this,F).values()){return t.isEmpty()}}return false}function ut(t){d(this,B).clear();for(const e of t){if(e.isEmpty()){continue}d(this,B).add(e);e.select()}o(this,Y,it).call(this,{hasSelectedEditor:true})}i(rt,"_keyboardManager",new E([[["ctrl+a","mac+meta+a"],rt.prototype.selectAll],[["ctrl+c","mac+meta+c"],rt.prototype.copy],[["ctrl+v","mac+meta+v"],rt.prototype.paste],[["ctrl+x","mac+meta+x"],rt.prototype.cut],[["ctrl+z","mac+meta+z"],rt.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],rt.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],rt.prototype.delete],[["Escape","mac+Escape"],rt.prototype.unselectAll]]))},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0;e.deprecated=x;e.getColorValues=T;e.getCurrentTransform=P;e.getCurrentTransformInverse=M;e.getFilenameFromUrl=b;e.getPdfFilenameFromUrl=_;e.getRGB=k;e.getXfaPageViewport=C;e.isDataScheme=v;e.isPdfFile=m;e.isValidFetchUrl=A;e.loadScript=S;var n=r(134);var a=r(1);function s(t,e,r){if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}const i="http://www.w3.org/2000/svg";const o="pdfjs_internal_id_";e.AnnotationPrefix=o;class l{}e.PixelsPerInch=l;s(l,"CSS",96);s(l,"PDF",72);s(l,"PDF_TO_CSS_UNITS",l.CSS/l.PDF);class c extends n.BaseCanvasFactory{constructor(){let{ownerDocument:t=globalThis.document}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};super();this._document=t}_createCanvas(t,e){const r=this._document.createElement("canvas");r.width=t;r.height=e;return r}}e.DOMCanvasFactory=c;async function h(n){let s=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(A(n,document.baseURI)){const t=await fetch(n);if(!t.ok){throw new Error(t.statusText)}return s?new Uint8Array(await t.arrayBuffer()):(0,a.stringToBytes)(await t.text())}return new Promise((e,t)=>{const r=new XMLHttpRequest;r.open("GET",n,true);if(s){r.responseType="arraybuffer"}r.onreadystatechange=()=>{if(r.readyState!==XMLHttpRequest.DONE){return}if(r.status===200||r.status===0){let t;if(s&&r.response){t=new Uint8Array(r.response)}else if(!s&&r.responseText){t=(0,a.stringToBytes)(r.responseText)}if(t){e(t);return}}t(new Error(r.statusText))};r.send(null)})}class u extends n.BaseCMapReaderFactory{_fetchData(t,e){return h(t,this.isCompressed).then(t=>{return{cMapData:t,compressionType:e}})}}e.DOMCMapReaderFactory=u;class d extends n.BaseStandardFontDataFactory{_fetchData(t){return h(t,true)}}e.DOMStandardFontDataFactory=d;class f extends n.BaseSVGFactory{_createSVG(t){return document.createElementNS(i,t)}}e.DOMSVGFactory=f;class p{constructor(t){let{viewBox:e,scale:r,rotation:n,offsetX:s=0,offsetY:i=0,dontFlip:a=false}=t;this.viewBox=e;this.scale=r;this.rotation=n;this.offsetX=s;this.offsetY=i;const o=(e[2]+e[0])/2;const l=(e[3]+e[1])/2;let c,h,u,d;n%=360;if(n<0){n+=360}switch(n){case 180:c=-1;h=0;u=0;d=1;break;case 90:c=0;h=1;u=1;d=0;break;case 270:c=0;h=-1;u=-1;d=0;break;case 0:c=1;h=0;u=0;d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}if(a){u=-u;d=-d}let f,p;let g,v;if(c===0){f=Math.abs(l-e[1])*r+s;p=Math.abs(o-e[0])*r+i;g=Math.abs(e[3]-e[1])*r;v=Math.abs(e[2]-e[0])*r}else{f=Math.abs(o-e[0])*r+s;p=Math.abs(l-e[1])*r+i;g=Math.abs(e[2]-e[0])*r;v=Math.abs(e[3]-e[1])*r}this.transform=[c*r,h*r,u*r,d*r,f-c*r*o-u*r*l,p-h*r*o-d*r*l];this.width=g;this.height=v}clone(){let{scale:t=this.scale,rotation:e=this.rotation,offsetX:r=this.offsetX,offsetY:n=this.offsetY,dontFlip:s=false}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return new p({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:r,offsetY:n,dontFlip:s})}convertToViewportPoint(t,e){return a.Util.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=a.Util.applyTransform([t[0],t[1]],this.transform);const r=a.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],r[0],r[1]]}convertToPdfPoint(t,e){return a.Util.applyInverseTransform([t,e],this.transform)}}e.PageViewport=p;class g extends a.BaseException{constructor(t,e){super(t,"RenderingCancelledException");this.type=e}}e.RenderingCancelledException=g;function v(t){const e=t.length;let r=0;while(r<e&&t[r].trim()===""){r++}return t.substring(r,r+5).toLowerCase()==="data:"}function m(t){return typeof t==="string"&&/\.pdf$/i.test(t)}function b(t){const e=t.indexOf("#");const r=t.indexOf("?");const n=Math.min(e>0?e:t.length,r>0?r:t.length);return t.substring(t.lastIndexOf("/",n)+1,n)}function _(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"document.pdf";if(typeof t!=="string"){return e}if(v(t)){(0,a.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.');return e}const r=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i;const s=r.exec(t);let i=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(i){i=i[0];if(i.includes("%")){try{i=n.exec(decodeURIComponent(i))[0]}catch(t){}}}return i||e}class y{constructor(){this.started=Object.create(null);this.times=[]}time(t){if(t in this.started){(0,a.warn)(`Timer is already running for ${t}`)}this.started[t]=Date.now()}timeEnd(t){if(!(t in this.started)){(0,a.warn)(`Timer has not been started for ${t}`)}this.times.push({name:t,start:this.started[t],end:Date.now()});delete this.started[t]}toString(){const t=[];let e=0;for(const r of this.times){const n=r.name;if(n.length>e){e=n.length}}for(const r of this.times){const s=r.end-r.start;t.push(`${r.name.padEnd(e)} ${s}ms\n`)}return t.join("")}}e.StatTimer=y;function A(t,e){try{const{protocol:r}=e?new URL(t,e):new URL(t);return r==="http:"||r==="https:"}catch(t){return false}}function S(n){let s=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return new Promise((e,t)=>{const r=document.createElement("script");r.src=n;r.onload=function(t){if(s){r.remove()}e(t)};r.onerror=function(){t(new Error(`Cannot load script at: ${r.src}`))};(document.head||document.documentElement).append(r)})}function x(t){console.log("Deprecated API usage: "+t)}let w;class E{static toDateObject(t){if(!t||typeof t!=="string"){return null}if(!w){w=new RegExp("^D:"+"(\\d{4})"+"(\\d{2})?"+"(\\d{2})?"+"(\\d{2})?"+"(\\d{2})?"+"(\\d{2})?"+"([Z|+|-])?"+"(\\d{2})?"+"'?"+"(\\d{2})?"+"'?")}const e=w.exec(t);if(!e){return null}const r=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let i=parseInt(e[4],10);i=i>=0&&i<=23?i:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(e[6],10);o=o>=0&&o<=59?o:0;const l=e[7]||"Z";let c=parseInt(e[8],10);c=c>=0&&c<=23?c:0;let h=parseInt(e[9],10)||0;h=h>=0&&h<=59?h:0;if(l==="-"){i+=c;a+=h}else if(l==="+"){i-=c;a-=h}return new Date(Date.UTC(r,n,s,i,a,o))}}e.PDFDateString=E;function C(t,e){let{scale:r=1,rotation:n=0}=e;const{width:s,height:i}=t.attributes.style;const a=[0,0,parseInt(s),parseInt(i)];return new p({viewBox:a,scale:r,rotation:n})}function k(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}if(t.startsWith("rgb(")){return t.slice(4,-1).split(",").map(t=>parseInt(t))}if(t.startsWith("rgba(")){return t.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3)}(0,a.warn)(`Not a valid color format: "${t}"`);return[0,0,0]}function T(t){const e=document.createElement("span");e.style.visibility="hidden";document.body.append(e);for(const r of t.keys()){e.style.color=r;const n=window.getComputedStyle(e).color;t.set(r,k(n))}e.remove()}function P(t){const{a:e,b:r,c:n,d:s,e:i,f:a}=t.getTransform();return[e,r,n,s,i,a]}function M(t){const{a:e,b:r,c:n,d:s,e:i,f:a}=t.getTransform().invertSelf();return[e,r,n,s,i,a]}},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var s=r(1);class n{constructor(){if(this.constructor===n){(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}}create(t,e){if(t<=0||e<=0){throw new Error("Invalid canvas size")}const r=this._createCanvas(t,e);return{canvas:r,context:r.getContext("2d")}}reset(t,e,r){if(!t.canvas){throw new Error("Canvas is not specified")}if(e<=0||r<=0){throw new Error("Invalid canvas size")}t.canvas.width=e;t.canvas.height=r}destroy(t){if(!t.canvas){throw new Error("Canvas is not specified")}t.canvas.width=0;t.canvas.height=0;t.canvas=null;t.context=null}_createCanvas(t,e){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=n;class i{constructor(t){let{baseUrl:e=null,isCompressed:r=false}=t;if(this.constructor===i){(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory.")}this.baseUrl=e;this.isCompressed=r}async fetch(t){let{name:e}=t;if(!this.baseUrl){throw new Error('The CMap "baseUrl" parameter must be specified, ensure that '+'the "cMapUrl" and "cMapPacked" API parameters are provided.')}if(!e){throw new Error("CMap name must be specified.")}const r=this.baseUrl+e+(this.isCompressed?".bcmap":"");const n=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE;return this._fetchData(r,n).catch(t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${r}`)})}_fetchData(t,e){(0,s.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=i;class a{constructor(t){let{baseUrl:e=null}=t;if(this.constructor===a){(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory.")}this.baseUrl=e}async fetch(t){let{filename:e}=t;if(!this.baseUrl){throw new Error('The standard font "baseUrl" parameter must be specified, ensure that '+'the "standardFontDataUrl" API parameter is provided.')}if(!e){throw new Error("Font filename must be specified.")}const r=`${this.baseUrl}${e}`;return this._fetchData(r).catch(t=>{throw new Error(`Unable to load font data at: ${r}`)})}_fetchData(t){(0,s.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=a;class o{constructor(){if(this.constructor===o){(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}}create(t,e){let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(t<=0||e<=0){throw new Error("Invalid SVG dimensions")}const n=this._createSVG("svg:svg");n.setAttribute("version","1.1");if(!r){n.setAttribute("width",`${t}px`);n.setAttribute("height",`${e}px`)}n.setAttribute("preserveAspectRatio","none");n.setAttribute("viewBox",`0 0 ${t} ${e}`);return n}createElement(t){if(typeof t!=="string"){throw new Error("Invalid SVG element type")}return this._createSVG(t)}_createSVG(t){(0,s.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=o},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MurmurHash3_64=void 0;var g=r(1);const n=3285377520;const v=4294901760;const m=65535;class s{constructor(t){this.h1=t?t&4294967295:n;this.h2=t?t&4294967295:n}update(r){let n,s;if(typeof r==="string"){n=new Uint8Array(r.length*2);s=0;for(let t=0,e=r.length;t<e;t++){const p=r.charCodeAt(t);if(p<=255){n[s++]=p}else{n[s++]=p>>>8;n[s++]=p&255}}}else if((0,g.isArrayBuffer)(r)){n=r.slice();s=n.byteLength}else{throw new Error("Wrong data format in MurmurHash3_64_update. "+"Input must be a string or array.")}const e=s>>2;const t=s-e*4;const i=new Uint32Array(n.buffer,0,e);let a=0,o=0;let l=this.h1,c=this.h2;const h=3432918353,u=461845907;const d=h&m,f=u&m;for(let t=0;t<e;t++){if(t&1){a=i[t];a=a*h&v|a*d&m;a=a<<15|a>>>17;a=a*u&v|a*f&m;l^=a;l=l<<13|l>>>19;l=l*5+3864292196}else{o=i[t];o=o*h&v|o*d&m;o=o<<15|o>>>17;o=o*u&v|o*f&m;c^=o;c=c<<13|c>>>19;c=c*5+3864292196}}a=0;switch(t){case 3:a^=n[e*4+2]<<16;case 2:a^=n[e*4+1]<<8;case 1:a^=n[e*4];a=a*h&v|a*d&m;a=a<<15|a>>>17;a=a*u&v|a*f&m;if(e&1){l^=a}else{c^=a}}this.h1=l;this.h2=c}hexdigest(){let t=this.h1,e=this.h2;t^=e>>>1;t=t*3981806797&v|t*36045&m;e=e*4283543511&v|((e<<16|t>>>16)*2950163797&v)>>>16;t^=e>>>1;t=t*444984403&v|t*60499&m;e=e*3301882366&v|((e<<16|t>>>16)*3120437893&v)>>>16;t^=e>>>1;const r=(t>>>0).toString(16),n=(e>>>0).toString(16);return r.padStart(8,"0")+n.padStart(8,"0")}}e.MurmurHash3_64=s},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FontLoader=e.FontFaceObject=void 0;var w=r(1);class i{constructor(t){let{docId:e,onUnsupportedFeature:r,ownerDocument:n=globalThis.document,styleElement:s=null}=t;if(this.constructor===i){(0,w.unreachable)("Cannot initialize BaseFontLoader.")}this.docId=e;this._onUnsupportedFeature=r;this._document=n;this.nativeFontFaces=[];this.styleElement=null}addNativeFontFace(t){this.nativeFontFaces.push(t);this._document.fonts.add(t)}insertRule(t){let e=this.styleElement;if(!e){e=this.styleElement=this._document.createElement("style");e.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`;this._document.documentElement.getElementsByTagName("head")[0].append(e)}const r=e.sheet;r.insertRule(t,r.cssRules.length)}clear(){for(const t of this.nativeFontFaces){this._document.fonts.delete(t)}this.nativeFontFaces.length=0;if(this.styleElement){this.styleElement.remove();this.styleElement=null}}async bind(r){if(r.attached||r.missingFile){return}r.attached=true;if(this.isFontLoadingAPISupported){const e=r.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(t){this._onUnsupportedFeature({featureId:w.UNSUPPORTED_FEATURES.errorFontLoadNative});(0,w.warn)(`Failed to load font '${e.family}': '${t}'.`);r.disableFontFace=true;throw t}}return}const n=r.createFontFaceRule();if(n){this.insertRule(n);if(this.isSyncFontLoadingSupported){return}await new Promise(t=>{const e=this._queueLoadingCallback(t);this._prepareFontLoadEvent([n],[r],e)})}}_queueLoadingCallback(t){(0,w.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!==null&&t!==void 0&&t.fonts);return(0,w.shadow)(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){(0,w.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,w.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(t,e,r){(0,w.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let n;e.FontLoader=n;{e.FontLoader=n=class a extends i{constructor(t){super(t);this.loadingContext={requests:[],nextRequestId:0};this.loadTestFontId=0}get isSyncFontLoadingSupported(){let t=false;if(typeof navigator==="undefined"){t=true}else{const e=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);if((e===null||e===void 0?void 0:e[1])>=14){t=true}}return(0,w.shadow)(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){(0,w.assert)(!n.done,"completeRequest() cannot be called twice.");n.done=true;while(r.requests.length>0&&r.requests[0].done){const t=r.requests.shift();setTimeout(t.callback,0)}}const r=this.loadingContext;const n={id:`pdfjs-font-loading-${r.nextRequestId++}`,done:false,complete:e,callback:t};r.requests.push(n);return n}get _loadTestFont(){const t=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA"+"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA"+"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA"+"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1"+"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD"+"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM"+"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D"+"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA"+"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA"+"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB"+"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY"+"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA"+"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA"+"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC"+"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3"+"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj"+"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,w.shadow)(this,"_loadTestFont",t())}_prepareFontLoadEvent(t,e,r){function n(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3)&255}function s(t,e,r,n){const s=t.substring(0,e);const i=t.substring(e+r);return s+n+i}let i,a;const o=this._document.createElement("canvas");o.width=1;o.height=1;const l=o.getContext("2d");let c=0;function h(t,e){c++;if(c>30){(0,w.warn)("Load test font never loaded.");e();return}l.font="30px "+t;l.fillText(".",0,20);const r=l.getImageData(0,0,1,1);if(r.data[3]>0){e();return}setTimeout(h.bind(null,t,e))}const u=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;const f=976;d=s(d,f,u.length,u);const p=16;const g=1482184792;let v=n(d,p);for(i=0,a=u.length-3;i<a;i+=4){v=v-g+n(u,i)|0}if(i<u.length){v=v-g+n(u+"XXX",i)|0}d=s(d,p,4,(0,w.string32)(v));const m=`url(data:font/opentype;base64,${btoa(d)});`;const b=`@font-face {font-family:"${u}";src:${m}}`;this.insertRule(b);const _=[];for(const A of e){_.push(A.loadedName)}_.push(u);const y=this._document.createElement("div");y.style.visibility="hidden";y.style.width=y.style.height="10px";y.style.position="absolute";y.style.top=y.style.left="0px";for(const S of _){const x=this._document.createElement("span");x.textContent="Hi";x.style.fontFamily=S;y.append(x)}this._document.body.append(y);h(u,()=>{y.remove();r.complete()})}}}class s{constructor(t,e){let{isEvalSupported:r=true,disableFontFace:n=false,ignoreErrors:s=false,onUnsupportedFeature:i,fontRegistry:a=null}=e;this.compiledGlyphs=Object.create(null);for(const o in t){this[o]=t[o]}this.isEvalSupported=r!==false;this.disableFontFace=n===true;this.ignoreErrors=s===true;this._onUnsupportedFeature=i;this.fontRegistry=a}createNativeFontFace(){if(!this.data||this.disableFontFace){return null}let t;if(!this.cssFontInfo){t=new FontFace(this.loadedName,this.data,{})}else{const e={weight:this.cssFontInfo.fontWeight};if(this.cssFontInfo.italicAngle){e.style=`oblique ${this.cssFontInfo.italicAngle}deg`}t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}if(this.fontRegistry){this.fontRegistry.registerFont(this)}return t}createFontFaceRule(){if(!this.data||this.disableFontFace){return null}const t=(0,w.bytesToString)(this.data);const e=`url(data:${this.mimetype};base64,${btoa(t)});`;let r;if(!this.cssFontInfo){r=`@font-face {font-family:"${this.loadedName}";src:${e}}`}else{let t=`font-weight: ${this.cssFontInfo.fontWeight};`;if(this.cssFontInfo.italicAngle){t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`}r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${e}}`}if(this.fontRegistry){this.fontRegistry.registerFont(this,e)}return r}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==undefined){return this.compiledGlyphs[e]}let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(t){if(!this.ignoreErrors){throw t}this._onUnsupportedFeature({featureId:w.UNSUPPORTED_FEATURES.errorFontGetPath});(0,w.warn)(`getPathGenerator - ignoring character: "${t}".`);return this.compiledGlyphs[e]=function(t,e){}}if(this.isEvalSupported&&w.FeatureTest.isEvalSupported){const r=[];for(const s of n){const i=s.args!==undefined?s.args.join(","):"";r.push("c.",s.cmd,"(",i,");\n")}return this.compiledGlyphs[e]=new Function("c","size",r.join(""))}return this.compiledGlyphs[e]=function(e,r){for(const t of n){if(t.cmd==="scale"){t.args=[r,-r]}e[t.cmd].apply(e,t.args)}}}}e.FontFaceObject=s},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CanvasGraphics=void 0;var D=r(133);var I=r(1);var L=r(138);var d=r(139);var n=r(3);function l(t,e){s(t,e);e.add(t)}function s(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function p(t,e,r){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return r}const c=16;const h=100;const g=4096;const v=15;const m=10;const S=n.isNodeJS&&typeof Path2D==="undefined"?-1:1e3;const P=16;function i(t,o){if(t._removeMirroring){throw new Error("Context is already forwarding operations.")}t.__originalSave=t.save;t.__originalRestore=t.restore;t.__originalRotate=t.rotate;t.__originalScale=t.scale;t.__originalTranslate=t.translate;t.__originalTransform=t.transform;t.__originalSetTransform=t.setTransform;t.__originalResetTransform=t.resetTransform;t.__originalClip=t.clip;t.__originalMoveTo=t.moveTo;t.__originalLineTo=t.lineTo;t.__originalBezierCurveTo=t.bezierCurveTo;t.__originalRect=t.rect;t.__originalClosePath=t.closePath;t.__originalBeginPath=t.beginPath;t._removeMirroring=()=>{t.save=t.__originalSave;t.restore=t.__originalRestore;t.rotate=t.__originalRotate;t.scale=t.__originalScale;t.translate=t.__originalTranslate;t.transform=t.__originalTransform;t.setTransform=t.__originalSetTransform;t.resetTransform=t.__originalResetTransform;t.clip=t.__originalClip;t.moveTo=t.__originalMoveTo;t.lineTo=t.__originalLineTo;t.bezierCurveTo=t.__originalBezierCurveTo;t.rect=t.__originalRect;t.closePath=t.__originalClosePath;t.beginPath=t.__originalBeginPath;delete t._removeMirroring};t.save=function t(){o.save();this.__originalSave()};t.restore=function t(){o.restore();this.__originalRestore()};t.translate=function t(e,r){o.translate(e,r);this.__originalTranslate(e,r)};t.scale=function t(e,r){o.scale(e,r);this.__originalScale(e,r)};t.transform=function t(e,r,n,s,i,a){o.transform(e,r,n,s,i,a);this.__originalTransform(e,r,n,s,i,a)};t.setTransform=function t(e,r,n,s,i,a){o.setTransform(e,r,n,s,i,a);this.__originalSetTransform(e,r,n,s,i,a)};t.resetTransform=function t(){o.resetTransform();this.__originalResetTransform()};t.rotate=function t(e){o.rotate(e);this.__originalRotate(e)};t.clip=function t(e){o.clip(e);this.__originalClip(e)};t.moveTo=function(t,e){o.moveTo(t,e);this.__originalMoveTo(t,e)};t.lineTo=function(t,e){o.lineTo(t,e);this.__originalLineTo(t,e)};t.bezierCurveTo=function(t,e,r,n,s,i){o.bezierCurveTo(t,e,r,n,s,i);this.__originalBezierCurveTo(t,e,r,n,s,i)};t.rect=function(t,e,r,n){o.rect(t,e,r,n);this.__originalRect(t,e,r,n)};t.closePath=function(){o.closePath();this.__originalClosePath()};t.beginPath=function(){o.beginPath();this.__originalBeginPath()}}class u{constructor(t){this.canvasFactory=t;this.cache=Object.create(null)}getCanvas(t,e,r){let n;if(this.cache[t]!==undefined){n=this.cache[t];this.canvasFactory.reset(n,e,r)}else{n=this.canvasFactory.create(e,r);this.cache[t]=n}return n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e);delete this.cache[t]}}}function E(t,e,r,n,s,i,a,o,l,c){const[h,u,d,f,p,g]=(0,D.getCurrentTransform)(t);if(u===0&&d===0){const b=a*h+p;const _=Math.round(b);const y=o*f+g;const A=Math.round(y);const S=(a+l)*h+p;const x=Math.abs(Math.round(S)-_)||1;const w=(o+c)*f+g;const E=Math.abs(Math.round(w)-A)||1;t.setTransform(Math.sign(h),0,0,Math.sign(f),_,A);t.drawImage(e,r,n,s,i,0,0,x,E);t.setTransform(h,u,d,f,p,g);return[x,E]}if(h===0&&f===0){const b=o*d+p;const _=Math.round(b);const y=a*u+g;const A=Math.round(y);const S=(o+c)*d+p;const x=Math.abs(Math.round(S)-_)||1;const w=(a+l)*u+g;const E=Math.abs(Math.round(w)-A)||1;t.setTransform(0,Math.sign(u),Math.sign(d),0,_,A);t.drawImage(e,r,n,s,i,0,0,E,x);t.setTransform(h,u,d,f,p,g);return[E,x]}t.drawImage(e,r,n,s,i,a,o,l,c);const v=Math.hypot(h,u);const m=Math.hypot(d,f);return[v*l,m*c]}function a(t){const{width:r,height:e}=t;if(r>S||e>S){return null}const n=1e3;const s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]);const i=r+1;let a=new Uint8Array(i*(e+1));let o,l,c;const h=r+7&~7;let u=new Uint8Array(h*e),d=0;for(const m of t.data){let t=128;while(t>0){u[d++]=m&t?0:255;t>>=1}}let f=0;d=0;if(u[d]!==0){a[0]=1;++f}for(l=1;l<r;l++){if(u[d]!==u[d+1]){a[l]=u[d]?2:1;++f}d++}if(u[d]!==0){a[l]=2;++f}for(o=1;o<e;o++){d=o*h;c=o*i;if(u[d-h]!==u[d]){a[c]=u[d]?1:8;++f}let t=(u[d]?4:0)+(u[d-h]?8:0);for(l=1;l<r;l++){t=(t>>2)+(u[d+1]?4:0)+(u[d-h+1]?8:0);if(s[t]){a[c+l]=s[t];++f}d++}if(u[d-h]!==u[d]){a[c+l]=u[d]?2:4;++f}if(f>n){return null}}d=h*(e-1);c=o*i;if(u[d]!==0){a[c]=8;++f}for(l=1;l<r;l++){if(u[d]!==u[d+1]){a[c+l]=u[d]?4:8;++f}d++}if(u[d]!==0){a[c+l]=4;++f}if(f>n){return null}const p=new Int32Array([0,i,-1,0,-i,0,0,0,1]);const g=new Path2D;for(o=0;f&&o<=e;o++){let t=o*i;const b=t+r;while(t<b&&!a[t]){t++}if(t===b){continue}g.moveTo(t%i,o);const _=t;let e=a[t];do{const y=p[e];do{t+=y}while(!a[t]);const A=a[t];if(A!==5&&A!==10){e=A;a[t]=0}else{e=A&51*e>>4;a[t]&=e>>2|e<<2}g.lineTo(t%i,t/i|0);if(!a[t]){--f}}while(_!==t);--o}u=null;a=null;const v=function(t){t.save();t.scale(1/r,-1/e);t.translate(0,-e);t.fill(g);t.beginPath();t.restore()};return v}class b{constructor(t,e){this.alphaIsShape=false;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=I.IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=I.FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=I.TextRenderingMode.FILL;this.textRise=0;this.fillColor="#000000";this.strokeColor="#000000";this.patternFill=false;this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.transferMaps=null;this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);t.clipBox=this.clipBox.slice();return t}setCurrentPoint(t,e){this.x=t;this.y=e}updatePathMinMax(t,e,r){[e,r]=I.Util.applyTransform([e,r],t);this.minX=Math.min(this.minX,e);this.minY=Math.min(this.minY,r);this.maxX=Math.max(this.maxX,e);this.maxY=Math.max(this.maxY,r)}updateRectMinMax(t,e){const r=I.Util.applyTransform(e,t);const n=I.Util.applyTransform(e.slice(2),t);this.minX=Math.min(this.minX,r[0],n[0]);this.minY=Math.min(this.minY,r[1],n[1]);this.maxX=Math.max(this.maxX,r[0],n[0]);this.maxY=Math.max(this.maxY,r[1],n[1])}updateScalingPathMinMax(t,e){I.Util.scaleMinMax(t,e);this.minX=Math.min(this.minX,e[0]);this.maxX=Math.max(this.maxX,e[1]);this.minY=Math.min(this.minY,e[2]);this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,r,n,s,i,a,o,l,c){const h=I.Util.bezierBoundingBox(e,r,n,s,i,a,o,l);if(c){c[0]=Math.min(c[0],h[0],h[2]);c[1]=Math.max(c[1],h[0],h[2]);c[2]=Math.min(c[2],h[1],h[3]);c[3]=Math.max(c[3],h[1],h[3]);return}this.updateRectMinMax(t,h)}getPathBoundingBox(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:L.PathType.FILL;let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;const r=[this.minX,this.minY,this.maxX,this.maxY];if(t===L.PathType.STROKE){if(!e){(0,I.unreachable)("Stroke bounding box must include transform.")}const n=I.Util.singularValueDecompose2dScale(e);const s=n[0]*this.lineWidth/2;const i=n[1]*this.lineWidth/2;r[0]-=s;r[1]-=i;r[2]+=s;r[3]+=i}return r}updateClipFromPath(){const t=I.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===Infinity}startNewPathAndClipBox(t){this.clipBox=t;this.minX=Infinity;this.minY=Infinity;this.maxX=0;this.maxY=0}getClippedPathBoundingBox(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:L.PathType.FILL;let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return I.Util.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function f(t,e){let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(typeof ImageData!=="undefined"&&e instanceof ImageData){t.putImageData(e,0,0);return}const n=e.height,i=e.width;const a=n%P;const o=(n-a)/P;const l=a===0?o:o+1;const c=t.createImageData(i,P);let h=0,u;const d=e.data;const f=c.data;let p,g,v,s;let m,b,_,y;if(r){switch(r.length){case 1:m=r[0];b=r[0];_=r[0];y=r[0];break;case 4:m=r[0];b=r[1];_=r[2];y=r[3];break}}if(e.kind===I.ImageKind.GRAYSCALE_1BPP){const A=d.byteLength;const S=new Uint32Array(f.buffer,0,f.byteLength>>2);const x=S.length;const w=i+7>>3;let n=4294967295;let s=I.FeatureTest.isLittleEndian?4278190080:255;if(y){if(y[0]===255&&y[255]===0){[n,s]=[s,n]}}for(p=0;p<l;p++){v=p<o?P:a;u=0;for(g=0;g<v;g++){const E=A-h;let t=0;const C=E>w?i:E*8-7;const k=C&~7;let e=0;let r=0;for(;t<k;t+=8){r=d[h++];S[u++]=r&128?n:s;S[u++]=r&64?n:s;S[u++]=r&32?n:s;S[u++]=r&16?n:s;S[u++]=r&8?n:s;S[u++]=r&4?n:s;S[u++]=r&2?n:s;S[u++]=r&1?n:s}for(;t<C;t++){if(e===0){r=d[h++];e=128}S[u++]=r&e?n:s;e>>=1}}while(u<x){S[u++]=0}t.putImageData(c,0,p*P)}}else if(e.kind===I.ImageKind.RGBA_32BPP){const T=!!(m||b||_);g=0;s=i*P*4;for(p=0;p<o;p++){f.set(d.subarray(h,h+s));h+=s;if(T){for(let t=0;t<s;t+=4){if(m){f[t+0]=m[f[t+0]]}if(b){f[t+1]=b[f[t+1]]}if(_){f[t+2]=_[f[t+2]]}}}t.putImageData(c,0,g);g+=P}if(p<l){s=i*a*4;f.set(d.subarray(h,h+s));if(T){for(let t=0;t<s;t+=4){if(m){f[t+0]=m[f[t+0]]}if(b){f[t+1]=b[f[t+1]]}if(_){f[t+2]=_[f[t+2]]}}}t.putImageData(c,0,g)}}else if(e.kind===I.ImageKind.RGB_24BPP){const T=!!(m||b||_);v=P;s=i*v;for(p=0;p<l;p++){if(p>=o){v=a;s=i*v}u=0;for(g=s;g--;){f[u++]=d[h++];f[u++]=d[h++];f[u++]=d[h++];f[u++]=255}if(T){for(let t=0;t<u;t+=4){if(m){f[t+0]=m[f[t+0]]}if(b){f[t+1]=b[f[t+1]]}if(_){f[t+2]=_[f[t+2]]}}}t.putImageData(c,0,p*P)}}else{throw new Error(`bad image kind: ${e.kind}`)}}function C(e,t){if(t.bitmap){e.drawImage(t.bitmap,0,0);return}const r=t.height,n=t.width;const s=r%P;const i=(r-s)/P;const a=s===0?i:i+1;const o=e.createImageData(n,P);let l=0;const c=t.data;const h=o.data;for(let t=0;t<a;t++){const u=t<i?P:s;({srcPos:l}=(0,d.applyMaskImageData)({src:c,srcPos:l,dest:h,width:n,height:u}));e.putImageData(o,0,t*P)}}function _(r,n){const s=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let t=0,e=s.length;t<e;t++){const i=s[t];if(r[i]!==undefined){n[i]=r[i]}}if(r.setLineDash!==undefined){n.setLineDash(r.getLineDash());n.lineDashOffset=r.lineDashOffset}}function y(t,e){t.strokeStyle=t.fillStyle=e||"#000000";t.fillRule="nonzero";t.globalAlpha=1;t.lineWidth=1;t.lineCap="butt";t.lineJoin="miter";t.miterLimit=10;t.globalCompositeOperation="source-over";t.font="10px sans-serif";if(t.setLineDash!==undefined){t.setLineDash([]);t.lineDashOffset=0}}function A(e,r,n,s){const i=e.length;for(let t=3;t<i;t+=4){const a=e[t];if(a===0){e[t-3]=r;e[t-2]=n;e[t-1]=s}else if(a<255){const o=255-a;e[t-3]=e[t-3]*a+r*o>>8;e[t-2]=e[t-2]*a+n*o>>8;e[t-1]=e[t-1]*a+s*o>>8}}}function x(e,r,n){const s=e.length;const i=1/255;for(let t=3;t<s;t+=4){const a=n?n[e[t]]:e[t];r[t]=r[t]*a*i|0}}function w(e,r,n){const s=e.length;for(let t=3;t<s;t+=4){const i=e[t-3]*77+e[t-2]*152+e[t-1]*28;r[t]=n?r[t]*n[i>>8]>>8:r[t]*i>>16}}function k(e,r,n,s,t,i,a,o,l,c,h){const u=!!i;const d=u?i[0]:0;const f=u?i[1]:0;const p=u?i[2]:0;let g;if(t==="Luminosity"){g=w}else{g=x}const v=1048576;const m=Math.min(s,Math.ceil(v/n));for(let t=0;t<s;t+=m){const b=Math.min(m,s-t);const _=e.getImageData(o-c,t+(l-h),n,b);const y=r.getImageData(o,t+l,n,b);if(u){A(_.data,d,f,p)}g(_.data,y.data,a);r.putImageData(y,o,t+l)}}function o(t,e,r,n){const s=n[0];const i=n[1];const a=n[2]-s;const o=n[3]-i;if(a===0||o===0){return}k(e.context,r,a,o,e.subtype,e.backdrop,e.transferMap,s,i,e.offsetX,e.offsetY);t.save();t.globalAlpha=1;t.globalCompositeOperation="source-over";t.setTransform(1,0,0,1,0,0);t.drawImage(r.canvas,0,0);t.restore()}function T(t,e){const r=I.Util.singularValueDecompose2dScale(t);r[0]=Math.fround(r[0]);r[1]=Math.fround(r[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*D.PixelsPerInch.PDF_TO_CSS_UNITS);if(e!==undefined){return e}else if(r[0]<=n||r[1]<=n){return true}return false}const M=["butt","round","square"];const F=["miter","round","bevel"];const R={};const O={};var N=new WeakSet;class j{constructor(t,e,r,n,s,i,a,o){l(this,N);this.ctx=t;this.current=new b(this.ctx.canvas.width,this.ctx.canvas.height);this.stateStack=[];this.pendingClip=null;this.pendingEOFill=false;this.res=null;this.xobjs=null;this.commonObjs=e;this.objs=r;this.canvasFactory=n;this.imageLayer=s;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.suspendedCtx=null;this.contentVisible=true;this.markedContentStack=[];this.optionalContentConfig=i;this.cachedCanvases=new u(this.canvasFactory);this.cachedPatterns=new Map;this.annotationCanvasMap=a;this.viewportScale=1;this.outputScaleX=1;this.outputScaleY=1;this.backgroundColor=(o===null||o===void 0?void 0:o.background)||null;this.foregroundColor=(o===null||o===void 0?void 0:o.foreground)||null;this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;this._cachedBitmapsMap=new Map}getObject(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(typeof t==="string"){return t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)}return e}beginDrawing(t){let{transform:e,viewport:r,transparency:n=false,background:s=null}=t;const i=this.ctx.canvas.width;const a=this.ctx.canvas.height;const o=s||"#ffffff";this.ctx.save();if(this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const l=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const c=this.backgroundColor=this.ctx.fillStyle;let t=true;let e=o;this.ctx.fillStyle=o;e=this.ctx.fillStyle;t=typeof e==="string"&&/^#[0-9A-Fa-f]{6}$/.test(e);if(l==="#000000"&&c==="#ffffff"||l===c||!t){this.foregroundColor=this.backgroundColor=null}else{const[h,u,d]=(0,D.getRGB)(e);const f=t=>{t/=255;return t<=.03928?t/12.92:((t+.055)/1.055)**2.4};const p=Math.round(.2126*f(h)+.7152*f(u)+.0722*f(d));this.selectColor=(t,e,r)=>{const n=.2126*f(t)+.7152*f(e)+.0722*f(r);return Math.round(n)===p?c:l}}}this.ctx.fillStyle=this.backgroundColor||o;this.ctx.fillRect(0,0,i,a);this.ctx.restore();if(n){const g=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx;this.transparentCanvas=g.canvas;this.ctx=g.context;this.ctx.save();this.ctx.transform(...(0,D.getCurrentTransform)(this.compositeCtx))}this.ctx.save();y(this.ctx,this.foregroundColor);if(e){this.ctx.transform(...e);this.outputScaleX=e[0];this.outputScaleY=e[0]}this.ctx.transform(...r.transform);this.viewportScale=r.scale;this.baseTransform=(0,D.getCurrentTransform)(this.ctx);if(this.imageLayer){(0,D.deprecated)("The `imageLayer` functionality will be removed in the future.");this.imageLayer.beginLayout()}}executeOperatorList(t,e,r,n){const s=t.argsArray;const i=t.fnArray;let a=e||0;const o=s.length;if(o===a){return a}const l=o-a>m&&typeof r==="function";const c=l?Date.now()+v:0;let h=0;const u=this.commonObjs;const d=this.objs;let f;while(true){if(n!==undefined&&a===n.nextBreakPoint){n.breakIt(a,r);return a}f=i[a];if(f!==I.OPS.dependency){this[f].apply(this,s[a])}else{for(const p of s[a]){const g=p.startsWith("g_")?u:d;if(!g.has(p)){g.get(p,r);return a}}}a++;if(a===o){return a}if(l&&++h>m){if(Date.now()>c){r();return a}h=0}}}endDrawing(){p(this,N,U).call(this);this.cachedCanvases.clear();this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values()){if(typeof HTMLCanvasElement!=="undefined"&&e instanceof HTMLCanvasElement){e.width=e.height=0}}t.clear()}this._cachedBitmapsMap.clear();if(this.imageLayer){this.imageLayer.endLayout()}}_scaleImage(r,t){const e=r.width;const n=r.height;let s=Math.max(Math.hypot(t[0],t[1]),1);let i=Math.max(Math.hypot(t[2],t[3]),1);let a=e,o=n;let l="prescale1";let c,h;while(s>2&&a>1||i>2&&o>1){let t=a,e=o;if(s>2&&a>1){t=Math.ceil(a/2);s/=a/t}if(i>2&&o>1){e=Math.ceil(o/2);i/=o/e}c=this.cachedCanvases.getCanvas(l,t,e);h=c.context;h.clearRect(0,0,t,e);h.drawImage(r,0,0,a,o,0,0,t,e);r=c.canvas;a=t;o=e;l=l==="prescale1"?"prescale2":"prescale1"}return{img:r,paintWidth:a,paintHeight:o}}_createMaskCanvas(t){const e=this.ctx;const{width:r,height:n}=t;const s=this.current.fillColor;const i=this.current.patternFill;const a=(0,D.getCurrentTransform)(e);let o,l,c,h;if((t.bitmap||t.data)&&t.count>1){const S=t.bitmap||t.data.buffer;const x=a.slice(0,4);l=JSON.stringify(i?x:[x,s]);o=this._cachedBitmapsMap.get(S);if(!o){o=new Map;this._cachedBitmapsMap.set(S,o)}const w=o.get(l);if(w&&!i){const _=Math.round(Math.min(a[0],a[2])+a[4]);const y=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:w,offsetX:_,offsetY:y}}c=w}if(!c){h=this.cachedCanvases.getCanvas("maskCanvas",r,n);C(h.context,t)}let u=I.Util.transform(a,[1/r,0,0,-1/n,0,0]);u=I.Util.transform(u,[1,0,0,1,0,-n]);const d=I.Util.applyTransform([0,0],u);const f=I.Util.applyTransform([r,n],u);const p=I.Util.normalizeRect([d[0],d[1],f[0],f[1]]);const g=Math.round(p[2]-p[0])||1;const v=Math.round(p[3]-p[1])||1;const m=this.cachedCanvases.getCanvas("fillCanvas",g,v);const b=m.context;const _=Math.min(d[0],f[0]);const y=Math.min(d[1],f[1]);b.translate(-_,-y);b.transform(...u);if(!c){c=this._scaleImage(h.canvas,(0,D.getCurrentTransformInverse)(b));c=c.img;if(o&&i){o.set(l,c)}}b.imageSmoothingEnabled=T((0,D.getCurrentTransform)(b),t.interpolate);E(b,c,0,0,c.width,c.height,0,0,r,n);b.globalCompositeOperation="source-in";const A=I.Util.transform((0,D.getCurrentTransformInverse)(b),[1,0,0,1,-_,-y]);b.fillStyle=i?s.getPattern(e,this,A,L.PathType.FILL):s;b.fillRect(0,0,r,n);if(o&&!i){this.cachedCanvases.delete("fillCanvas");o.set(l,m.canvas)}return{canvas:m.canvas,offsetX:Math.round(_),offsetY:Math.round(y)}}setLineWidth(t){if(t!==this.current.lineWidth){this._cachedScaleForStroking=null}this.current.lineWidth=t;this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=M[t]}setLineJoin(t){this.ctx.lineJoin=F[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const r=this.ctx;if(r.setLineDash!==undefined){r.setLineDash(t);r.lineDashOffset=e}}setRenderingIntent(t){}setFlatness(t){}setGState(r){for(let t=0,e=r.length;t<e;t++){const n=r[t];const s=n[0];const i=n[1];switch(s){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=n[1];break;case"ca":this.current.fillAlpha=n[1];this.ctx.globalAlpha=n[1];break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null;this.tempSMask=null;this.checkSMaskState();break;case"TR":this.current.transferMaps=i}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;if(this.current.activeSMask&&!t){this.beginSMaskMode()}else if(!this.current.activeSMask&&t){this.endSMaskMode()}}beginSMaskMode(){if(this.inSMaskMode){throw new Error("beginSMaskMode called while already in smask mode")}const t=this.ctx.canvas.width;const e=this.ctx.canvas.height;const r="smaskGroupAt"+this.groupLevel;const n=this.cachedCanvases.getCanvas(r,t,e);this.suspendedCtx=this.ctx;this.ctx=n.context;const s=this.ctx;s.setTransform(...(0,D.getCurrentTransform)(this.suspendedCtx));_(this.suspendedCtx,s);i(s,this.suspendedCtx);this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode){throw new Error("endSMaskMode called while not in smask mode")}this.ctx._removeMirroring();_(this.ctx,this.suspendedCtx);this.ctx=this.suspendedCtx;this.suspendedCtx=null}compose(t){if(!this.current.activeSMask){return}if(!t){t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height]}else{t[0]=Math.floor(t[0]);t[1]=Math.floor(t[1]);t[2]=Math.ceil(t[2]);t[3]=Math.ceil(t[3])}const e=this.current.activeSMask;const r=this.suspendedCtx;o(r,e,this.ctx,t);this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);this.ctx.restore()}save(){if(this.inSMaskMode){_(this.ctx,this.suspendedCtx);this.suspendedCtx.save()}else{this.ctx.save()}const t=this.current;this.stateStack.push(t);this.current=t.clone()}restore(){if(this.stateStack.length===0&&this.inSMaskMode){this.endSMaskMode()}if(this.stateStack.length!==0){this.current=this.stateStack.pop();if(this.inSMaskMode){this.suspendedCtx.restore();_(this.suspendedCtx,this.ctx)}else{this.ctx.restore()}this.checkSMaskState();this.pendingClip=null;this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null}}transform(t,e,r,n,s,i){this.ctx.transform(t,e,r,n,s,i);this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null}constructPath(n,s,t){const i=this.ctx;const a=this.current;let o=a.x,l=a.y;let c,h;const u=(0,D.getCurrentTransform)(i);const d=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0;const f=d?t.slice(0):null;for(let t=0,e=0,r=n.length;t<r;t++){switch(n[t]|0){case I.OPS.rectangle:o=s[e++];l=s[e++];const p=s[e++];const g=s[e++];const v=o+p;const m=l+g;i.moveTo(o,l);if(p===0||g===0){i.lineTo(v,m)}else{i.lineTo(v,l);i.lineTo(v,m);i.lineTo(o,m)}if(!d){a.updateRectMinMax(u,[o,l,v,m])}i.closePath();break;case I.OPS.moveTo:o=s[e++];l=s[e++];i.moveTo(o,l);if(!d){a.updatePathMinMax(u,o,l)}break;case I.OPS.lineTo:o=s[e++];l=s[e++];i.lineTo(o,l);if(!d){a.updatePathMinMax(u,o,l)}break;case I.OPS.curveTo:c=o;h=l;o=s[e+4];l=s[e+5];i.bezierCurveTo(s[e],s[e+1],s[e+2],s[e+3],o,l);a.updateCurvePathMinMax(u,c,h,s[e],s[e+1],s[e+2],s[e+3],o,l,f);e+=6;break;case I.OPS.curveTo2:c=o;h=l;i.bezierCurveTo(o,l,s[e],s[e+1],s[e+2],s[e+3]);a.updateCurvePathMinMax(u,c,h,o,l,s[e],s[e+1],s[e+2],s[e+3],f);o=s[e+2];l=s[e+3];e+=4;break;case I.OPS.curveTo3:c=o;h=l;o=s[e+2];l=s[e+3];i.bezierCurveTo(s[e],s[e+1],o,l,o,l);a.updateCurvePathMinMax(u,c,h,s[e],s[e+1],o,l,o,l,f);e+=4;break;case I.OPS.closePath:i.closePath();break}}if(d){a.updateScalingPathMinMax(u,f)}a.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(t){t=typeof t!=="undefined"?t:true;const e=this.ctx;const r=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha;if(this.contentVisible){if(typeof r==="object"&&r!==null&&r!==void 0&&r.getPattern){e.save();e.strokeStyle=r.getPattern(e,this,(0,D.getCurrentTransformInverse)(e),L.PathType.STROKE);this.rescaleAndStroke(false);e.restore()}else{this.rescaleAndStroke(true)}}if(t){this.consumePath(this.current.getClippedPathBoundingBox())}e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath();this.stroke()}fill(t){t=typeof t!=="undefined"?t:true;const e=this.ctx;const r=this.current.fillColor;const n=this.current.patternFill;let s=false;if(n){e.save();e.fillStyle=r.getPattern(e,this,(0,D.getCurrentTransformInverse)(e),L.PathType.FILL);s=true}const i=this.current.getClippedPathBoundingBox();if(this.contentVisible&&i!==null){if(this.pendingEOFill){e.fill("evenodd");this.pendingEOFill=false}else{e.fill()}}if(s){e.restore()}if(t){this.consumePath(i)}}eoFill(){this.pendingEOFill=true;this.fill()}fillStroke(){this.fill(false);this.stroke(false);this.consumePath()}eoFillStroke(){this.pendingEOFill=true;this.fillStroke()}closeFillStroke(){this.closePath();this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=true;this.closePath();this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=R}eoClip(){this.pendingClip=O}beginText(){this.current.textMatrix=I.IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths;const e=this.ctx;if(t===undefined){e.beginPath();return}e.save();e.beginPath();for(const r of t){e.setTransform(...r.transform);e.translate(r.x,r.y);r.addToPath(e,r.fontSize)}e.restore();e.clip();e.beginPath();delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const r=this.commonObjs.get(t);const n=this.current;if(!r){throw new Error(`Can't find font for ${t}`)}n.fontMatrix=r.fontMatrix||I.FONT_IDENTITY_MATRIX;if(n.fontMatrix[0]===0||n.fontMatrix[3]===0){(0,I.warn)("Invalid font matrix for font "+t)}if(e<0){e=-e;n.fontDirection=-1}else{n.fontDirection=1}this.current.font=r;this.current.fontSize=e;if(r.isType3Font){return}const s=r.loadedName||"sans-serif";let i="normal";if(r.black){i="900"}else if(r.bold){i="bold"}const a=r.italic?"italic":"normal";const o=`"${s}", ${r.fallbackName}`;let l=e;if(e<c){l=c}else if(e>h){l=h}this.current.fontSizeScale=e/l;this.ctx.font=`${a} ${i} ${l}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t;this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e);this.moveText(t,e)}setTextMatrix(t,e,r,n,s,i){this.current.textMatrix=[t,e,r,n,s,i];this.current.textMatrixScale=Math.hypot(t,e);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,r,n){const s=this.ctx;const i=this.current;const a=i.font;const o=i.textRenderingMode;const l=i.fontSize/i.fontSizeScale;const c=o&I.TextRenderingMode.FILL_STROKE_MASK;const h=!!(o&I.TextRenderingMode.ADD_TO_PATH_FLAG);const u=i.patternFill&&!a.missingFile;let d;if(a.disableFontFace||h||u){d=a.getPathGenerator(this.commonObjs,t)}if(a.disableFontFace||u){s.save();s.translate(e,r);s.beginPath();d(s,l);if(n){s.setTransform(...n)}if(c===I.TextRenderingMode.FILL||c===I.TextRenderingMode.FILL_STROKE){s.fill()}if(c===I.TextRenderingMode.STROKE||c===I.TextRenderingMode.FILL_STROKE){s.stroke()}s.restore()}else{if(c===I.TextRenderingMode.FILL||c===I.TextRenderingMode.FILL_STROKE){s.fillText(t,e,r)}if(c===I.TextRenderingMode.STROKE||c===I.TextRenderingMode.FILL_STROKE){s.strokeText(t,e,r)}}if(h){const f=this.pendingTextPaths||(this.pendingTextPaths=[]);f.push({transform:(0,D.getCurrentTransform)(s),x:e,y:r,fontSize:l,addToPath:d})}}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1);t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let r=false;for(let t=3;t<e.length;t+=4){if(e[t]>0&&e[t]<255){r=true;break}}return(0,I.shadow)(this,"isFontSubpixelAAEnabled",r)}showText(i){const t=this.current;const a=t.font;if(a.isType3Font){return this.showType3Text(i)}const o=t.fontSize;if(o===0){return undefined}const l=this.ctx;const c=t.fontSizeScale;const h=t.charSpacing;const u=t.wordSpacing;const d=t.fontDirection;const e=t.textHScale*d;const r=i.length;const f=a.vertical;const p=f?1:-1;const g=a.defaultVMetrics;const v=o*t.fontMatrix[0];const m=t.textRenderingMode===I.TextRenderingMode.FILL&&!a.disableFontFace&&!t.patternFill;l.save();l.transform(...t.textMatrix);l.translate(t.x,t.y+t.textRise);if(d>0){l.scale(e,-1)}else{l.scale(e,1)}let b;if(t.patternFill){l.save();const A=t.fillColor.getPattern(l,this,(0,D.getCurrentTransformInverse)(l),L.PathType.FILL);b=(0,D.getCurrentTransform)(l);l.restore();l.fillStyle=A}let n=t.lineWidth;const s=t.textMatrixScale;if(s===0||n===0){const S=t.textRenderingMode&I.TextRenderingMode.FILL_STROKE_MASK;if(S===I.TextRenderingMode.STROKE||S===I.TextRenderingMode.FILL_STROKE){n=this.getSinglePixelWidth()}}else{n/=s}if(c!==1){l.scale(c,c);n/=c}l.lineWidth=n;let _=0,y;for(y=0;y<r;++y){const x=i[y];if(typeof x==="number"){_+=p*x*o/1e3;continue}let t=false;const w=(x.isSpace?u:0)+h;const E=x.fontChar;const C=x.accent;let e,r;let n=x.width;if(f){const k=x.vmetric||g;const T=-(x.vmetric?k[1]:n*.5)*v;const P=k[2]*v;n=k?-k[0]:n;e=T/c;r=(_+P)/c}else{e=_/c;r=0}if(a.remeasure&&n>0){const M=l.measureText(E).width*1e3/o*c;if(n<M&&this.isFontSubpixelAAEnabled){const F=n/M;t=true;l.save();l.scale(F,1);e/=F}else if(n!==M){e+=(n-M)/2e3*o/c}}if(this.contentVisible&&(x.isInFont||a.missingFile)){if(m&&!C){l.fillText(E,e,r)}else{this.paintChar(E,e,r,b);if(C){const R=e+o*C.offset.x/c;const O=r-o*C.offset.y/c;this.paintChar(C.fontChar,R,O,b)}}}let s;if(f){s=n*v-w*d}else{s=n*v+w*d}_+=s;if(t){l.restore()}}if(f){t.y-=_}else{t.x+=_*e}l.restore();this.compose();return undefined}showType3Text(t){const e=this.ctx;const r=this.current;const n=r.font;const s=r.fontSize;const i=r.fontDirection;const a=n.vertical?1:-1;const o=r.charSpacing;const l=r.wordSpacing;const c=r.textHScale*i;const h=r.fontMatrix||I.FONT_IDENTITY_MATRIX;const u=t.length;const d=r.textRenderingMode===I.TextRenderingMode.INVISIBLE;let f,p,g,v;if(d||s===0){return}this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;e.save();e.transform(...r.textMatrix);e.translate(r.x,r.y);e.scale(c,i);for(f=0;f<u;++f){p=t[f];if(typeof p==="number"){v=a*p*s/1e3;this.ctx.translate(v,0);r.x+=v*c;continue}const m=(p.isSpace?l:0)+o;const b=n.charProcOperatorList[p.operatorListId];if(!b){(0,I.warn)(`Type3 character "${p.operatorListId}" is not available.`);continue}if(this.contentVisible){this.processingType3=p;this.save();e.scale(s,s);e.transform(...h);this.executeOperatorList(b);this.restore()}const _=I.Util.applyTransform([p.width,0],h);g=_[0]*s+m;e.translate(g,0);r.x+=g*c}e.restore();this.processingType3=null}setCharWidth(t,e){}setCharWidthAndBounds(t,e,r,n,s,i){this.ctx.rect(r,n,s-r,i-n);this.ctx.clip();this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const r=t[1];const n=this.baseTransform||(0,D.getCurrentTransform)(this.ctx);const s={createCanvasGraphics:t=>{return new j(t,this.commonObjs,this.objs,this.canvasFactory)}};e=new L.TilingPattern(t,r,this.ctx,s,n)}else{e=this._getPattern(t[1],t[2])}return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=true}setStrokeRGBColor(t,e,r){var n;const s=((n=this.selectColor)===null||n===void 0?void 0:n.call(this,t,e,r))||I.Util.makeHexColor(t,e,r);this.ctx.strokeStyle=s;this.current.strokeColor=s}setFillRGBColor(t,e,r){var n;const s=((n=this.selectColor)===null||n===void 0?void 0:n.call(this,t,e,r))||I.Util.makeHexColor(t,e,r);this.ctx.fillStyle=s;this.current.fillColor=s;this.current.patternFill=false}_getPattern(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let r;if(this.cachedPatterns.has(t)){r=this.cachedPatterns.get(t)}else{r=(0,L.getShadingPattern)(this.objs.get(t));this.cachedPatterns.set(t,r)}if(e){r.matrix=e}return r}shadingFill(t){if(!this.contentVisible){return}const e=this.ctx;this.save();const r=this._getPattern(t);e.fillStyle=r.getPattern(e,this,(0,D.getCurrentTransformInverse)(e),L.PathType.SHADING);const n=(0,D.getCurrentTransformInverse)(e);if(n){const s=e.canvas;const i=s.width;const a=s.height;const o=I.Util.applyTransform([0,0],n);const l=I.Util.applyTransform([0,a],n);const c=I.Util.applyTransform([i,0],n);const h=I.Util.applyTransform([i,a],n);const u=Math.min(o[0],l[0],c[0],h[0]);const d=Math.min(o[1],l[1],c[1],h[1]);const f=Math.max(o[0],l[0],c[0],h[0]);const p=Math.max(o[1],l[1],c[1],h[1]);this.ctx.fillRect(u,d,f-u,p-d)}else{this.ctx.fillRect(-1e10,-1e10,2e10,2e10)}this.compose(this.current.getClippedPathBoundingBox());this.restore()}beginInlineImage(){(0,I.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,I.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(!this.contentVisible){return}this.save();this.baseTransformStack.push(this.baseTransform);if(Array.isArray(t)&&t.length===6){this.transform(...t)}this.baseTransform=(0,D.getCurrentTransform)(this.ctx);if(e){const r=e[2]-e[0];const n=e[3]-e[1];this.ctx.rect(e[0],e[1],r,n);this.current.updateRectMinMax((0,D.getCurrentTransform)(this.ctx),e);this.clip();this.endPath()}}paintFormXObjectEnd(){if(!this.contentVisible){return}this.restore();this.baseTransform=this.baseTransformStack.pop()}beginGroup(t){if(!this.contentVisible){return}this.save();if(this.inSMaskMode){this.endSMaskMode();this.current.activeSMask=null}const e=this.ctx;if(!t.isolated){(0,I.info)("TODO: Support non-isolated groups.")}if(t.knockout){(0,I.warn)("Knockout groups not supported.")}const r=(0,D.getCurrentTransform)(e);if(t.matrix){e.transform(...t.matrix)}if(!t.bbox){throw new Error("Bounding box is required.")}let n=I.Util.getAxialAlignedBoundingBox(t.bbox,(0,D.getCurrentTransform)(e));const s=[0,0,e.canvas.width,e.canvas.height];n=I.Util.intersect(n,s)||[0,0,0,0];const i=Math.floor(n[0]);const a=Math.floor(n[1]);let o=Math.max(Math.ceil(n[2])-i,1);let l=Math.max(Math.ceil(n[3])-a,1);let c=1,h=1;if(o>g){c=o/g;o=g}if(l>g){h=l/g;l=g}this.current.startNewPathAndClipBox([0,0,o,l]);let u="groupAt"+this.groupLevel;if(t.smask){u+="_smask_"+this.smaskCounter++%2}const d=this.cachedCanvases.getCanvas(u,o,l);const f=d.context;f.scale(1/c,1/h);f.translate(-i,-a);f.transform(...r);if(t.smask){this.smaskStack.push({canvas:d.canvas,context:f,offsetX:i,offsetY:a,scaleX:c,scaleY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null})}else{e.setTransform(1,0,0,1,0,0);e.translate(i,a);e.scale(c,h);e.save()}_(e,f);this.ctx=f;this.setGState([["BM","source-over"],["ca",1],["CA",1]]);this.groupStack.push(e);this.groupLevel++}endGroup(t){if(!this.contentVisible){return}this.groupLevel--;const e=this.ctx;const r=this.groupStack.pop();this.ctx=r;this.ctx.imageSmoothingEnabled=false;if(t.smask){this.tempSMask=this.smaskStack.pop();this.restore()}else{this.ctx.restore();const n=(0,D.getCurrentTransform)(this.ctx);this.restore();this.ctx.save();this.ctx.setTransform(...n);const s=I.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],n);this.ctx.drawImage(e.canvas,0,0);this.ctx.restore();this.compose(s)}}beginAnnotation(t,e,r,n,s){p(this,N,U).call(this);y(this.ctx,this.foregroundColor);this.ctx.save();this.save();if(this.baseTransform){this.ctx.setTransform(...this.baseTransform)}if(Array.isArray(e)&&e.length===4){const i=e[2]-e[0];const a=e[3]-e[1];if(s&&this.annotationCanvasMap){r=r.slice();r[4]-=e[0];r[5]-=e[1];e=e.slice();e[0]=e[1]=0;e[2]=i;e[3]=a;const[o,l]=I.Util.singularValueDecompose2dScale((0,D.getCurrentTransform)(this.ctx));const{viewportScale:c}=this;const h=Math.ceil(i*this.outputScaleX*c);const u=Math.ceil(a*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(h,u);const{canvas:d,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(t,d);this.annotationCanvas.savedCtx=this.ctx;this.ctx=f;this.ctx.setTransform(o,0,0,-l,0,a*l);y(this.ctx,this.foregroundColor)}else{y(this.ctx,this.foregroundColor);this.ctx.rect(e[0],e[1],i,a);this.ctx.clip();this.endPath()}}this.current=new b(this.ctx.canvas.width,this.ctx.canvas.height);this.transform(...r);this.transform(...n)}endAnnotation(){if(this.annotationCanvas){this.ctx=this.annotationCanvas.savedCtx;delete this.annotationCanvas.savedCtx;delete this.annotationCanvas}}paintImageMaskXObject(t){if(!this.contentVisible){return}const e=t.count;t=this.getObject(t.data,t);t.count=e;const r=this.ctx;const n=this.processingType3;if(n){if(n.compiled===undefined){n.compiled=a(t)}if(n.compiled){n.compiled(r);return}}const s=this._createMaskCanvas(t);const i=s.canvas;r.save();r.setTransform(1,0,0,1,0,0);r.drawImage(i,s.offsetX,s.offsetY);r.restore();this.compose()}paintImageMaskXObjectRepeat(t,r){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;let s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;let i=arguments.length>4?arguments[4]:undefined;let a=arguments.length>5?arguments[5]:undefined;if(!this.contentVisible){return}t=this.getObject(t.data,t);const o=this.ctx;o.save();const l=(0,D.getCurrentTransform)(o);o.transform(r,n,s,i,0,0);const c=this._createMaskCanvas(t);o.setTransform(1,0,0,1,0,0);for(let t=0,e=a.length;t<e;t+=2){const h=I.Util.transform(l,[r,n,s,i,a[t],a[t+1]]);const[u,d]=I.Util.applyTransform([0,0],h);o.drawImage(c.canvas,u,d)}o.restore();this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible){return}const e=this.ctx;const r=this.current.fillColor;const n=this.current.patternFill;for(const s of t){const{data:i,width:a,height:o,transform:l}=s;const c=this.cachedCanvases.getCanvas("maskCanvas",a,o);const h=c.context;h.save();const u=this.getObject(i,s);C(h,u);h.globalCompositeOperation="source-in";h.fillStyle=n?r.getPattern(h,this,(0,D.getCurrentTransformInverse)(e),L.PathType.FILL):r;h.fillRect(0,0,a,o);h.restore();e.save();e.transform(...l);e.scale(1,-1);E(e,c.canvas,0,0,a,o,0,-1,1,1);e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible){return}const e=this.getObject(t);if(!e){(0,I.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,r,n,s){if(!this.contentVisible){return}const e=this.getObject(t);if(!e){(0,I.warn)("Dependent image isn't ready yet");return}const i=e.width;const a=e.height;const o=[];for(let t=0,e=s.length;t<e;t+=2){o.push({transform:[r,0,0,n,s[t],s[t+1]],x:0,y:0,w:i,h:a})}this.paintInlineImageXObjectGroup(e,o)}paintInlineImageXObject(t){if(!this.contentVisible){return}const e=t.width;const r=t.height;const n=this.ctx;this.save();n.scale(1/e,-1/r);let s;if(typeof HTMLElement==="function"&&t instanceof HTMLElement||!t.data){s=t}else{const l=this.cachedCanvases.getCanvas("inlineImage",e,r);const c=l.context;f(c,t,this.current.transferMaps);s=l.canvas}const i=this._scaleImage(s,(0,D.getCurrentTransformInverse)(n));n.imageSmoothingEnabled=T((0,D.getCurrentTransform)(n),t.interpolate);const[a,o]=E(n,i.img,0,0,i.paintWidth,i.paintHeight,0,-r,e,r);if(this.imageLayer){const[h,u]=I.Util.applyTransform([0,-r],(0,D.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:t,left:h,top:u,width:a,height:o})}this.compose();this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible){return}const r=this.ctx;const n=t.width;const s=t.height;const i=this.cachedCanvases.getCanvas("inlineImage",n,s);const a=i.context;f(a,t,this.current.transferMaps);for(const o of e){r.save();r.transform(...o.transform);r.scale(1,-1);E(r,i.canvas,o.x,o.y,o.w,o.h,0,-1,1,1);if(this.imageLayer){const[l,c]=I.Util.applyTransform([o.x,o.y],(0,D.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:t,left:l,top:c,width:n,height:s})}r.restore()}this.compose()}paintSolidColorImageMask(){if(!this.contentVisible){return}this.ctx.fillRect(0,0,1,1);this.compose()}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:true})}beginMarkedContentProps(t,e){if(t==="OC"){this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)})}else{this.markedContentStack.push({visible:true})}this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop();this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();if(this.pendingClip){this.current.updateClipFromPath()}if(!this.pendingClip){this.compose(t)}const r=this.ctx;if(this.pendingClip){if(!e){if(this.pendingClip===O){r.clip("evenodd")}else{r.clip()}}this.pendingClip=null}this.current.startNewPathAndClipBox(this.current.clipBox);r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=(0,D.getCurrentTransform)(this.ctx);if(t[1]===0&&t[2]===0){this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]))}else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]);const r=Math.hypot(t[0],t[2]);const n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(r,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:r}=this.current;const n=(0,D.getCurrentTransform)(this.ctx);let t,e;if(n[1]===0&&n[2]===0){const s=Math.abs(n[0]);const i=Math.abs(n[3]);if(r===0){t=1/s;e=1/i}else{const a=s*r;const o=i*r;t=a<1?1/a:1;e=o<1?1/o:1}}else{const l=Math.abs(n[0]*n[3]-n[2]*n[1]);const s=Math.hypot(n[0],n[1]);const i=Math.hypot(n[2],n[3]);if(r===0){t=i/l;e=s/l}else{const c=r*l;t=i>c?i/c:1;e=s>c?s/c:1}}this._cachedScaleForStroking=[t,e]}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this;const{lineWidth:r}=this.current;const[n,s]=this.getScaleForStroking();e.lineWidth=r||1;if(n===1&&s===1){e.stroke();return}let i,a,o;if(t){i=(0,D.getCurrentTransform)(e);a=e.getLineDash().slice();o=e.lineDashOffset}e.scale(n,s);const l=Math.max(n,s);e.setLineDash(e.getLineDash().map(t=>t/l));e.lineDashOffset/=l;e.stroke();if(t){e.setTransform(...i);e.setLineDash(a);e.lineDashOffset=o}}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--){if(!this.markedContentStack[t].visible){return false}}return true}}e.CanvasGraphics=j;function U(){while(this.stateStack.length||this.inSMaskMode){this.restore()}this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.drawImage(this.transparentCanvas,0,0);this.ctx.restore();this.transparentCanvas=null}}for(const W in I.OPS){if(j.prototype[W]!==undefined){j.prototype[I.OPS[W]]=j.prototype[W]}}},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.TilingPattern=e.PathType=void 0;e.getShadingPattern=l;var E=r(1);var C=r(133);var i=r(3);const u={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=u;function d(t,e){if(!e||i.isNodeJS){return}const r=e[2]-e[0];const n=e[3]-e[1];const s=new Path2D;s.rect(e[0],e[1],r,n);t.clip(s)}class n{constructor(){if(this.constructor===n){(0,E.unreachable)("Cannot initialize BaseShadingPattern.")}}getPattern(){(0,E.unreachable)("Abstract method `getPattern` called.")}}class s extends n{constructor(t){super();this._type=t[1];this._bbox=t[2];this._colorStops=t[3];this._p0=t[4];this._p1=t[5];this._r0=t[6];this._r1=t[7];this.matrix=null}_createGradient(t){let e;if(this._type==="axial"){e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1])}else if(this._type==="radial"){e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1)}for(const r of this._colorStops){e.addColorStop(r[0],r[1])}return e}getPattern(t,e,r,n){let s;if(n===u.STROKE||n===u.FILL){const i=e.current.getClippedPathBoundingBox(n,(0,C.getCurrentTransform)(t))||[0,0,0,0];const a=Math.ceil(i[2]-i[0])||1;const o=Math.ceil(i[3]-i[1])||1;const l=e.cachedCanvases.getCanvas("pattern",a,o,true);const c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height);c.beginPath();c.rect(0,0,c.canvas.width,c.canvas.height);c.translate(-i[0],-i[1]);r=E.Util.transform(r,[1,0,0,1,i[0],i[1]]);c.transform(...e.baseTransform);if(this.matrix){c.transform(...this.matrix)}d(c,this._bbox);c.fillStyle=this._createGradient(c);c.fill();s=t.createPattern(l.canvas,"no-repeat");const h=new DOMMatrix(r);try{s.setTransform(h)}catch(t){(0,E.warn)(`RadialAxialShadingPattern.getPattern: "${t===null||t===void 0?void 0:t.message}".`)}}else{d(t,this._bbox);s=this._createGradient(t)}return s}}function h(t,e,r,n,s,i,a,o){const l=e.coords,c=e.colors;const h=t.data,u=t.width*4;let d;if(l[r+1]>l[n+1]){d=r;r=n;n=d;d=i;i=a;a=d}if(l[n+1]>l[s+1]){d=n;n=s;s=d;d=a;a=o;o=d}if(l[r+1]>l[n+1]){d=r;r=n;n=d;d=i;i=a;a=d}const f=(l[r]+e.offsetX)*e.scaleX;const p=(l[r+1]+e.offsetY)*e.scaleY;const g=(l[n]+e.offsetX)*e.scaleX;const v=(l[n+1]+e.offsetY)*e.scaleY;const m=(l[s]+e.offsetX)*e.scaleX;const b=(l[s+1]+e.offsetY)*e.scaleY;if(p>=b){return}const _=c[i],y=c[i+1],A=c[i+2];const S=c[a],x=c[a+1],w=c[a+2];const E=c[o],C=c[o+1],k=c[o+2];const T=Math.round(p),P=Math.round(b);let M,F,R,O;let D,I,L,N;for(let n=T;n<=P;n++){if(n<v){let t;if(n<p){t=0}else{t=(p-n)/(p-v)}M=f-(f-g)*t;F=_-(_-S)*t;R=y-(y-x)*t;O=A-(A-w)*t}else{let t;if(n>b){t=1}else if(v===b){t=0}else{t=(v-n)/(v-b)}M=g-(g-m)*t;F=S-(S-E)*t;R=x-(x-C)*t;O=w-(w-k)*t}let e;if(n<p){e=0}else if(n>b){e=1}else{e=(p-n)/(p-b)}D=f-(f-m)*e;I=_-(_-E)*e;L=y-(y-C)*e;N=A-(A-k)*e;const j=Math.round(Math.min(M,D));const U=Math.round(Math.max(M,D));let r=u*n+j*4;for(let t=j;t<=U;t++){e=(M-t)/(M-D);if(e<0){e=0}else if(e>1){e=1}h[r++]=F-(F-I)*e|0;h[r++]=R-(R-L)*e|0;h[r++]=O-(O-N)*e|0;h[r++]=255}}}function x(r,t,n){const s=t.coords;const i=t.colors;let a,e;switch(t.type){case"lattice":const o=t.verticesPerRow;const l=Math.floor(s.length/o)-1;const c=o-1;for(a=0;a<l;a++){let e=a*o;for(let t=0;t<c;t++,e++){h(r,n,s[e],s[e+1],s[e+o],i[e],i[e+1],i[e+o]);h(r,n,s[e+o+1],s[e+1],s[e+o],i[e+o+1],i[e+1],i[e+o])}}break;case"triangles":for(a=0,e=s.length;a<e;a+=3){h(r,n,s[a],s[a+1],s[a+2],i[a],i[a+1],i[a+2])}break;default:throw new Error("illegal figure")}}class a extends n{constructor(t){super();this._coords=t[2];this._colors=t[3];this._figures=t[4];this._bounds=t[5];this._bbox=t[7];this._background=t[8];this.matrix=null}_createMeshCanvas(t,r,e){const n=1.1;const s=3e3;const i=2;const a=Math.floor(this._bounds[0]);const o=Math.floor(this._bounds[1]);const l=Math.ceil(this._bounds[2])-a;const c=Math.ceil(this._bounds[3])-o;const h=Math.min(Math.ceil(Math.abs(l*t[0]*n)),s);const u=Math.min(Math.ceil(Math.abs(c*t[1]*n)),s);const d=l/h;const f=c/u;const p={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-o,scaleX:1/d,scaleY:1/f};const g=h+i*2;const v=u+i*2;const m=e.getCanvas("mesh",g,v,false);const b=m.context;const _=b.createImageData(h,u);if(r){const A=_.data;for(let t=0,e=A.length;t<e;t+=4){A[t]=r[0];A[t+1]=r[1];A[t+2]=r[2];A[t+3]=255}}for(const S of this._figures){x(_,S,p)}b.putImageData(_,i,i);const y=m.canvas;return{canvas:y,offsetX:a-i*d,offsetY:o-i*f,scaleX:d,scaleY:f}}getPattern(t,e,r,n){d(t,this._bbox);let s;if(n===u.SHADING){s=E.Util.singularValueDecompose2dScale((0,C.getCurrentTransform)(t))}else{s=E.Util.singularValueDecompose2dScale(e.baseTransform);if(this.matrix){const a=E.Util.singularValueDecompose2dScale(this.matrix);s=[s[0]*a[0],s[1]*a[1]]}}const i=this._createMeshCanvas(s,n===u.SHADING?null:this._background,e.cachedCanvases);if(n!==u.SHADING){t.setTransform(...e.baseTransform);if(this.matrix){t.transform(...this.matrix)}}t.translate(i.offsetX,i.offsetY);t.scale(i.scaleX,i.scaleY);return t.createPattern(i.canvas,"no-repeat")}}class o extends n{getPattern(){return"hotpink"}}function l(t){switch(t[0]){case"RadialAxial":return new s(t);case"Mesh":return new a(t);case"Dummy":return new o}throw new Error(`Unknown IR type: ${t[0]}`)}const c={COLORED:1,UNCOLORED:2};class f{static get MAX_PATTERN_SIZE(){return(0,E.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(t,e,r,n,s){this.operatorList=t[2];this.matrix=t[3]||[1,0,0,1,0,0];this.bbox=t[4];this.xstep=t[5];this.ystep=t[6];this.paintType=t[7];this.tilingType=t[8];this.color=e;this.ctx=r;this.canvasGraphicsFactory=n;this.baseTransform=s}createPatternCanvas(t){const e=this.operatorList;const r=this.bbox;const n=this.xstep;const s=this.ystep;const i=this.paintType;const a=this.tilingType;const o=this.color;const l=this.canvasGraphicsFactory;(0,E.info)("TilingType: "+a);const c=r[0],h=r[1],u=r[2],d=r[3];const f=E.Util.singularValueDecompose2dScale(this.matrix);const p=E.Util.singularValueDecompose2dScale(this.baseTransform);const g=[f[0]*p[0],f[1]*p[1]];const v=this.getSizeAndScale(n,this.ctx.canvas.width,g[0]);const m=this.getSizeAndScale(s,this.ctx.canvas.height,g[1]);const b=t.cachedCanvases.getCanvas("pattern",v.size,m.size,true);const _=b.context;const y=l.createCanvasGraphics(_);y.groupLevel=t.groupLevel;this.setFillAndStrokeStyleToContext(y,i,o);let A=c;let S=h;let x=u;let w=d;if(c<0){A=0;x+=Math.abs(c)}if(h<0){S=0;w+=Math.abs(h)}_.translate(-(v.scale*A),-(m.scale*S));y.transform(v.scale,0,0,m.scale,0,0);_.save();this.clipBbox(y,A,S,x,w);y.baseTransform=(0,C.getCurrentTransform)(y.ctx);y.executeOperatorList(e);y.endDrawing();return{canvas:b.canvas,scaleX:v.scale,scaleY:m.scale,offsetX:A,offsetY:S}}getSizeAndScale(t,e,r){t=Math.abs(t);const n=Math.max(f.MAX_PATTERN_SIZE,e);let s=Math.ceil(t*r);if(s>=n){s=n}else{r=s/t}return{scale:r,size:s}}clipBbox(t,e,r,n,s){const i=n-e;const a=s-r;t.ctx.rect(e,r,i,a);t.current.updateRectMinMax((0,C.getCurrentTransform)(t.ctx),[e,r,n,s]);t.clip();t.endPath()}setFillAndStrokeStyleToContext(t,e,r){const n=t.ctx,s=t.current;switch(e){case c.COLORED:const i=this.ctx;n.fillStyle=i.fillStyle;n.strokeStyle=i.strokeStyle;s.fillColor=i.fillStyle;s.strokeColor=i.strokeStyle;break;case c.UNCOLORED:const a=E.Util.makeHexColor(r[0],r[1],r[2]);n.fillStyle=a;n.strokeStyle=a;s.fillColor=a;s.strokeColor=a;break;default:throw new E.FormatError(`Unsupported paint type: ${e}`)}}getPattern(t,e,r,n){let s=r;if(n!==u.SHADING){s=E.Util.transform(s,e.baseTransform);if(this.matrix){s=E.Util.transform(s,this.matrix)}}const i=this.createPatternCanvas(e);let a=new DOMMatrix(s);a=a.translate(i.offsetX,i.offsetY);a=a.scale(1/i.scaleX,1/i.scaleY);const o=t.createPattern(i.canvas,"repeat");try{o.setTransform(a)}catch(t){(0,E.warn)(`TilingPattern.getPattern: "${t===null||t===void 0?void 0:t.message}".`)}return o}}e.TilingPattern=f},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.applyMaskImageData=n;var v=r(1);function n(t){let{src:e,srcPos:r=0,dest:n,destPos:s=0,width:i,height:a,inverseDecode:o=false}=t;const l=v.FeatureTest.isLittleEndian?4278190080:255;const[c,h]=!o?[l,0]:[0,l];const u=i>>3;const d=i&7;const f=e.length;n=new Uint32Array(n.buffer);for(let t=0;t<a;t++){for(const g=r+u;r<g;r++){const p=r<f?e[r]:255;n[s++]=p&128?h:c;n[s++]=p&64?h:c;n[s++]=p&32?h:c;n[s++]=p&16?h:c;n[s++]=p&8?h:c;n[s++]=p&4?h:c;n[s++]=p&2?h:c;n[s++]=p&1?h:c}if(d===0){continue}const p=r<f?e[r++]:255;for(let t=0;t<d;t++){n[s++]=p&1<<7-t?h:c}}return{srcPos:r,destPos:s}}},(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GlobalWorkerOptions=void 0;const r=Object.create(null);e.GlobalWorkerOptions=r;r.workerPort=r.workerPort===undefined?null:r.workerPort;r.workerSrc=r.workerSrc===undefined?"":r.workerSrc},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MessageHandler=void 0;var c=r(1);const l={UNKNOWN:0,DATA:1,ERROR:2};const h={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function u(t){if(!(t instanceof Error||typeof t==="object"&&t!==null)){(0,c.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.')}switch(t.name){case"AbortException":return new c.AbortException(t.message);case"MissingPDFException":return new c.MissingPDFException(t.message);case"PasswordException":return new c.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new c.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new c.UnknownErrorException(t.message,t.details);default:return new c.UnknownErrorException(t.message,t.toString())}}class n{constructor(t,e,o){this.sourceName=t;this.targetName=e;this.comObj=o;this.callbackId=1;this.streamId=1;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName!==this.sourceName){return}if(e.stream){this._processStreamMessage(e);return}if(e.callback){const n=e.callbackId;const s=this.callbackCapabilities[n];if(!s){throw new Error(`Cannot resolve callback ${n}`)}delete this.callbackCapabilities[n];if(e.callback===l.DATA){s.resolve(e.data)}else if(e.callback===l.ERROR){s.reject(u(e.reason))}else{throw new Error("Unexpected callback case")}return}const r=this.actionHandler[e.action];if(!r){throw new Error(`Unknown action from worker: ${e.action}`)}if(e.callbackId){const i=this.sourceName;const a=e.sourceName;new Promise(function(t){t(r(e.data))}).then(function(t){o.postMessage({sourceName:i,targetName:a,callback:l.DATA,callbackId:e.callbackId,data:t})},function(t){o.postMessage({sourceName:i,targetName:a,callback:l.ERROR,callbackId:e.callbackId,reason:u(t)})});return}if(e.streamId){this._createStreamSink(e);return}r(e.data)};o.addEventListener("message",this._onComObjOnMessage)}on(t,e){const r=this.actionHandler;if(r[t]){throw new Error(`There is already an actionName called "${t}"`)}r[t]=e}send(t,e,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},r)}sendWithPromise(t,e,r){const n=this.callbackId++;const s=(0,c.createPromiseCapability)();this.callbackCapabilities[n]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},r)}catch(t){s.reject(t)}return s.promise}sendWithStream(r,n,t,s){const i=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:t=>{const e=(0,c.createPromiseCapability)();this.streamControllers[i]={controller:t,startCall:e,pullCall:null,cancelCall:null,isClosed:false};l.postMessage({sourceName:a,targetName:o,action:r,streamId:i,data:n,desiredSize:t.desiredSize},s);return e.promise},pull:t=>{const e=(0,c.createPromiseCapability)();this.streamControllers[i].pullCall=e;l.postMessage({sourceName:a,targetName:o,stream:h.PULL,streamId:i,desiredSize:t.desiredSize});return e.promise},cancel:t=>{(0,c.assert)(t instanceof Error,"cancel must have a valid reason");const e=(0,c.createPromiseCapability)();this.streamControllers[i].cancelCall=e;this.streamControllers[i].isClosed=true;l.postMessage({sourceName:a,targetName:o,stream:h.CANCEL,streamId:i,reason:u(t)});return e.promise}},t)}_createStreamSink(e){const s=e.streamId,i=this.sourceName,a=e.sourceName,o=this.comObj;const t=this,r=this.actionHandler[e.action];const n={enqueue(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;let r=arguments.length>2?arguments[2]:undefined;if(this.isCancelled){return}const n=this.desiredSize;this.desiredSize-=e;if(n>0&&this.desiredSize<=0){this.sinkCapability=(0,c.createPromiseCapability)();this.ready=this.sinkCapability.promise}o.postMessage({sourceName:i,targetName:a,stream:h.ENQUEUE,streamId:s,chunk:t},r)},close(){if(this.isCancelled){return}this.isCancelled=true;o.postMessage({sourceName:i,targetName:a,stream:h.CLOSE,streamId:s});delete t.streamSinks[s]},error(t){(0,c.assert)(t instanceof Error,"error must have a valid reason");if(this.isCancelled){return}this.isCancelled=true;o.postMessage({sourceName:i,targetName:a,stream:h.ERROR,streamId:s,reason:u(t)})},sinkCapability:(0,c.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:false,desiredSize:e.desiredSize,ready:null};n.sinkCapability.resolve();n.ready=n.sinkCapability.promise;this.streamSinks[s]=n;new Promise(function(t){t(r(e.data,n))}).then(function(){o.postMessage({sourceName:i,targetName:a,stream:h.START_COMPLETE,streamId:s,success:true})},function(t){o.postMessage({sourceName:i,targetName:a,stream:h.START_COMPLETE,streamId:s,reason:u(t)})})}_processStreamMessage(e){const r=e.streamId,n=this.sourceName,s=e.sourceName,i=this.comObj;const t=this.streamControllers[r],a=this.streamSinks[r];switch(e.stream){case h.START_COMPLETE:if(e.success){t.startCall.resolve()}else{t.startCall.reject(u(e.reason))}break;case h.PULL_COMPLETE:if(e.success){t.pullCall.resolve()}else{t.pullCall.reject(u(e.reason))}break;case h.PULL:if(!a){i.postMessage({sourceName:n,targetName:s,stream:h.PULL_COMPLETE,streamId:r,success:true});break}if(a.desiredSize<=0&&e.desiredSize>0){a.sinkCapability.resolve()}a.desiredSize=e.desiredSize;new Promise(function(t){t(a.onPull&&a.onPull())}).then(function(){i.postMessage({sourceName:n,targetName:s,stream:h.PULL_COMPLETE,streamId:r,success:true})},function(t){i.postMessage({sourceName:n,targetName:s,stream:h.PULL_COMPLETE,streamId:r,reason:u(t)})});break;case h.ENQUEUE:(0,c.assert)(t,"enqueue should have stream controller");if(t.isClosed){break}t.controller.enqueue(e.chunk);break;case h.CLOSE:(0,c.assert)(t,"close should have stream controller");if(t.isClosed){break}t.isClosed=true;t.controller.close();this._deleteStreamController(t,r);break;case h.ERROR:(0,c.assert)(t,"error should have stream controller");t.controller.error(u(e.reason));this._deleteStreamController(t,r);break;case h.CANCEL_COMPLETE:if(e.success){t.cancelCall.resolve()}else{t.cancelCall.reject(u(e.reason))}this._deleteStreamController(t,r);break;case h.CANCEL:if(!a){break}new Promise(function(t){t(a.onCancel&&a.onCancel(u(e.reason)))}).then(function(){i.postMessage({sourceName:n,targetName:s,stream:h.CANCEL_COMPLETE,streamId:r,success:true})},function(t){i.postMessage({sourceName:n,targetName:s,stream:h.CANCEL_COMPLETE,streamId:r,reason:u(t)})});a.sinkCapability.reject(u(e.reason));a.isCancelled=true;delete this.streamSinks[r];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(t,e){await Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]);delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=n},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Metadata=void 0;var n=r(1);function s(t,e,r){i(t,e);e.set(t,r)}function i(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function a(t,e){var r=c(t,e,"get");return o(t,r)}function o(t,e){if(e.get){return e.get.call(t)}return e.value}function l(t,e,r){var n=c(t,e,"set");h(t,n,r);return r}function c(t,e,r){if(!e.has(t)){throw new TypeError("attempted to "+r+" private field on non-instance")}return e.get(t)}function h(t,e,r){if(e.set){e.set.call(t,r)}else{if(!e.writable){throw new TypeError("attempted to set read only private field")}e.value=r}}var u=new WeakMap;var d=new WeakMap;class f{constructor(t){let{parsedData:e,rawData:r}=t;s(this,u,{writable:true,value:void 0});s(this,d,{writable:true,value:void 0});l(this,u,e);l(this,d,r)}getRaw(){return a(this,d)}get(t){var e;return(e=a(this,u).get(t))!==null&&e!==void 0?e:null}getAll(){return(0,n.objectFromMap)(a(this,u))}has(t){return a(this,u).has(t)}}e.Metadata=f},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.OptionalContentConfig=void 0;var i=r(1);function a(t,e){n(t,e);e.add(t)}function o(t,e,r){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return r}function l(t,e,r){n(t,e);e.set(t,r)}function n(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function c(t,e,r){var n=u(t,e,"set");s(t,n,r);return r}function s(t,e,r){if(e.set){e.set.call(t,r)}else{if(!e.writable){throw new TypeError("attempted to set read only private field")}e.value=r}}function h(t,e){var r=u(t,e,"get");return d(t,r)}function u(t,e,r){if(!e.has(t)){throw new TypeError("attempted to "+r+" private field on non-instance")}return e.get(t)}function d(t,e){if(e.get){return e.get.call(t)}return e.value}const f=Symbol("INTERNAL");var p=new WeakMap;class g{constructor(t,e){l(this,p,{writable:true,value:true});this.name=t;this.intent=e}get visible(){return h(this,p)}_setVisible(t,e){if(t!==f){(0,i.unreachable)("Internal method `_setVisible` called.")}c(this,p,e)}}var v=new WeakMap;var m=new WeakMap;var b=new WeakMap;var _=new WeakMap;var y=new WeakSet;class A{constructor(t){a(this,y);l(this,v,{writable:true,value:true});l(this,m,{writable:true,value:new Map});l(this,b,{writable:true,value:null});l(this,_,{writable:true,value:null});this.name=null;this.creator=null;if(t===null){return}this.name=t.name;this.creator=t.creator;c(this,_,t.order);for(const e of t.groups){h(this,m).set(e.id,new g(e.name,e.intent))}if(t.baseState==="OFF"){for(const e of h(this,m).values()){e._setVisible(f,false)}}for(const r of t.on){h(this,m).get(r)._setVisible(f,true)}for(const n of t.off){h(this,m).get(n)._setVisible(f,false)}c(this,b,new Map);for(const[s,e]of h(this,m)){h(this,b).set(s,e.visible)}}isVisible(t){if(h(this,m).size===0){return true}if(!t){(0,i.warn)("Optional content group not defined.");return true}if(t.type==="OCG"){if(!h(this,m).has(t.id)){(0,i.warn)(`Optional content group not found: ${t.id}`);return true}return h(this,m).get(t.id).visible}else if(t.type==="OCMD"){if(t.expression){return o(this,y,S).call(this,t.expression)}if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!h(this,m).has(e)){(0,i.warn)(`Optional content group not found: ${e}`);return true}if(h(this,m).get(e).visible){return true}}return false}else if(t.policy==="AllOn"){for(const e of t.ids){if(!h(this,m).has(e)){(0,i.warn)(`Optional content group not found: ${e}`);return true}if(!h(this,m).get(e).visible){return false}}return true}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!h(this,m).has(e)){(0,i.warn)(`Optional content group not found: ${e}`);return true}if(!h(this,m).get(e).visible){return true}}return false}else if(t.policy==="AllOff"){for(const e of t.ids){if(!h(this,m).has(e)){(0,i.warn)(`Optional content group not found: ${e}`);return true}if(h(this,m).get(e).visible){return false}}return true}(0,i.warn)(`Unknown optional content policy ${t.policy}.`);return true}(0,i.warn)(`Unknown group type ${t.type}.`);return true}setVisibility(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(!h(this,m).has(t)){(0,i.warn)(`Optional content group not found: ${t}`);return}h(this,m).get(t)._setVisible(f,!!e);c(this,v,null)}get hasInitialVisibility(){if(h(this,v)!==null){return h(this,v)}for(const[t,e]of h(this,m)){const r=h(this,b).get(t);if(e.visible!==r){return c(this,v,false)}}return c(this,v,true)}getOrder(){if(!h(this,m).size){return null}if(h(this,_)){return h(this,_).slice()}return[...h(this,m).keys()]}getGroups(){return h(this,m).size>0?(0,i.objectFromMap)(h(this,m)):null}getGroup(t){return h(this,m).get(t)||null}}e.OptionalContentConfig=A;function S(r){const t=r.length;if(t<2){return true}const n=r[0];for(let e=1;e<t;e++){const s=r[e];let t;if(Array.isArray(s)){t=o(this,y,S).call(this,s)}else if(h(this,m).has(s)){t=h(this,m).get(s).visible}else{(0,i.warn)(`Optional content group not found: ${s}`);return true}switch(n){case"And":if(!t){return false}break;case"Or":if(t){return true}break;case"Not":return!t;default:return true}}return n==="And"}},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PDFDataTransportStream=void 0;var s=r(1);var i=r(133);class n{constructor(t,e){(0,s.assert)(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');this._queuedChunks=[];this._progressiveDone=t.progressiveDone||false;this._contentDispositionFilename=t.contentDispositionFilename||null;const r=t.initialData;if((r===null||r===void 0?void 0:r.length)>0){const n=new Uint8Array(r).buffer;this._queuedChunks.push(n)}this._pdfDataRangeTransport=e;this._isStreamingSupported=!t.disableStream;this._isRangeSupported=!t.disableRange;this._contentLength=t.length;this._fullRequestReader=null;this._rangeReaders=[];this._pdfDataRangeTransport.addRangeListener((t,e)=>{this._onReceiveData({begin:t,chunk:e})});this._pdfDataRangeTransport.addProgressListener((t,e)=>{this._onProgress({loaded:t,total:e})});this._pdfDataRangeTransport.addProgressiveReadListener(t=>{this._onReceiveData({chunk:t})});this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()});this._pdfDataRangeTransport.transportReady()}_onReceiveData(e){const r=new Uint8Array(e.chunk).buffer;if(e.begin===undefined){if(this._fullRequestReader){this._fullRequestReader._enqueue(r)}else{this._queuedChunks.push(r)}}else{const t=this._rangeReaders.some(function(t){if(t._begin!==e.begin){return false}t._enqueue(r);return true});(0,s.assert)(t,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t,e;return(t=(e=this._fullRequestReader)===null||e===void 0?void 0:e._loaded)!==null&&t!==void 0?t:0}_onProgress(t){if(t.total===undefined){const e=this._rangeReaders[0];if(e!==null&&e!==void 0&&e.onProgress){e.onProgress({loaded:t.loaded})}}else{const r=this._fullRequestReader;if(r!==null&&r!==void 0&&r.onProgress){r.onProgress({loaded:t.loaded,total:t.total})}}}_onProgressiveDone(){if(this._fullRequestReader){this._fullRequestReader.progressiveDone()}this._progressiveDone=true}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);if(e>=0){this._rangeReaders.splice(e,1)}}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;this._queuedChunks=null;return new a(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength){return null}const r=new o(this,t,e);this._pdfDataRangeTransport.requestDataRange(t,e);this._rangeReaders.push(r);return r}cancelAllRequests(t){if(this._fullRequestReader){this._fullRequestReader.cancel(t)}for(const e of this._rangeReaders.slice(0)){e.cancel(t)}this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=n;class a{constructor(t,e){let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;this._stream=t;this._done=r||false;this._filename=(0,i.isPdfFile)(n)?n:null;this._queuedChunks=e||[];this._loaded=0;for(const s of this._queuedChunks){this._loaded+=s.byteLength}this._requests=[];this._headersReady=Promise.resolve();t._fullRequestReader=this;this.onProgress=null}_enqueue(t){if(this._done){return}if(this._requests.length>0){const e=this._requests.shift();e.resolve({value:t,done:false})}else{this._queuedChunks.push(t)}this._loaded+=t.byteLength}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){const e=this._queuedChunks.shift();return{value:e,done:false}}if(this._done){return{value:undefined,done:true}}const t=(0,s.createPromiseCapability)();this._requests.push(t);return t.promise}cancel(t){this._done=true;for(const e of this._requests){e.resolve({value:undefined,done:true})}this._requests.length=0}progressiveDone(){if(this._done){return}this._done=true}}class o{constructor(t,e,r){this._stream=t;this._begin=e;this._end=r;this._queuedChunk=null;this._requests=[];this._done=false;this.onProgress=null}_enqueue(t){if(this._done){return}if(this._requests.length===0){this._queuedChunk=t}else{const e=this._requests.shift();e.resolve({value:t,done:false});for(const r of this._requests){r.resolve({value:undefined,done:true})}this._requests.length=0}this._done=true;this._stream._removeRangeReader(this)}get isStreamingSupported(){return false}async read(){if(this._queuedChunk){const e=this._queuedChunk;this._queuedChunk=null;return{value:e,done:false}}if(this._done){return{value:undefined,done:true}}const t=(0,s.createPromiseCapability)();this._requests.push(t);return t.promise}cancel(t){this._done=true;for(const e of this._requests){e.resolve({value:undefined,done:true})}this._requests.length=0;this._stream._removeRangeReader(this)}}},(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.XfaText=void 0;class o{static textContent(t){const i=[];const e={items:i,styles:Object.create(null)};function a(t){var e;if(!t){return}let r=null;const n=t.name;if(n==="#text"){r=t.value}else if(!o.shouldBuildText(n)){return}else if(t!==null&&t!==void 0&&(e=t.attributes)!==null&&e!==void 0&&e.textContent){r=t.attributes.textContent}else if(t.value){r=t.value}if(r!==null){i.push({str:r})}if(!t.children){return}for(const s of t.children){a(s)}}a(t);return e}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}e.XfaText=o},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=r(134);const s=function(e){return new Promise((r,n)=>{const t=require("fs");t.readFile(e,(t,e)=>{if(t||!e){n(new Error(t));return}r(new Uint8Array(e))})})};class i extends n.BaseCanvasFactory{_createCanvas(t,e){const r=require("canvas");return r.createCanvas(t,e)}}e.NodeCanvasFactory=i;class a extends n.BaseCMapReaderFactory{_fetchData(t,e){return s(t).then(t=>{return{cMapData:t,compressionType:e}})}}e.NodeCMapReaderFactory=a;class o extends n.BaseStandardFontDataFactory{_fetchData(t){return s(t)}}e.NodeStandardFontDataFactory=o},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AnnotationEditorLayer=void 0;var n=r(132);var s=r(1);var i=r(148);var a=r(149);function o(t,e){h(t,e);e.add(t)}function l(t,e,r){if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function c(t,e,r){h(t,e);e.set(t,r)}function h(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function u(t,e,r){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return r}function d(t,e){var r=g(t,e,"get");return f(t,r)}function f(t,e){if(e.get){return e.get.call(t)}return e.value}function p(t,e,r){var n=g(t,e,"set");v(t,n,r);return r}function g(t,e,r){if(!e.has(t)){throw new TypeError("attempted to "+r+" private field on non-instance")}return e.get(t)}function v(t,e,r){if(e.set){e.set.call(t,r)}else{if(!e.writable){throw new TypeError("attempted to set read only private field")}e.value=r}}var m=new WeakMap;var b=new WeakMap;var _=new WeakMap;var y=new WeakMap;var A=new WeakMap;var S=new WeakMap;var x=new WeakMap;var w=new WeakMap;var E=new WeakSet;var C=new WeakSet;var k=new WeakSet;var T=new WeakSet;class P{constructor(t){o(this,T);o(this,k);o(this,C);o(this,E);c(this,m,{writable:true,value:void 0});c(this,b,{writable:true,value:false});c(this,_,{writable:true,value:this.pointerup.bind(this)});c(this,y,{writable:true,value:this.pointerdown.bind(this)});c(this,A,{writable:true,value:new Map});c(this,S,{writable:true,value:false});c(this,x,{writable:true,value:false});c(this,w,{writable:true,value:void 0});if(!P._initialized){P._initialized=true;i.FreeTextEditor.initialize(t.l10n);a.InkEditor.initialize(t.l10n);t.uiManager.registerEditorTypes([i.FreeTextEditor,a.InkEditor])}p(this,w,t.uiManager);this.annotationStorage=t.annotationStorage;this.pageIndex=t.pageIndex;this.div=t.div;p(this,m,t.accessibilityManager);d(this,w).addLayer(this)}updateToolbar(t){d(this,w).updateToolbar(t)}updateMode(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:d(this,w).getMode();u(this,T,O).call(this);if(t===s.AnnotationEditorType.INK){this.addInkEditorIfNeeded(false);this.disableClick()}else{this.enableClick()}d(this,w).unselectAll()}addInkEditorIfNeeded(t){if(!t&&d(this,w).getMode()!==s.AnnotationEditorType.INK){return}if(!t){for(const e of d(this,A).values()){if(e.isEmpty()){e.setInBackground();return}}}const e=u(this,k,R).call(this,{offsetX:0,offsetY:0});e.setInBackground()}setEditingState(t){d(this,w).setEditingState(t)}addCommands(t){d(this,w).addCommands(t)}enable(){this.div.style.pointerEvents="auto";for(const t of d(this,A).values()){t.enableEditing()}}disable(){this.div.style.pointerEvents="none";for(const t of d(this,A).values()){t.disableEditing()}}setActiveEditor(t){const e=d(this,w).getActive();if(e===t){return}d(this,w).setActiveEditor(t)}enableClick(){this.div.addEventListener("pointerdown",d(this,y));this.div.addEventListener("pointerup",d(this,_))}disableClick(){this.div.removeEventListener("pointerdown",d(this,y));this.div.removeEventListener("pointerup",d(this,_))}attach(t){d(this,A).set(t.id,t)}detach(t){var e;d(this,A).delete(t.id);(e=d(this,m))===null||e===void 0?void 0:e.removePointerInTextLayer(t.contentDiv)}remove(t){d(this,w).removeEditor(t);this.detach(t);this.annotationStorage.remove(t.id);t.div.style.display="none";setTimeout(()=>{t.div.style.display="";t.div.remove();t.isAttachedToDOM=false;if(document.activeElement===document.body){d(this,w).focusMainContainer()}},0);if(!d(this,x)){this.addInkEditorIfNeeded(false)}}add(t){u(this,E,M).call(this,t);d(this,w).addEditor(t);this.attach(t);if(!t.isAttachedToDOM){const e=t.render();this.div.append(e);t.isAttachedToDOM=true}this.moveEditorInDOM(t);t.onceAdded();this.addToAnnotationStorage(t)}moveEditorInDOM(t){var e;(e=d(this,m))===null||e===void 0?void 0:e.moveElementInDOM(this.div,t.div,t.contentDiv,true)}addToAnnotationStorage(t){if(!t.isEmpty()&&!this.annotationStorage.has(t.id)){this.annotationStorage.setValue(t.id,t)}}addOrRebuild(t){if(t.needsToBeRebuilt()){t.rebuild()}else{this.add(t)}}addANewEditor(t){const e=()=>{this.addOrRebuild(t)};const r=()=>{t.remove()};this.addCommands({cmd:e,undo:r,mustExec:true})}addUndoableEditor(t){const e=()=>{this.addOrRebuild(t)};const r=()=>{t.remove()};this.addCommands({cmd:e,undo:r,mustExec:false})}getNextId(){return d(this,w).getId()}deserialize(t){switch(t.annotationType){case s.AnnotationEditorType.FREETEXT:return i.FreeTextEditor.deserialize(t,this);case s.AnnotationEditorType.INK:return a.InkEditor.deserialize(t,this)}return null}setSelected(t){d(this,w).setSelected(t)}toggleSelected(t){d(this,w).toggleSelected(t)}isSelected(t){return d(this,w).isSelected(t)}unselect(t){d(this,w).unselect(t)}pointerup(t){const e=n.KeyboardManager.platform.isMac;if(t.button!==0||t.ctrlKey&&e){return}if(t.target!==this.div){return}if(!d(this,S)){return}p(this,S,false);if(!d(this,b)){p(this,b,true);return}u(this,k,R).call(this,t)}pointerdown(t){const e=n.KeyboardManager.platform.isMac;if(t.button!==0||t.ctrlKey&&e){return}if(t.target!==this.div){return}p(this,S,true);const r=d(this,w).getActive();p(this,b,!r||r.isEmpty())}drop(t){const e=t.dataTransfer.getData("text/plain");const r=d(this,w).getEditor(e);if(!r){return}t.preventDefault();t.dataTransfer.dropEffect="move";u(this,E,M).call(this,r);const n=this.div.getBoundingClientRect();const s=t.clientX-n.x;const i=t.clientY-n.y;r.translate(s-r.startX,i-r.startY);this.moveEditorInDOM(r);r.div.focus()}dragover(t){t.preventDefault()}destroy(){var t;if(((t=d(this,w).getActive())===null||t===void 0?void 0:t.parent)===this){d(this,w).setActiveEditor(null)}for(const r of d(this,A).values()){var e;(e=d(this,m))===null||e===void 0?void 0:e.removePointerInTextLayer(r.contentDiv);r.isAttachedToDOM=false;r.div.remove();r.parent=null}this.div=null;d(this,A).clear();d(this,w).removeLayer(this)}render(t){this.viewport=t.viewport;(0,n.bindEvents)(this,this.div,["dragover","drop"]);this.setDimensions();for(const e of d(this,w).getEditors(this.pageIndex)){this.add(e)}this.updateMode()}update(t){this.viewport=t.viewport;this.setDimensions();this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[t,e,r,n]=this.viewport.viewBox;const s=r-t;const i=n-e;return[s,i]}get viewportBaseDimensions(){const{width:t,height:e,rotation:r}=this.viewport;return r%180===0?[t,e]:[e,t]}setDimensions(){const{width:t,height:e,rotation:r}=this.viewport;const n=r%180!==0,s=Math.floor(t)+"px",i=Math.floor(e)+"px";this.div.style.width=n?i:s;this.div.style.height=n?s:i;this.div.setAttribute("data-main-rotation",r)}}e.AnnotationEditorLayer=P;function M(t){var e;if(t.parent===this){return}this.attach(t);t.pageIndex=this.pageIndex;(e=t.parent)===null||e===void 0?void 0:e.detach(t);t.parent=this;if(t.div&&t.isAttachedToDOM){t.div.remove();this.div.append(t.div)}}function F(t){switch(d(this,w).getMode()){case s.AnnotationEditorType.FREETEXT:return new i.FreeTextEditor(t);case s.AnnotationEditorType.INK:return new a.InkEditor(t)}return null}function R(t){const e=this.getNextId();const r=u(this,C,F).call(this,{parent:this,id:e,x:t.offsetX,y:t.offsetY});if(r){this.add(r)}return r}function O(){p(this,x,true);for(const t of d(this,A).values()){if(t.isEmpty()){t.remove()}}p(this,x,false)}l(P,"_initialized",false)},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FreeTextEditor=void 0;var n=r(1);var o=r(132);var s=r(131);function i(t,e){c(t,e);e.add(t)}function a(t,e,r){if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function l(t,e,r){c(t,e);e.set(t,r)}function c(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function h(t,e){var r=p(t,e,"get");return u(t,r)}function u(t,e){if(e.get){return e.get.call(t)}return e.value}function d(t,e,r){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return r}function f(t,e,r){var n=p(t,e,"set");g(t,n,r);return r}function p(t,e,r){if(!e.has(t)){throw new TypeError("attempted to "+r+" private field on non-instance")}return e.get(t)}function g(t,e,r){if(e.set){e.set.call(t,r)}else{if(!e.writable){throw new TypeError("attempted to set read only private field")}e.value=r}}var v=new WeakMap;var m=new WeakMap;var b=new WeakMap;var _=new WeakMap;var y=new WeakMap;var A=new WeakMap;var S=new WeakMap;var x=new WeakSet;var w=new WeakSet;var E=new WeakSet;var C=new WeakSet;class k extends s.AnnotationEditor{constructor(t){super({...t,name:"freeTextEditor"});i(this,C);i(this,E);i(this,w);i(this,x);l(this,v,{writable:true,value:this.editorDivBlur.bind(this)});l(this,m,{writable:true,value:this.editorDivFocus.bind(this)});l(this,b,{writable:true,value:this.editorDivKeydown.bind(this)});l(this,_,{writable:true,value:void 0});l(this,y,{writable:true,value:""});l(this,A,{writable:true,value:false});l(this,S,{writable:true,value:void 0});f(this,_,t.color||k._defaultColor||s.AnnotationEditor._defaultLineColor);f(this,S,t.fontSize||k._defaultFontSize)}static initialize(e){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(t=>[t,e.get(t)]));const t=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case n.AnnotationEditorParamsType.FREETEXT_SIZE:k._defaultFontSize=e;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:k._defaultColor=e;break}}updateParams(t,e){switch(t){case n.AnnotationEditorParamsType.FREETEXT_SIZE:d(this,x,T).call(this,e);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:d(this,w,P).call(this,e);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,k._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,k._defaultColor||s.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,h(this,S)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,h(this,_)]]}getInitialTranslation(){return[-k._internalPadding*this.parent.scaleFactor,-(k._internalPadding+h(this,S))*this.parent.scaleFactor]}rebuild(){super.rebuild();if(this.div===null){return}if(!this.isAttachedToDOM){this.parent.add(this)}}enableEditMode(){if(this.isInEditMode()){return}this.parent.setEditingState(false);this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT);super.enableEditMode();this.enableEditing();this.overlayDiv.classList.remove("enabled");this.editorDiv.contentEditable=true;this.div.draggable=false;this.editorDiv.addEventListener("keydown",h(this,b));this.editorDiv.addEventListener("focus",h(this,m));this.editorDiv.addEventListener("blur",h(this,v))}disableEditMode(){if(!this.isInEditMode()){return}this.parent.setEditingState(true);super.disableEditMode();this.disableEditing();this.overlayDiv.classList.add("enabled");this.editorDiv.contentEditable=false;this.div.draggable=true;this.editorDiv.removeEventListener("keydown",h(this,b));this.editorDiv.removeEventListener("focus",h(this,m));this.editorDiv.removeEventListener("blur",h(this,v));this.div.focus();this.isEditing=false}focusin(t){super.focusin(t);if(t.target!==this.editorDiv){this.editorDiv.focus()}}onceAdded(){if(this.width){return}this.enableEditMode();this.editorDiv.focus()}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=false;this.parent.setEditingState(true);super.remove()}commit(){super.commit();if(!h(this,A)){f(this,A,true);this.parent.addUndoableEditor(this)}this.disableEditMode();f(this,y,d(this,E,M).call(this).trimEnd());d(this,C,F).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(t){this.enableEditMode();this.editorDiv.focus()}keydown(t){if(t.target===this.div&&t.key==="Enter"){this.enableEditMode();this.editorDiv.focus()}}editorDivKeydown(t){k._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=true}editorDivBlur(t){this.isEditing=false}disableEditing(){this.editorDiv.setAttribute("role","comment");this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox");this.editorDiv.setAttribute("aria-multiline",true)}render(){if(this.div){return this.div}let t,e;if(this.width){t=this.x;e=this.y}super.render();this.editorDiv=document.createElement("div");this.editorDiv.className="internal";this.editorDiv.setAttribute("id",`${this.id}-editor`);this.enableEditing();k._l10nPromise.get("editor_free_text_aria_label").then(t=>{var e;return(e=this.editorDiv)===null||e===void 0?void 0:e.setAttribute("aria-label",t)});k._l10nPromise.get("free_text_default_content").then(t=>{var e;return(e=this.editorDiv)===null||e===void 0?void 0:e.setAttribute("default-content",t)});this.editorDiv.contentEditable=true;const{style:r}=this.editorDiv;r.fontSize=`calc(${h(this,S)}px * var(--scale-factor))`;r.color=h(this,_);this.div.append(this.editorDiv);this.overlayDiv=document.createElement("div");this.overlayDiv.classList.add("overlay","enabled");this.div.append(this.overlayDiv);(0,o.bindEvents)(this,this.div,["dblclick","keydown"]);if(this.width){const[n,s]=this.parent.viewportBaseDimensions;this.setAt(t*n,e*s,this.width*n,this.height*s);for(const i of h(this,y).split("\n")){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br"));this.editorDiv.append(a)}this.div.draggable=true;this.editorDiv.contentEditable=false}else{this.div.draggable=false;this.editorDiv.contentEditable=true}return this.div}get contentDiv(){return this.editorDiv}static deserialize(t,e){const r=super.deserialize(t,e);f(r,S,t.fontSize);f(r,_,n.Util.makeHexColor(...t.color));f(r,y,t.value);return r}serialize(){if(this.isEmpty()){return null}const t=k._internalPadding*this.parent.scaleFactor;const e=this.getRect(t,t);const r=s.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:n.AnnotationEditorType.FREETEXT,color:r,fontSize:h(this,S),value:h(this,y),pageIndex:this.parent.pageIndex,rect:e,rotation:this.rotation}}}e.FreeTextEditor=k;function T(t){const e=t=>{this.editorDiv.style.fontSize=`calc(${t}px * var(--scale-factor))`;this.translate(0,-(t-h(this,S))*this.parent.scaleFactor);f(this,S,t);d(this,C,F).call(this)};const r=h(this,S);this.parent.addCommands({cmd:()=>{e(t)},undo:()=>{e(r)},mustExec:true,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:true,keepUndo:true})}function P(t){const e=h(this,_);this.parent.addCommands({cmd:()=>{f(this,_,t);this.editorDiv.style.color=t},undo:()=>{f(this,_,e);this.editorDiv.style.color=e},mustExec:true,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:true,keepUndo:true})}function M(){const r=this.editorDiv.getElementsByTagName("div");if(r.length===0){return this.editorDiv.innerText}const n=[];for(let t=0,e=r.length;t<e;t++){const s=r[t];const i=s.firstChild;if((i===null||i===void 0?void 0:i.nodeName)==="#text"){n.push(i.data)}else{n.push("")}}return n.join("\n")}function F(){const[t,e]=this.parent.viewportBaseDimensions;const r=this.div.getBoundingClientRect();this.width=r.width/t;this.height=r.height/e}a(k,"_freeTextDefaultContent","");a(k,"_l10nPromise",void 0);a(k,"_internalPadding",0);a(k,"_defaultColor",null);a(k,"_defaultFontSize",10);a(k,"_keyboardManager",new o.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],k.prototype.commitOrRemove]]));a(k,"_type","freetext")},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.InkEditor=void 0;Object.defineProperty(e,"fitCurve",{enumerable:true,get:function(){return c.fitCurve}});var _=r(1);var n=r(131);var c=r(150);var s=r(132);function i(t,e){l(t,e);e.add(t)}function a(t,e,r){if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function o(t,e,r){l(t,e);e.set(t,r)}function l(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function y(t,e,r){h(t,e);return r}function h(t,e){if(t!==e){throw new TypeError("Private static access of wrong provenance")}}function A(t,e,r){var n=f(t,e,"set");u(t,n,r);return r}function u(t,e,r){if(e.set){e.set.call(t,r)}else{if(!e.writable){throw new TypeError("attempted to set read only private field")}e.value=r}}function d(t,e){var r=f(t,e,"get");return p(t,r)}function f(t,e,r){if(!e.has(t)){throw new TypeError("attempted to "+r+" private field on non-instance")}return e.get(t)}function p(t,e){if(e.get){return e.get.call(t)}return e.value}function x(t,e,r){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return r}const S=16;var w=new WeakMap;var E=new WeakMap;var C=new WeakMap;var g=new WeakMap;var v=new WeakMap;var m=new WeakMap;var b=new WeakMap;var k=new WeakMap;var T=new WeakMap;var P=new WeakMap;var M=new WeakMap;var F=new WeakMap;var R=new WeakMap;var O=new WeakMap;var D=new WeakSet;var I=new WeakSet;var L=new WeakSet;var N=new WeakSet;var j=new WeakSet;var U=new WeakSet;var W=new WeakSet;var B=new WeakSet;var q=new WeakSet;var G=new WeakSet;var z=new WeakSet;var H=new WeakSet;var V=new WeakSet;var X=new WeakSet;var $=new WeakSet;var Y=new WeakSet;var K=new WeakSet;var J=new WeakSet;var Q=new WeakSet;var Z=new WeakSet;var tt=new WeakSet;var et=new WeakSet;class rt extends n.AnnotationEditor{constructor(t){super({...t,name:"inkEditor"});i(this,et);i(this,tt);i(this,Z);i(this,Q);i(this,J);i(this,K);i(this,Y);i(this,$);i(this,X);i(this,V);i(this,H);i(this,z);i(this,G);i(this,q);i(this,B);i(this,W);i(this,U);i(this,j);i(this,N);i(this,L);i(this,I);i(this,D);o(this,w,{writable:true,value:0});o(this,E,{writable:true,value:0});o(this,C,{writable:true,value:0});o(this,g,{writable:true,value:this.canvasPointermove.bind(this)});o(this,v,{writable:true,value:this.canvasPointerleave.bind(this)});o(this,m,{writable:true,value:this.canvasPointerup.bind(this)});o(this,b,{writable:true,value:this.canvasPointerdown.bind(this)});o(this,k,{writable:true,value:false});o(this,T,{writable:true,value:false});o(this,P,{writable:true,value:null});o(this,M,{writable:true,value:null});o(this,F,{writable:true,value:0});o(this,R,{writable:true,value:0});o(this,O,{writable:true,value:null});this.color=t.color||null;this.thickness=t.thickness||null;this.opacity=t.opacity||null;this.paths=[];this.bezierPath2D=[];this.currentPath=[];this.scaleFactor=1;this.translationX=this.translationY=0;this.x=0;this.y=0}static initialize(e){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(t=>[t,e.get(t)]))}static updateDefaultParams(t,e){switch(t){case _.AnnotationEditorParamsType.INK_THICKNESS:rt._defaultThickness=e;break;case _.AnnotationEditorParamsType.INK_COLOR:rt._defaultColor=e;break;case _.AnnotationEditorParamsType.INK_OPACITY:rt._defaultOpacity=e/100;break}}updateParams(t,e){switch(t){case _.AnnotationEditorParamsType.INK_THICKNESS:x(this,D,nt).call(this,e);break;case _.AnnotationEditorParamsType.INK_COLOR:x(this,I,st).call(this,e);break;case _.AnnotationEditorParamsType.INK_OPACITY:x(this,L,it).call(this,e);break}}static get defaultPropertiesToUpdate(){return[[_.AnnotationEditorParamsType.INK_THICKNESS,rt._defaultThickness],[_.AnnotationEditorParamsType.INK_COLOR,rt._defaultColor||n.AnnotationEditor._defaultLineColor],[_.AnnotationEditorParamsType.INK_OPACITY,Math.round(rt._defaultOpacity*100)]]}get propertiesToUpdate(){var t;return[[_.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||rt._defaultThickness],[_.AnnotationEditorParamsType.INK_COLOR,this.color||rt._defaultColor||n.AnnotationEditor._defaultLineColor],[_.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((t=this.opacity)!==null&&t!==void 0?t:rt._defaultOpacity))]]}rebuild(){super.rebuild();if(this.div===null){return}if(!this.canvas){x(this,z,ft).call(this);x(this,H,pt).call(this)}if(!this.isAttachedToDOM){this.parent.add(this);x(this,V,gt).call(this)}x(this,tt,wt).call(this)}remove(){if(this.canvas===null){return}if(!this.isEmpty()){this.commit()}this.canvas.width=this.canvas.height=0;this.canvas.remove();this.canvas=null;d(this,M).disconnect();A(this,M,null);super.remove()}enableEditMode(){if(d(this,k)||this.canvas===null){return}super.enableEditMode();this.div.draggable=false;this.canvas.addEventListener("pointerdown",d(this,b));this.canvas.addEventListener("pointerup",d(this,m))}disableEditMode(){if(!this.isInEditMode()||this.canvas===null){return}super.disableEditMode();this.div.draggable=!this.isEmpty();this.div.classList.remove("editing");this.canvas.removeEventListener("pointerdown",d(this,b));this.canvas.removeEventListener("pointerup",d(this,m))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){if(d(this,k)){return}super.commit();this.isEditing=false;this.disableEditMode();this.setInForeground();A(this,k,true);this.div.classList.add("disabled");x(this,tt,wt).call(this,true);this.parent.addInkEditorIfNeeded(true);this.parent.moveEditorInDOM(this);this.div.focus()}focusin(t){super.focusin(t);this.enableEditMode()}canvasPointerdown(t){if(t.button!==0||!this.isInEditMode()||d(this,k)){return}this.setInForeground();if(t.type!=="mouse"){this.div.focus()}t.stopPropagation();this.canvas.addEventListener("pointerleave",d(this,v));this.canvas.addEventListener("pointermove",d(this,g));x(this,U,lt).call(this,t.offsetX,t.offsetY)}canvasPointermove(t){t.stopPropagation();x(this,W,ct).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){if(t.button!==0){return}if(this.isInEditMode()&&this.currentPath.length!==0){t.stopPropagation();x(this,G,dt).call(this,t);this.setInBackground()}}canvasPointerleave(t){x(this,G,dt).call(this,t);this.setInBackground()}render(){if(this.div){return this.div}let t,e;if(this.width){t=this.x;e=this.y}super.render();rt._l10nPromise.get("editor_ink_aria_label").then(t=>{var e;return(e=this.div)===null||e===void 0?void 0:e.setAttribute("aria-label",t)});const[r,n,s,i]=x(this,N,at).call(this);this.setAt(r,n,0,0);this.setDims(s,i);x(this,z,ft).call(this);if(this.width){const[a,o]=this.parent.viewportBaseDimensions;this.setAt(t*a,e*o,this.width*a,this.height*o);A(this,T,true);x(this,V,gt).call(this);this.setDims(this.width*a,this.height*o);x(this,q,ut).call(this);x(this,et,Et).call(this);this.div.classList.add("disabled")}else{this.div.classList.add("editing");this.enableEditMode()}x(this,H,pt).call(this);return this.div}setDimensions(t,e){const r=Math.round(t);const n=Math.round(e);if(d(this,F)===r&&d(this,R)===n){return}A(this,F,r);A(this,R,n);this.canvas.style.visibility="hidden";if(d(this,w)&&Math.abs(d(this,w)-t/e)>.01){e=Math.ceil(t/d(this,w));this.setDims(t,e)}const[s,i]=this.parent.viewportBaseDimensions;this.width=t/s;this.height=e/i;if(d(this,k)){x(this,X,vt).call(this,t,e)}x(this,V,gt).call(this);x(this,q,ut).call(this);this.canvas.style.visibility="visible"}static deserialize(t,e){const s=super.deserialize(t,e);s.thickness=t.thickness;s.color=_.Util.makeHexColor(...t.color);s.opacity=t.opacity;const[r,n]=e.pageDimensions;const i=s.width*r;const a=s.height*n;const o=e.scaleFactor;const l=t.thickness/2;A(s,w,i/a);A(s,k,true);A(s,F,Math.round(i));A(s,R,Math.round(a));for(const{bezier:h}of t.paths){const u=[];s.paths.push(u);let r=o*(h[0]-l);let n=o*(a-h[1]-l);for(let t=2,e=h.length;t<e;t+=6){const f=o*(h[t]-l);const p=o*(a-h[t+1]-l);const g=o*(h[t+2]-l);const v=o*(a-h[t+3]-l);const m=o*(h[t+4]-l);const b=o*(a-h[t+5]-l);u.push([[r,n],[f,p],[g,v],[m,b]]);r=m;n=b}const d=y(this,rt,bt).call(this,u);s.bezierPath2D.push(d)}const c=x(s,Q,St).call(s);A(s,C,Math.max(S,c[2]-c[0]));A(s,E,Math.max(S,c[3]-c[1]));x(s,X,vt).call(s,i,a);return s}serialize(){if(this.isEmpty()){return null}const t=this.getRect(0,0);const e=this.rotation%180===0?t[3]-t[1]:t[2]-t[0];const r=n.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:_.AnnotationEditorType.INK,color:r,thickness:this.thickness,opacity:this.opacity,paths:x(this,Y,_t).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,e),pageIndex:this.parent.pageIndex,rect:t,rotation:this.rotation}}}e.InkEditor=rt;function nt(t){const e=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=t;x(this,tt,wt).call(this)},undo:()=>{this.thickness=e;x(this,tt,wt).call(this)},mustExec:true,type:_.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:true,keepUndo:true})}function st(t){const e=this.color;this.parent.addCommands({cmd:()=>{this.color=t;x(this,q,ut).call(this)},undo:()=>{this.color=e;x(this,q,ut).call(this)},mustExec:true,type:_.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:true,keepUndo:true})}function it(t){t/=100;const e=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=t;x(this,q,ut).call(this)},undo:()=>{this.opacity=e;x(this,q,ut).call(this)},mustExec:true,type:_.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:true,keepUndo:true})}function at(){const{width:t,height:e,rotation:r}=this.parent.viewport;switch(r){case 90:return[0,t,t,e];case 180:return[t,e,t,e];case 270:return[e,0,t,e];default:return[0,0,t,e]}}function ot(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor;this.ctx.lineCap="round";this.ctx.lineJoin="round";this.ctx.miterLimit=10;this.ctx.strokeStyle=`${this.color}${(0,s.opacityToHex)(this.opacity)}`}function lt(t,e){this.isEditing=true;if(!d(this,T)){var r;A(this,T,true);x(this,V,gt).call(this);this.thickness||(this.thickness=rt._defaultThickness);this.color||(this.color=rt._defaultColor||n.AnnotationEditor._defaultLineColor);(r=this.opacity)!==null&&r!==void 0?r:this.opacity=rt._defaultOpacity}this.currentPath.push([t,e]);A(this,P,null);x(this,j,ot).call(this);this.ctx.beginPath();this.ctx.moveTo(t,e);A(this,O,()=>{if(!d(this,O)){return}if(d(this,P)){if(this.isEmpty()){this.ctx.setTransform(1,0,0,1,0,0);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}else{x(this,q,ut).call(this)}this.ctx.lineTo(...d(this,P));A(this,P,null);this.ctx.stroke()}window.requestAnimationFrame(d(this,O))});window.requestAnimationFrame(d(this,O))}function ct(t,e){const[r,n]=this.currentPath.at(-1);if(t===r&&e===n){return}this.currentPath.push([t,e]);A(this,P,[t,e])}function ht(t,e){this.ctx.closePath();A(this,O,null);t=Math.min(Math.max(t,0),this.canvas.width);e=Math.min(Math.max(e,0),this.canvas.height);const[r,n]=this.currentPath.at(-1);if(t!==r||e!==n){this.currentPath.push([t,e])}let s;if(this.currentPath.length!==1){s=(0,c.fitCurve)(this.currentPath,30,null)}else{const l=[t,e];s=[[l,l.slice(),l.slice(),l]]}const i=y(rt,rt,bt).call(rt,s);this.currentPath.length=0;const a=()=>{this.paths.push(s);this.bezierPath2D.push(i);this.rebuild()};const o=()=>{this.paths.pop();this.bezierPath2D.pop();if(this.paths.length===0){this.remove()}else{if(!this.canvas){x(this,z,ft).call(this);x(this,H,pt).call(this)}x(this,tt,wt).call(this)}};this.parent.addCommands({cmd:a,undo:o,mustExec:true})}function ut(){if(this.isEmpty()){x(this,$,mt).call(this);return}x(this,j,ot).call(this);const{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0);e.clearRect(0,0,t.width,t.height);x(this,$,mt).call(this);for(const r of this.bezierPath2D){e.stroke(r)}}function dt(t){x(this,B,ht).call(this,t.offsetX,t.offsetY);this.canvas.removeEventListener("pointerleave",d(this,v));this.canvas.removeEventListener("pointermove",d(this,g));this.parent.addToAnnotationStorage(this)}function ft(){this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=0;this.canvas.className="inkEditorCanvas";rt._l10nPromise.get("editor_ink_canvas_aria_label").then(t=>{var e;return(e=this.canvas)===null||e===void 0?void 0:e.setAttribute("aria-label",t)});this.div.append(this.canvas);this.ctx=this.canvas.getContext("2d")}function pt(){A(this,M,new ResizeObserver(t=>{const e=t[0].contentRect;if(e.width&&e.height){this.setDimensions(e.width,e.height)}}));d(this,M).observe(this.div)}function gt(){if(!d(this,T)){return}const[t,e]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*t);this.canvas.height=Math.ceil(this.height*e);x(this,$,mt).call(this)}function vt(t,e){const r=x(this,Z,xt).call(this);const n=(t-r)/d(this,C);const s=(e-r)/d(this,E);this.scaleFactor=Math.min(n,s)}function mt(){const t=x(this,Z,xt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}function bt(r){const n=new Path2D;for(let t=0,e=r.length;t<e;t++){const[s,i,a,o]=r[t];if(t===0){n.moveTo(...s)}n.bezierCurveTo(i[0],i[1],a[0],a[1],o[0],o[1])}return n}function _t(r,n,s,i){const a=4;const t=[];const o=this.thickness/2;let l,c;for(const h of this.paths){l=[];c=[];for(let t=0,e=h.length;t<e;t++){const[u,d,f,p]=h[t];const g=r*(u[0]+n)+o;const v=i-r*(u[1]+s)-o;const m=r*(d[0]+n)+o;const b=i-r*(d[1]+s)-o;const _=r*(f[0]+n)+o;const y=i-r*(f[1]+s)-o;const A=r*(p[0]+n)+o;const S=i-r*(p[1]+s)-o;if(t===0){l.push(g,v);c.push(g,v)}l.push(m,b,_,y,A,S);x(this,K,yt).call(this,g,v,m,b,_,y,A,S,a,c)}t.push({bezier:l,points:c})}return t}function yt(i,a,o,l,c,h,u,d,f,p){if(x(this,J,At).call(this,i,a,o,l,c,h,u,d)){p.push(u,d);return}for(let s=1;s<f-1;s++){const g=s/f;const v=1-g;let t=g*i+v*o;let e=g*a+v*l;let r=g*o+v*c;let n=g*l+v*h;const m=g*c+v*u;const b=g*h+v*d;t=g*t+v*r;e=g*e+v*n;r=g*r+v*m;n=g*n+v*b;t=g*t+v*r;e=g*e+v*n;p.push(t,e)}p.push(u,d)}function At(t,e,r,n,s,i,a,o){const l=10;const c=(3*r-2*t-a)**2;const h=(3*n-2*e-o)**2;const u=(3*s-t-2*a)**2;const d=(3*i-e-2*o)**2;return Math.max(c,u)+Math.max(h,d)<=l}function St(){let t=Infinity;let e=-Infinity;let r=Infinity;let n=-Infinity;for(const s of this.paths){for(const[i,a,o,l]of s){const c=_.Util.bezierBoundingBox(...i,...a,...o,...l);t=Math.min(t,c[0]);r=Math.min(r,c[1]);e=Math.max(e,c[2]);n=Math.max(n,c[3])}}return[t,r,e,n]}function xt(){return d(this,k)?Math.ceil(this.thickness*this.parent.scaleFactor):0}function wt(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.isEmpty()){return}if(!d(this,k)){x(this,q,ut).call(this);return}const e=x(this,Q,St).call(this);const r=x(this,Z,xt).call(this);A(this,C,Math.max(S,e[2]-e[0]));A(this,E,Math.max(S,e[3]-e[1]));const n=Math.ceil(r+d(this,C)*this.scaleFactor);const s=Math.ceil(r+d(this,E)*this.scaleFactor);const[i,a]=this.parent.viewportBaseDimensions;this.width=n/i;this.height=s/a;A(this,w,n/s);x(this,et,Et).call(this);const o=this.translationX;const l=this.translationY;this.translationX=-e[0];this.translationY=-e[1];x(this,V,gt).call(this);x(this,q,ut).call(this);A(this,F,n);A(this,R,s);this.setDims(n,s);const c=t?r/this.scaleFactor/2:0;this.translate(o-this.translationX-c,l-this.translationY-c)}function Et(){const{style:t}=this.div;if(d(this,w)>=1){t.minHeight=`${S}px`;t.minWidth=`${Math.round(d(this,w)*S)}px`}else{t.minWidth=`${S}px`;t.minHeight=`${Math.round(S/d(this,w))}px`}}a(rt,"_defaultColor",null);a(rt,"_defaultOpacity",1);a(rt,"_defaultThickness",1);a(rt,"_l10nPromise",void 0);a(rt,"_type","ink")},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.fitCurve=void 0;const n=r(151);e.fitCurve=n},t=>{"use strict";function e(n,t,e){if(!Array.isArray(n)){throw new TypeError("First argument should be an array")}n.forEach(t=>{if(!Array.isArray(t)||t.some(t=>typeof t!=="number")||t.length!==n[0].length){throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}});n=n.filter((t,r)=>r===0||!t.every((t,e)=>t===n[r-1][e]));if(n.length<2){return[]}const r=n.length;const s=a(n[1],n[0]);const i=a(n[r-2],n[r-1]);return _(n,s,i,t,e)}function _(t,e,r,n,s){const i=20;var a,o,l,c,h,u,d,f,p,g,v,m,b;if(t.length===2){m=x.vectorLen(x.subtract(t[0],t[1]))/3;a=[t[0],x.addArrays(t[0],x.mulItems(e,m)),x.addArrays(t[1],x.mulItems(r,m)),t[1]];return[a]}o=S(t);[a,c,u]=y(t,o,o,e,r,s);if(c===0||c<n){return[a]}if(c<n*n){l=o;h=c;d=u;for(b=0;b<i;b++){l=A(a,t,l);[a,c,u]=y(t,o,l,e,r,s);if(c<n){return[a]}else if(u===d){let t=c/h;if(t>.9999&&t<1.0001){break}}h=c;d=u}}v=[];f=x.subtract(t[u-1],t[u+1]);if(f.every(t=>t===0)){f=x.subtract(t[u-1],t[u]);[f[0],f[1]]=[-f[1],f[0]]}p=x.normalize(f);g=x.mulItems(p,-1);v=v.concat(_(t.slice(0,u+1),e,p,n,s));v=v.concat(_(t.slice(u),g,r,n,s));return v}function y(t,e,r,n,s,i){var a,o,l;a=c(t,r,n,s,i);[o,l]=h(t,a,e);if(i){i({bez:a,points:t,params:e,maxErr:o,maxPoint:l})}return[a,o,l]}function c(t,e,r,n){var s,i,a,o,l,c,h,u,d,f,p,g,v,m,b,_,y,A=t[0],S=t[t.length-1];s=[A,null,null,S];i=x.zeros_Xx2x2(e.length);for(v=0,m=e.length;v<m;v++){_=e[v];y=1-_;a=i[v];a[0]=x.mulItems(r,3*_*(y*y));a[1]=x.mulItems(n,3*y*(_*_))}o=[[0,0],[0,0]];l=[0,0];for(v=0,m=t.length;v<m;v++){_=e[v];a=i[v];o[0][0]+=x.dot(a[0],a[0]);o[0][1]+=x.dot(a[0],a[1]);o[1][0]+=x.dot(a[0],a[1]);o[1][1]+=x.dot(a[1],a[1]);b=x.subtract(t[v],w.q([A,A,S,S],_));l[0]+=x.dot(a[0],b);l[1]+=x.dot(a[1],b)}c=o[0][0]*o[1][1]-o[1][0]*o[0][1];h=o[0][0]*l[1]-o[1][0]*l[0];u=l[0]*o[1][1]-l[1]*o[0][1];d=c===0?0:u/c;f=c===0?0:h/c;g=x.vectorLen(x.subtract(A,S));p=1e-6*g;if(d<p||f<p){s[1]=x.addArrays(A,x.mulItems(r,g/3));s[2]=x.addArrays(S,x.mulItems(n,g/3))}else{s[1]=x.addArrays(A,x.mulItems(r,d));s[2]=x.addArrays(S,x.mulItems(n,f))}return s}function A(r,n,t){return t.map((t,e)=>s(r,n[e],t))}function s(t,e,r){var n=x.subtract(w.q(t,r),e),s=w.qprime(t,r),i=x.mulMatrix(n,s),a=x.sum(x.squareItems(s))+2*x.mulMatrix(n,w.qprimeprime(t,r));if(a===0){return r}else{return r-i/a}}function S(t){var r=[],n,s,i;t.forEach((t,e)=>{n=e?s+x.vectorLen(x.subtract(t,i)):0;r.push(n);s=n;i=t});r=r.map(t=>t/s);return r}function h(t,e,r){var n,s,i,a,o,l,c,h;s=0;i=Math.floor(t.length/2);const u=d(e,10);for(o=0,l=t.length;o<l;o++){c=t[o];h=f(e,r[o],u,10);a=x.subtract(w.q(e,h),c);n=a[0]*a[0]+a[1]*a[1];if(n>s){s=n;i=o}}return[s,i]}var d=function(t,e){var r;var n=[0];var s=t[0];var i=0;for(var a=1;a<=e;a++){r=w.q(t,a/e);i+=x.vectorLen(x.subtract(r,s));n.push(i);s=r}n=n.map(t=>t/i);return n};function f(t,e,r,n){if(e<0){return 0}if(e>1){return 1}var s,i,a,o,l;for(var c=1;c<=n;c++){if(e<=r[c]){o=(c-1)/n;a=c/n;i=r[c-1];s=r[c];l=(e-i)/(s-i)*(a-o)+o;break}}return l}function a(t,e){return x.normalize(x.subtract(t,e))}class x{static zeros_Xx2x2(t){var e=[];while(t--){e.push([0,0])}return e}static mulItems(t,e){return t.map(t=>t*e)}static mulMatrix(t,n){return t.reduce((t,e,r)=>t+e*n[r],0)}static subtract(t,r){return t.map((t,e)=>t-r[e])}static addArrays(t,r){return t.map((t,e)=>t+r[e])}static addItems(t,e){return t.map(t=>t+e)}static sum(t){return t.reduce((t,e)=>t+e)}static dot(t,e){return x.mulMatrix(t,e)}static vectorLen(t){return Math.hypot(...t)}static divItems(t,e){return t.map(t=>t/e)}static squareItems(t){return t.map(t=>t*t)}static normalize(t){return this.divItems(t,this.vectorLen(t))}}class w{static q(t,e){var r=1-e;var n=x.mulItems(t[0],r*r*r),s=x.mulItems(t[1],3*r*r*e),i=x.mulItems(t[2],3*r*e*e),a=x.mulItems(t[3],e*e*e);return x.addArrays(x.addArrays(n,s),x.addArrays(i,a))}static qprime(t,e){var r=1-e;var n=x.mulItems(x.subtract(t[1],t[0]),3*r*r),s=x.mulItems(x.subtract(t[2],t[1]),6*r*e),i=x.mulItems(x.subtract(t[3],t[2]),3*e*e);return x.addArrays(x.addArrays(n,s),i)}static qprimeprime(t,e){return x.addArrays(x.mulItems(x.addArrays(x.subtract(t[2],x.mulItems(t[1],2)),t[0]),6*(1-e)),x.mulItems(x.addArrays(x.subtract(t[3],x.mulItems(t[2],2)),t[1]),6*e))}}t.exports=e;t.exports.fitCubic=_;t.exports.createTangent=a},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AnnotationLayer=void 0;var _=r(1);var p=r(133);var d=r(130);var s=r(153);var g=r(154);function f(t,e,r){n(t,e);return r}function n(t,e){if(t!==e){throw new TypeError("Private static access of wrong provenance")}}const v=1e3;const c=9;const m=new WeakSet;function y(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class b{static create(t){const e=t.data.annotationType;switch(e){case _.AnnotationType.LINK:return new a(t);case _.AnnotationType.TEXT:return new o(t);case _.AnnotationType.WIDGET:const r=t.data.fieldType;switch(r){case"Tx":return new h(t);case"Btn":if(t.data.radioButton){return new A(t)}else if(t.data.checkBox){return new u(t)}return new S(t);case"Ch":return new x(t)}return new l(t);case _.AnnotationType.POPUP:return new w(t);case _.AnnotationType.FREETEXT:return new C(t);case _.AnnotationType.LINE:return new k(t);case _.AnnotationType.SQUARE:return new T(t);case _.AnnotationType.CIRCLE:return new P(t);case _.AnnotationType.POLYLINE:return new M(t);case _.AnnotationType.CARET:return new R(t);case _.AnnotationType.INK:return new O(t);case _.AnnotationType.POLYGON:return new F(t);case _.AnnotationType.HIGHLIGHT:return new D(t);case _.AnnotationType.UNDERLINE:return new I(t);case _.AnnotationType.SQUIGGLY:return new L(t);case _.AnnotationType.STRIKEOUT:return new N(t);case _.AnnotationType.STAMP:return new j(t);case _.AnnotationType.FILEATTACHMENT:return new U(t);default:return new i(t)}}}class i{constructor(t){let{isRenderable:e=false,ignoreBorder:r=false,createQuadrilaterals:n=false}=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.isRenderable=e;this.data=t.data;this.layer=t.layer;this.page=t.page;this.viewport=t.viewport;this.linkService=t.linkService;this.downloadManager=t.downloadManager;this.imageResourcesPath=t.imageResourcesPath;this.renderForms=t.renderForms;this.svgFactory=t.svgFactory;this.annotationStorage=t.annotationStorage;this.enableScripting=t.enableScripting;this.hasJSActions=t.hasJSActions;this._fieldObjects=t.fieldObjects;this._mouseState=t.mouseState;if(e){this.container=this._createContainer(r)}if(n){this.quadrilaterals=this._createQuadrilaterals(r)}}_createContainer(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;const e=this.data,r=this.page,n=this.viewport;const s=document.createElement("section");const{width:i,height:a}=y(e.rect);const[o,l,c,h]=n.viewBox;const u=c-o;const d=h-l;s.setAttribute("data-annotation-id",e.id);const f=_.Util.normalizeRect([e.rect[0],r.view[3]-e.rect[1]+r.view[1],e.rect[2],r.view[3]-e.rect[3]+r.view[1]]);if(!t&&e.borderStyle.width>0){s.style.borderWidth=`${e.borderStyle.width}px`;const g=e.borderStyle.horizontalCornerRadius;const v=e.borderStyle.verticalCornerRadius;if(g>0||v>0){const b=`calc(${g}px * var(--scale-factor)) / calc(${v}px * var(--scale-factor))`;s.style.borderRadius=b}else if(this instanceof A){const b=`calc(${i}px * var(--scale-factor)) / calc(${a}px * var(--scale-factor))`;s.style.borderRadius=b}switch(e.borderStyle.style){case _.AnnotationBorderStyleType.SOLID:s.style.borderStyle="solid";break;case _.AnnotationBorderStyleType.DASHED:s.style.borderStyle="dashed";break;case _.AnnotationBorderStyleType.BEVELED:(0,_.warn)("Unimplemented border style: beveled");break;case _.AnnotationBorderStyleType.INSET:(0,_.warn)("Unimplemented border style: inset");break;case _.AnnotationBorderStyleType.UNDERLINE:s.style.borderBottomStyle="solid";break;default:break}const m=e.borderColor||null;if(m){s.style.borderColor=_.Util.makeHexColor(m[0]|0,m[1]|0,m[2]|0)}else{s.style.borderWidth=0}}s.style.left=`${100*(f[0]-o)/u}%`;s.style.top=`${100*(f[1]-l)/d}%`;const{rotation:p}=e;if(e.hasOwnCanvas||p===0){s.style.width=`${100*i/u}%`;s.style.height=`${100*a/d}%`}else{this.setRotation(p,s)}return s}setRotation(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.container;const[r,n,s,i]=this.viewport.viewBox;const a=s-r;const o=i-n;const{width:l,height:c}=y(this.data.rect);let h,u;if(t%180===0){h=100*l/a;u=100*c/o}else{h=100*c/a;u=100*l/o}e.style.width=`${h}%`;e.style.height=`${u}%`;e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const e=(t,e,r)=>{const n=r.detail[t];r.target.style[e]=s.ColorConverters[`${n[0]}_HTML`](n.slice(1))};return(0,_.shadow)(this,"_commonActions",{display:t=>{const e=t.detail.display%2===1;this.container.style.visibility=e?"hidden":"visible";this.annotationStorage.setValue(this.data.id,{hidden:e,print:t.detail.display===0||t.detail.display===3})},print:t=>{this.annotationStorage.setValue(this.data.id,{print:t.detail.print})},hidden:t=>{this.container.style.visibility=t.detail.hidden?"hidden":"visible";this.annotationStorage.setValue(this.data.id,{hidden:t.detail.hidden})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:false}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{if(t.detail.readonly){t.target.setAttribute("readonly","")}else{t.target.removeAttribute("readonly")}},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const e=t.detail.rotation;this.setRotation(e);this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const r=this._commonActions;for(const n of Object.keys(e.detail)){const s=t[n]||r[n];if(s){s(e)}}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting){return}const e=this.annotationStorage.getRawValue(this.data.id);if(!e){return}const r=this._commonActions;for(const[n,s]of Object.entries(e)){const i=r[n];if(i){const a={detail:{[n]:s},target:t};i(a);delete e[n]}}}_createQuadrilaterals(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!this.data.quadPoints){return null}const e=[];const r=this.data.rect;for(const n of this.data.quadPoints){this.data.rect=[n[2].x,n[2].y,n[1].x,n[1].y];e.push(this._createContainer(t))}this.data.rect=r;return e}_createPopup(t,e){let r=this.container;if(this.quadrilaterals){t=t||this.quadrilaterals;r=this.quadrilaterals[0]}if(!t){t=document.createElement("div");t.className="popupTriggerArea";r.append(t)}const n=new E({container:r,trigger:t,color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,hideWrapper:true});const s=n.render();s.style.left="100%";r.append(s)}_renderQuadrilaterals(t){for(const e of this.quadrilaterals){e.className=t}return this.quadrilaterals}render(){(0,_.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;const r=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n){for(const{page:s,id:i,exportValues:a}of n){if(s===-1){continue}if(i===e){continue}const o=typeof a==="string"?a:null;const l=document.querySelector(`[data-element-id="${i}"]`);if(l&&!m.has(l)){(0,_.warn)(`_getElementsByName - element not allowed: ${i}`);continue}r.push({id:i,exportValue:o,domElement:l})}}return r}for(const l of document.getElementsByName(t)){const{id:i,exportValue:o}=l;if(i===e){continue}if(!m.has(l)){continue}r.push({id:i,exportValue:o,domElement:l})}return r}static get platform(){const t=typeof navigator!=="undefined"?navigator.platform:"";return(0,_.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}class a extends i{constructor(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;super(t,{isRenderable:true,ignoreBorder:!!(e!==null&&e!==void 0&&e.ignoreBorder),createQuadrilaterals:true});this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this;const n=document.createElement("a");n.setAttribute("data-element-id",t.id);let r=false;if(t.url){e.addLinkAttributes(n,t.url,t.newWindow);r=true}else if(t.action){this._bindNamedAction(n,t.action);r=true}else if(t.dest){this._bindLink(n,t.dest);r=true}else{if(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions){this._bindJSAction(n,t);r=true}if(t.resetForm){this._bindResetFormAction(n,t.resetForm);r=true}else if(this.isTooltipOnly&&!r){this._bindLink(n,"");r=true}}if(this.quadrilaterals){return this._renderQuadrilaterals("linkAnnotation").map((t,e)=>{const r=e===0?n:n.cloneNode();t.append(r);return t})}this.container.className="linkAnnotation";if(r){this.container.append(n)}return this.container}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e);t.onclick=()=>{if(e){this.linkService.goToDestination(e)}return false};if(e||e===""){t.className="internalLink"}}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl("");t.onclick=()=>{this.linkService.executeNamedAction(e);return false};t.className="internalLink"}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const n of Object.keys(e.actions)){const s=r.get(n);if(!s){continue}t[s]=()=>{var t;(t=this.linkService.eventBus)===null||t===void 0?void 0:t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:n}});return false}}if(!t.onclick){t.onclick=()=>false}t.className="internalLink"}_bindResetFormAction(t,p){const g=t.onclick;if(!g){t.href=this.linkService.getAnchorUrl("")}t.className="internalLink";if(!this._fieldObjects){(0,_.warn)(`_bindResetFormAction - "resetForm" action not supported, `+"ensure that the `fieldObjects` parameter is provided.");if(!g){t.onclick=()=>false}return}t.onclick=()=>{if(g){g()}const{fields:t,refs:e,include:r}=p;const n=[];if(t.length!==0||e.length!==0){const o=new Set(e);for(const l of t){const c=this._fieldObjects[l]||[];for(const{id:h}of c){o.add(h)}}for(const c of Object.values(this._fieldObjects)){for(const u of c){if(o.has(u.id)===r){n.push(u)}}}}else{for(const c of Object.values(this._fieldObjects)){n.push(...c)}}const s=this.annotationStorage;const i=[];for(const u of n){const{id:h}=u;i.push(h);switch(u.type){case"text":{const f=u.defaultValue||"";s.setValue(h,{value:f});break}case"checkbox":case"radiobutton":{const f=u.defaultValue===u.exportValues;s.setValue(h,{value:f});break}case"combobox":case"listbox":{const f=u.defaultValue||"";s.setValue(h,{value:f});break}default:continue}const d=document.querySelector(`[data-element-id="${h}"]`);if(!d){continue}else if(!m.has(d)){(0,_.warn)(`_bindResetFormAction - element not allowed: ${h}`);continue}d.dispatchEvent(new Event("resetform"))}if(this.enableScripting){var a;(a=this.linkService.eventBus)===null||a===void 0?void 0:a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:i,name:"ResetForm"}})}return false}}}class o extends i{constructor(t){var e,r,n;const s=!!(t.data.hasPopup||(e=t.data.titleObj)!==null&&e!==void 0&&e.str||(r=t.data.contentsObj)!==null&&r!==void 0&&r.str||(n=t.data.richText)!==null&&n!==void 0&&n.str);super(t,{isRenderable:s})}render(){this.container.className="textAnnotation";const t=document.createElement("img");t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg";t.alt="[{{type}} Annotation]";t.dataset.l10nId="text_annotation_type";t.dataset.l10nArgs=JSON.stringify({type:this.data.name});if(!this.data.hasPopup){this._createPopup(t,this.data)}this.container.append(t);return this.container}}class l extends i{render(){if(this.data.alternativeText){this.container.title=this.data.alternativeText}return this.container}_getKeyModifier(t){const{isWin:e,isMac:r}=i.platform;return e&&t.ctrlKey||r&&t.metaKey}_setEventListener(t,e,r,n){if(e.includes("mouse")){t.addEventListener(e,t=>{var e;(e=this.linkService.eventBus)===null||e===void 0?void 0:e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:n(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})})}else{t.addEventListener(e,t=>{var e;(e=this.linkService.eventBus)===null||e===void 0?void 0:e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:n(t)}})})}}_setEventListeners(t,e,r){for(const[s,i]of e){var n;if(i==="Action"||(n=this.data.actions)!==null&&n!==void 0&&n[i]){this._setEventListener(t,s,i,r)}}}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":_.Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"];const{fontColor:r}=this.data.defaultAppearanceData;const n=this.data.defaultAppearanceData.fontSize||c;const s=t.style;let i;if(this.data.multiLine){const a=Math.abs(this.data.rect[3]-this.data.rect[1]);const o=Math.round(a/(_.LINE_FACTOR*n))||1;const l=a/o;i=Math.min(n,Math.round(l/_.LINE_FACTOR))}else{const a=Math.abs(this.data.rect[3]-this.data.rect[1]);i=Math.min(n,Math.round(a/_.LINE_FACTOR))}s.fontSize=`calc(${i}px * var(--scale-factor))`;s.color=_.Util.makeHexColor(r[0],r[1],r[2]);if(this.data.textAlignment!==null){s.textAlign=e[this.data.textAlignment]}}_setRequired(t,e){if(e){t.setAttribute("required",true)}else{t.removeAttribute("required")}t.setAttribute("aria-required",e)}}class h extends l{constructor(t){const e=t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,r,n){const s=this.annotationStorage;for(const i of this._getElementsByName(t.name,t.id)){if(i.domElement){i.domElement[e]=r}s.setValue(i.id,{[n]:r})}}render(){const i=this.annotationStorage;const h=this.data.id;this.container.className="textWidgetAnnotation";let n=null;if(this.renderForms){const s=i.getValue(h,{value:this.data.fieldValue});let t=s.formattedValue||s.value||"";const a=i.getValue(h,{charLimit:this.data.maxLen}).charLimit;if(a&&t.length>a){t=t.slice(0,a)}const o={userValue:t,formattedValue:null,valueOnFocus:""};if(this.data.multiLine){n=document.createElement("textarea");n.textContent=t;if(this.data.doNotScroll){n.style.overflowY="hidden"}}else{n=document.createElement("input");n.type="text";n.setAttribute("value",t);if(this.data.doNotScroll){n.style.overflowX="hidden"}}m.add(n);n.setAttribute("data-element-id",h);n.disabled=this.data.readOnly;n.name=this.data.fieldName;n.tabIndex=v;this._setRequired(n,this.data.required);if(a){n.maxLength=a}n.addEventListener("input",t=>{i.setValue(h,{value:t.target.value});this.setPropertyOnSiblings(n,"value",t.target.value,"value")});n.addEventListener("resetform",t=>{var e;const r=(e=this.data.defaultFieldValue)!==null&&e!==void 0?e:"";n.value=o.userValue=r;o.formattedValue=null});let e=t=>{const{formattedValue:e}=o;if(e!==null&&e!==undefined){t.target.value=e}t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var r;n.addEventListener("focus",t=>{if(o.userValue){t.target.value=o.userValue}o.valueOnFocus=t.target.value});n.addEventListener("updatefromsandbox",t=>{const e={value(t){var e;o.userValue=(e=t.detail.value)!==null&&e!==void 0?e:"";i.setValue(h,{value:o.userValue.toString()});t.target.value=o.userValue},formattedValue(t){const{formattedValue:e}=t.detail;o.formattedValue=e;if(e!==null&&e!==undefined&&t.target!==document.activeElement){t.target.value=e}i.setValue(h,{formattedValue:e})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:t=>{var e;const{charLimit:r}=t.detail;const{target:n}=t;if(r===0){n.removeAttribute("maxLength");return}n.setAttribute("maxLength",r);let s=o.userValue;if(!s||s.length<=r){return}s=s.slice(0,r);n.value=o.userValue=s;i.setValue(h,{value:s});(e=this.linkService.eventBus)===null||e===void 0?void 0:e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:s,willCommit:true,commitKey:1,selStart:n.selectionStart,selEnd:n.selectionEnd}})}};this._dispatchEventFromSandbox(e,t)});n.addEventListener("keydown",t=>{var e;let r=-1;if(t.key==="Escape"){r=0}else if(t.key==="Enter"){r=2}else if(t.key==="Tab"){r=3}if(r===-1){return}const{value:n}=t.target;if(o.valueOnFocus===n){return}o.userValue=n;(e=this.linkService.eventBus)===null||e===void 0?void 0:e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:n,willCommit:true,commitKey:r,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}})});const l=e;e=null;n.addEventListener("blur",t=>{const{value:e}=t.target;o.userValue=e;if(this._mouseState.isDown&&o.valueOnFocus!==e){var r;(r=this.linkService.eventBus)===null||r===void 0?void 0:r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:e,willCommit:true,commitKey:1,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}})}l(t)});if((r=this.data.actions)!==null&&r!==void 0&&r.Keystroke){n.addEventListener("beforeinput",t=>{var e;const{data:r,target:n}=t;const{value:s,selectionStart:i,selectionEnd:a}=n;let o=i,l=a;switch(t.inputType){case"deleteWordBackward":{const c=s.substring(0,i).match(/\w*[^\w]*$/);if(c){o-=c[0].length}break}case"deleteWordForward":{const c=s.substring(i).match(/^[^\w]*\w*/);if(c){l+=c[0].length}break}case"deleteContentBackward":if(i===a){o-=1}break;case"deleteContentForward":if(i===a){l+=1}break}t.preventDefault();(e=this.linkService.eventBus)===null||e===void 0?void 0:e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:s,change:r||"",willCommit:false,selStart:o,selEnd:l}})})}this._setEventListeners(n,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.value)}if(e){n.addEventListener("blur",e)}if(this.data.comb){const c=this.data.rect[2]-this.data.rect[0];const u=c/a;n.classList.add("comb");n.style.letterSpacing=`calc(${u}px * var(--scale-factor) - 1ch)`}}else{n=document.createElement("div");n.textContent=this.data.fieldValue;n.style.verticalAlign="middle";n.style.display="table-cell"}this._setTextStyle(n);this._setBackgroundColor(n);this._setDefaultPropertiesFromJS(n);this.container.append(n);return this.container}}class u extends l{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const i=this.annotationStorage;const a=this.data;const o=a.id;let t=i.getValue(o,{value:a.exportValue===a.fieldValue}).value;if(typeof t==="string"){t=t!=="Off";i.setValue(o,{value:t})}this.container.className="buttonWidgetAnnotation checkBox";const e=document.createElement("input");m.add(e);e.setAttribute("data-element-id",o);e.disabled=a.readOnly;this._setRequired(e,this.data.required);e.type="checkbox";e.name=a.fieldName;if(t){e.setAttribute("checked",true)}e.setAttribute("exportValue",a.exportValue);e.tabIndex=v;e.addEventListener("change",t=>{const{name:e,checked:r}=t.target;for(const n of this._getElementsByName(e,o)){const s=r&&n.exportValue===a.exportValue;if(n.domElement){n.domElement.checked=s}i.setValue(n.id,{value:s})}i.setValue(o,{value:r})});e.addEventListener("resetform",t=>{const e=a.defaultFieldValue||"Off";t.target.checked=e===a.exportValue});if(this.enableScripting&&this.hasJSActions){e.addEventListener("updatefromsandbox",t=>{const e={value(t){t.target.checked=t.detail.value!=="Off";i.setValue(o,{value:t.target.checked})}};this._dispatchEventFromSandbox(e,t)});this._setEventListeners(e,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.checked)}this._setBackgroundColor(e);this._setDefaultPropertiesFromJS(e);this.container.append(e);return this.container}}class A extends l{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const s=this.annotationStorage;const r=this.data;const i=r.id;let t=s.getValue(i,{value:r.fieldValue===r.buttonValue}).value;if(typeof t==="string"){t=t!==r.buttonValue;s.setValue(i,{value:t})}const e=document.createElement("input");m.add(e);e.setAttribute("data-element-id",i);e.disabled=r.readOnly;this._setRequired(e,this.data.required);e.type="radio";e.name=r.fieldName;if(t){e.setAttribute("checked",true)}e.tabIndex=v;e.addEventListener("change",t=>{const{name:e,checked:r}=t.target;for(const n of this._getElementsByName(e,i)){s.setValue(n.id,{value:false})}s.setValue(i,{value:r})});e.addEventListener("resetform",t=>{const e=r.defaultFieldValue;t.target.checked=e!==null&&e!==undefined&&e===r.buttonValue});if(this.enableScripting&&this.hasJSActions){const a=r.buttonValue;e.addEventListener("updatefromsandbox",t=>{const e={value:t=>{const e=a===t.detail.value;for(const r of this._getElementsByName(t.target.name)){const n=e&&r.id===i;if(r.domElement){r.domElement.checked=n}s.setValue(r.id,{value:n})}}};this._dispatchEventFromSandbox(e,t)});this._setEventListeners(e,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.checked)}this._setBackgroundColor(e);this._setDefaultPropertiesFromJS(e);this.container.append(e);return this.container}}class S extends a{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.className="buttonWidgetAnnotation pushButton";if(this.data.alternativeText){t.title=this.data.alternativeText}const e=t.lastChild;if(this.enableScripting&&this.hasJSActions&&e){this._setDefaultPropertiesFromJS(e);e.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({},t)})}return t}}class x extends l{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const a=this.annotationStorage;const o=this.data.id;const t=a.getValue(o,{value:this.data.fieldValue});const l=document.createElement("select");m.add(l);l.setAttribute("data-element-id",o);l.disabled=this.data.readOnly;this._setRequired(l,this.data.required);l.name=this.data.fieldName;l.tabIndex=v;let e=this.data.combo&&this.data.options.length>0;if(!this.data.combo){l.size=this.data.options.length;if(this.data.multiSelect){l.multiple=true}}l.addEventListener("resetform",t=>{const e=this.data.defaultFieldValue;for(const r of l.options){r.selected=r.value===e}});for(const r of this.data.options){const n=document.createElement("option");n.textContent=r.displayValue;n.value=r.exportValue;if(t.value.includes(r.exportValue)){n.setAttribute("selected",true);e=false}l.append(n)}let s=null;if(e){const i=document.createElement("option");i.value=" ";i.setAttribute("hidden",true);i.setAttribute("selected",true);l.prepend(i);s=()=>{i.remove();l.removeEventListener("input",s);s=null};l.addEventListener("input",s)}const c=(t,e)=>{const r=e?"value":"textContent";const n=t.target.options;if(!t.target.multiple){return n.selectedIndex===-1?null:n[n.selectedIndex][r]}return Array.prototype.filter.call(n,t=>t.selected).map(t=>t[r])};const h=t=>{const e=t.target.options;return Array.prototype.map.call(e,t=>{return{displayValue:t.textContent,exportValue:t.value}})};if(this.enableScripting&&this.hasJSActions){l.addEventListener("updatefromsandbox",t=>{const e={value(t){var e;(e=s)===null||e===void 0?void 0:e();const r=t.detail.value;const n=new Set(Array.isArray(r)?r:[r]);for(const t of l.options){t.selected=n.has(t.value)}a.setValue(o,{value:c(t,true)})},multipleSelection(t){l.multiple=true},remove(t){const e=l.options;const r=t.detail.remove;e[r].selected=false;l.remove(r);if(e.length>0){const n=Array.prototype.findIndex.call(e,t=>t.selected);if(n===-1){e[0].selected=true}}a.setValue(o,{value:c(t,true),items:h(t)})},clear(t){while(l.length!==0){l.remove(0)}a.setValue(o,{value:null,items:[]})},insert(t){const{index:e,displayValue:r,exportValue:n}=t.detail.insert;const s=l.children[e];const i=document.createElement("option");i.textContent=r;i.value=n;if(s){s.before(i)}else{l.append(i)}a.setValue(o,{value:c(t,true),items:h(t)})},items(t){const{items:e}=t.detail;while(l.length!==0){l.remove(0)}for(const r of e){const{displayValue:n,exportValue:s}=r;const t=document.createElement("option");t.textContent=n;t.value=s;l.append(t)}if(l.options.length>0){l.options[0].selected=true}a.setValue(o,{value:c(t,true),items:h(t)})},indices(e){const r=new Set(e.detail.indices);for(const t of e.target.options){t.selected=r.has(t.index)}a.setValue(o,{value:c(e,true)})},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(e,t)});l.addEventListener("input",t=>{var e;const r=c(t,true);const n=c(t,false);a.setValue(o,{value:r});(e=this.linkService.eventBus)===null||e===void 0?void 0:e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:n,changeEx:r,willCommit:true,commitKey:1,keyDown:false}})});this._setEventListeners(l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],t=>t.target.checked)}else{l.addEventListener("input",function(t){a.setValue(o,{value:c(t,true)})})}if(this.data.combo){this._setTextStyle(l)}else{}this._setBackgroundColor(l);this._setDefaultPropertiesFromJS(l);this.container.append(l);return this.container}}class w extends i{constructor(t){var e,r,n;const s=!!((e=t.data.titleObj)!==null&&e!==void 0&&e.str||(r=t.data.contentsObj)!==null&&r!==void 0&&r.str||(n=t.data.richText)!==null&&n!==void 0&&n.str);super(t,{isRenderable:s})}render(){const t=["Line","Square","Circle","PolyLine","Polygon","Ink"];this.container.className="popupAnnotation";if(t.includes(this.data.parentType)){return this.container}const e=`[data-annotation-id="${this.data.parentId}"]`;const r=this.layer.querySelectorAll(e);if(r.length===0){return this.container}const n=new E({container:this.container,trigger:Array.from(r),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText});const s=this.page;const i=_.Util.normalizeRect([this.data.parentRect[0],s.view[3]-this.data.parentRect[1]+s.view[1],this.data.parentRect[2],s.view[3]-this.data.parentRect[3]+s.view[1]]);const a=i[0]+this.data.parentRect[2]-this.data.parentRect[0];const o=i[1];const[l,c,h,u]=this.viewport.viewBox;const d=h-l;const f=u-c;this.container.style.left=`${100*(a-l)/d}%`;this.container.style.top=`${100*(o-c)/f}%`;this.container.append(n.render());return this.container}}class E{constructor(t){this.container=t.container;this.trigger=t.trigger;this.color=t.color;this.titleObj=t.titleObj;this.modificationDate=t.modificationDate;this.contentsObj=t.contentsObj;this.richText=t.richText;this.hideWrapper=t.hideWrapper||false;this.pinned=false}render(){var t,e;const r=.7;const n=document.createElement("div");n.className="popupWrapper";this.hideElement=this.hideWrapper?n:this.container;this.hideElement.hidden=true;const s=document.createElement("div");s.className="popup";const i=this.color;if(i){const l=r*(255-i[0])+i[0];const c=r*(255-i[1])+i[1];const h=r*(255-i[2])+i[2];s.style.backgroundColor=_.Util.makeHexColor(l|0,c|0,h|0)}const a=document.createElement("h1");a.dir=this.titleObj.dir;a.textContent=this.titleObj.str;s.append(a);const o=p.PDFDateString.toDateObject(this.modificationDate);if(o){const u=document.createElement("span");u.className="popupDate";u.textContent="{{date}}, {{time}}";u.dataset.l10nId="annotation_date_string";u.dataset.l10nArgs=JSON.stringify({date:o.toLocaleDateString(),time:o.toLocaleTimeString()});s.append(u)}if((t=this.richText)!==null&&t!==void 0&&t.str&&(!((e=this.contentsObj)!==null&&e!==void 0&&e.str)||this.contentsObj.str===this.richText.str)){g.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:s});s.lastChild.className="richText popupContent"}else{const d=this._formatContents(this.contentsObj);s.append(d)}if(!Array.isArray(this.trigger)){this.trigger=[this.trigger]}for(const f of this.trigger){f.addEventListener("click",this._toggle.bind(this));f.addEventListener("mouseover",this._show.bind(this,false));f.addEventListener("mouseout",this._hide.bind(this,false))}s.addEventListener("click",this._hide.bind(this,true));n.append(s);return n}_formatContents(t){let{str:e,dir:r}=t;const n=document.createElement("p");n.className="popupContent";n.dir=r;const s=e.split(/(?:\r\n?|\n)/);for(let t=0,e=s.length;t<e;++t){const i=s[t];n.append(document.createTextNode(i));if(t<e-1){n.append(document.createElement("br"))}}return n}_toggle(){if(this.pinned){this._hide(true)}else{this._show(true)}}_show(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(t){this.pinned=true}if(this.hideElement.hidden){this.hideElement.hidden=false;this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3}}_hide(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(t){this.pinned=false}if(!this.hideElement.hidden&&!this.pinned){this.hideElement.hidden=true;this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3}}}class C extends i{constructor(t){var e,r,n;const s=!!(t.data.hasPopup||(e=t.data.titleObj)!==null&&e!==void 0&&e.str||(r=t.data.contentsObj)!==null&&r!==void 0&&r.str||(n=t.data.richText)!==null&&n!==void 0&&n.str);super(t,{isRenderable:s,ignoreBorder:true});this.textContent=t.data.textContent}render(){this.container.className="freeTextAnnotation";if(this.textContent){const t=document.createElement("div");t.className="annotationTextContent";t.setAttribute("role","comment");for(const e of this.textContent){const r=document.createElement("span");r.textContent=e;t.append(r)}this.container.append(t)}if(!this.data.hasPopup){this._createPopup(null,this.data)}return this.container}}class k extends i{constructor(t){var e,r,n;const s=!!(t.data.hasPopup||(e=t.data.titleObj)!==null&&e!==void 0&&e.str||(r=t.data.contentsObj)!==null&&r!==void 0&&r.str||(n=t.data.richText)!==null&&n!==void 0&&n.str);super(t,{isRenderable:s,ignoreBorder:true})}render(){this.container.className="lineAnnotation";const t=this.data;const{width:e,height:r}=y(t.rect);const n=this.svgFactory.create(e,r,true);const s=this.svgFactory.createElement("svg:line");s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]);s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]);s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]);s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]);s.setAttribute("stroke-width",t.borderStyle.width||1);s.setAttribute("stroke","transparent");s.setAttribute("fill","transparent");n.append(s);this.container.append(n);this._createPopup(s,t);return this.container}}class T extends i{constructor(t){var e,r,n;const s=!!(t.data.hasPopup||(e=t.data.titleObj)!==null&&e!==void 0&&e.str||(r=t.data.contentsObj)!==null&&r!==void 0&&r.str||(n=t.data.richText)!==null&&n!==void 0&&n.str);super(t,{isRenderable:s,ignoreBorder:true})}render(){this.container.className="squareAnnotation";const t=this.data;const{width:e,height:r}=y(t.rect);const n=this.svgFactory.create(e,r,true);const s=t.borderStyle.width;const i=this.svgFactory.createElement("svg:rect");i.setAttribute("x",s/2);i.setAttribute("y",s/2);i.setAttribute("width",e-s);i.setAttribute("height",r-s);i.setAttribute("stroke-width",s||1);i.setAttribute("stroke","transparent");i.setAttribute("fill","transparent");n.append(i);this.container.append(n);this._createPopup(i,t);return this.container}}class P extends i{constructor(t){var e,r,n;const s=!!(t.data.hasPopup||(e=t.data.titleObj)!==null&&e!==void 0&&e.str||(r=t.data.contentsObj)!==null&&r!==void 0&&r.str||(n=t.data.richText)!==null&&n!==void 0&&n.str);super(t,{isRenderable:s,ignoreBorder:true})}render(){this.container.className="circleAnnotation";const t=this.data;const{width:e,height:r}=y(t.rect);const n=this.svgFactory.create(e,r,true);const s=t.borderStyle.width;const i=this.svgFactory.createElement("svg:ellipse");i.setAttribute("cx",e/2);i.setAttribute("cy",r/2);i.setAttribute("rx",e/2-s/2);i.setAttribute("ry",r/2-s/2);i.setAttribute("stroke-width",s||1);i.setAttribute("stroke","transparent");i.setAttribute("fill","transparent");n.append(i);this.container.append(n);this._createPopup(i,t);return this.container}}class M extends i{constructor(t){var e,r,n;const s=!!(t.data.hasPopup||(e=t.data.titleObj)!==null&&e!==void 0&&e.str||(r=t.data.contentsObj)!==null&&r!==void 0&&r.str||(n=t.data.richText)!==null&&n!==void 0&&n.str);super(t,{isRenderable:s,ignoreBorder:true});this.containerClassName="polylineAnnotation";this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data;const{width:e,height:r}=y(t.rect);const n=this.svgFactory.create(e,r,true);let s=[];for(const a of t.vertices){const o=a.x-t.rect[0];const l=t.rect[3]-a.y;s.push(o+","+l)}s=s.join(" ");const i=this.svgFactory.createElement(this.svgElementName);i.setAttribute("points",s);i.setAttribute("stroke-width",t.borderStyle.width||1);i.setAttribute("stroke","transparent");i.setAttribute("fill","transparent");n.append(i);this.container.append(n);this._createPopup(i,t);return this.container}}class F extends M{constructor(t){super(t);this.containerClassName="polygonAnnotation";this.svgElementName="svg:polygon"}}class R extends i{constructor(t){var e,r,n;const s=!!(t.data.hasPopup||(e=t.data.titleObj)!==null&&e!==void 0&&e.str||(r=t.data.contentsObj)!==null&&r!==void 0&&r.str||(n=t.data.richText)!==null&&n!==void 0&&n.str);super(t,{isRenderable:s,ignoreBorder:true})}render(){this.container.className="caretAnnotation";if(!this.data.hasPopup){this._createPopup(null,this.data)}return this.container}}class O extends i{constructor(t){var e,r,n;const s=!!(t.data.hasPopup||(e=t.data.titleObj)!==null&&e!==void 0&&e.str||(r=t.data.contentsObj)!==null&&r!==void 0&&r.str||(n=t.data.richText)!==null&&n!==void 0&&n.str);super(t,{isRenderable:s,ignoreBorder:true});this.containerClassName="inkAnnotation";this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data;const{width:t,height:r}=y(e.rect);const n=this.svgFactory.create(t,r,true);for(const s of e.inkLists){let t=[];for(const a of s){const o=a.x-e.rect[0];const l=e.rect[3]-a.y;t.push(`${o},${l}`)}t=t.join(" ");const i=this.svgFactory.createElement(this.svgElementName);i.setAttribute("points",t);i.setAttribute("stroke-width",e.borderStyle.width||1);i.setAttribute("stroke","transparent");i.setAttribute("fill","transparent");this._createPopup(i,e);n.append(i)}this.container.append(n);return this.container}}class D extends i{constructor(t){var e,r,n;const s=!!(t.data.hasPopup||(e=t.data.titleObj)!==null&&e!==void 0&&e.str||(r=t.data.contentsObj)!==null&&r!==void 0&&r.str||(n=t.data.richText)!==null&&n!==void 0&&n.str);super(t,{isRenderable:s,ignoreBorder:true,createQuadrilaterals:true})}render(){if(!this.data.hasPopup){this._createPopup(null,this.data)}if(this.quadrilaterals){return this._renderQuadrilaterals("highlightAnnotation")}this.container.className="highlightAnnotation";return this.container}}class I extends i{constructor(t){var e,r,n;const s=!!(t.data.hasPopup||(e=t.data.titleObj)!==null&&e!==void 0&&e.str||(r=t.data.contentsObj)!==null&&r!==void 0&&r.str||(n=t.data.richText)!==null&&n!==void 0&&n.str);super(t,{isRenderable:s,ignoreBorder:true,createQuadrilaterals:true})}render(){if(!this.data.hasPopup){this._createPopup(null,this.data)}if(this.quadrilaterals){return this._renderQuadrilaterals("underlineAnnotation")}this.container.className="underlineAnnotation";return this.container}}class L extends i{constructor(t){var e,r,n;const s=!!(t.data.hasPopup||(e=t.data.titleObj)!==null&&e!==void 0&&e.str||(r=t.data.contentsObj)!==null&&r!==void 0&&r.str||(n=t.data.richText)!==null&&n!==void 0&&n.str);super(t,{isRenderable:s,ignoreBorder:true,createQuadrilaterals:true})}render(){if(!this.data.hasPopup){this._createPopup(null,this.data)}if(this.quadrilaterals){return this._renderQuadrilaterals("squigglyAnnotation")}this.container.className="squigglyAnnotation";return this.container}}class N extends i{constructor(t){var e,r,n;const s=!!(t.data.hasPopup||(e=t.data.titleObj)!==null&&e!==void 0&&e.str||(r=t.data.contentsObj)!==null&&r!==void 0&&r.str||(n=t.data.richText)!==null&&n!==void 0&&n.str);super(t,{isRenderable:s,ignoreBorder:true,createQuadrilaterals:true})}render(){if(!this.data.hasPopup){this._createPopup(null,this.data)}if(this.quadrilaterals){return this._renderQuadrilaterals("strikeoutAnnotation")}this.container.className="strikeoutAnnotation";return this.container}}class j extends i{constructor(t){var e,r,n;const s=!!(t.data.hasPopup||(e=t.data.titleObj)!==null&&e!==void 0&&e.str||(r=t.data.contentsObj)!==null&&r!==void 0&&r.str||(n=t.data.richText)!==null&&n!==void 0&&n.str);super(t,{isRenderable:s,ignoreBorder:true})}render(){this.container.className="stampAnnotation";if(!this.data.hasPopup){this._createPopup(null,this.data)}return this.container}}class U extends i{constructor(t){var e;super(t,{isRenderable:true});const{filename:r,content:n}=this.data.file;this.filename=(0,p.getFilenameFromUrl)(r);this.content=n;(e=this.linkService.eventBus)===null||e===void 0?void 0:e.dispatch("fileattachmentannotation",{source:this,filename:r,content:n})}render(){var t,e;this.container.className="fileAttachmentAnnotation";const r=document.createElement("div");r.className="popupTriggerArea";r.addEventListener("dblclick",this._download.bind(this));if(!this.data.hasPopup&&((t=this.data.titleObj)!==null&&t!==void 0&&t.str||(e=this.data.contentsObj)!==null&&e!==void 0&&e.str||this.data.richText)){this._createPopup(r,this.data)}this.container.append(r);return this.container}_download(){var t;(t=this.downloadManager)===null||t===void 0?void 0:t.openOrDownloadData(this.container,this.content,this.filename)}}class W{static render(t){const{annotations:e,div:r,viewport:n,accessibilityManager:s}=t;f(this,W,q).call(this,r,n);let i=0;for(const a of e){if(a.annotationType!==_.AnnotationType.POPUP){const{width:l,height:c}=y(a.rect);if(l<=0||c<=0){continue}}const o=b.create({data:a,layer:r,page:t.page,viewport:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==false,svgFactory:new p.DOMSVGFactory,annotationStorage:t.annotationStorage||new d.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:false}});if(o.isRenderable){const h=o.render();if(a.hidden){h.style.visibility="hidden"}if(Array.isArray(h)){for(const u of h){u.style.zIndex=i++;f(W,W,B).call(W,u,a.id,r,s)}}else{h.style.zIndex=i++;if(o instanceof w){r.prepend(h)}else{f(W,W,B).call(W,h,a.id,r,s)}}}}f(this,W,G).call(this,r,t.annotationCanvasMap)}static update(t){const{annotationCanvasMap:e,div:r,viewport:n}=t;f(this,W,q).call(this,r,n);f(this,W,G).call(this,r,e);r.hidden=false}}e.AnnotationLayer=W;function B(t,e,r,n){const s=t.firstChild||t;s.id=`${p.AnnotationPrefix}${e}`;r.append(t);n===null||n===void 0?void 0:n.moveElementInDOM(r,t,s,false)}function q(t,e){let{width:r,height:n,rotation:s}=e;const{style:i}=t;const a=s%180!==0,o=Math.floor(r)+"px",l=Math.floor(n)+"px";i.width=a?l:o;i.height=a?o:l;t.setAttribute("data-main-rotation",s)}function G(t,e){if(!e){return}for(const[r,n]of e){const s=t.querySelector(`[data-annotation-id="${r}"]`);if(!s){continue}const{firstChild:i}=s;if(!i){s.append(n)}else if(i.nodeName==="CANVAS"){i.replaceWith(n)}else{i.before(n)}}e.clear()}},(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ColorConverters=void 0;function o(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}class r{static CMYK_G(t){let[e,r,n,s]=t;return["G",1-Math.min(1,.3*e+.59*n+.11*r+s)]}static G_CMYK(t){let[e]=t;return["CMYK",0,0,0,1-e]}static G_RGB(t){let[e]=t;return["RGB",e,e,e]}static G_HTML(t){let[e]=t;const r=o(e);return`#${r}${r}${r}`}static RGB_G(t){let[e,r,n]=t;return["G",.3*e+.59*r+.11*n]}static RGB_HTML(t){let[e,r,n]=t;const s=o(e);const i=o(r);const a=o(n);return`#${s}${i}${a}`}static T_HTML(){return"#00000000"}static CMYK_RGB(t){let[e,r,n,s]=t;return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,r+s)]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK(t){let[e,r,n]=t;const s=1-e;const i=1-r;const a=1-n;const o=Math.min(s,i,a);return["CMYK",s,i,a,o]}}e.ColorConverters=r},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.XfaLayer=void 0;var b=r(145);class n{static setupStorage(t,n,e,s,r){const i=s.getValue(n,{value:null});switch(e.name){case"textarea":if(i.value!==null){t.textContent=i.value}if(r==="print"){break}t.addEventListener("input",t=>{s.setValue(n,{value:t.target.value})});break;case"input":if(e.attributes.type==="radio"||e.attributes.type==="checkbox"){if(i.value===e.attributes.xfaOn){t.setAttribute("checked",true)}else if(i.value===e.attributes.xfaOff){t.removeAttribute("checked")}if(r==="print"){break}t.addEventListener("change",t=>{s.setValue(n,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})})}else{if(i.value!==null){t.setAttribute("value",i.value)}if(r==="print"){break}t.addEventListener("input",t=>{s.setValue(n,{value:t.target.value})})}break;case"select":if(i.value!==null){for(const a of e.children){if(a.attributes.value===i.value){a.attributes.selected=true}}}t.addEventListener("input",t=>{const e=t.target.options;const r=e.selectedIndex===-1?"":e[e.selectedIndex].value;s.setValue(n,{value:r})});break}}static setAttributes(t){let{html:e,element:r,storage:n=null,intent:s,linkService:i}=t;const{attributes:a}=r;const o=e instanceof HTMLAnchorElement;if(a.type==="radio"){a.name=`${a.name}-${s}`}for(const[l,c]of Object.entries(a)){if(c===null||c===undefined){continue}switch(l){case"class":if(c.length){e.setAttribute(l,c.join(" "))}break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:if(!o||l!=="href"&&l!=="newWindow"){e.setAttribute(l,c)}}}if(o){i.addLinkAttributes(e,a.href,a.newWindow)}if(n&&a.dataId){this.setupStorage(e,a.dataId,r,n)}}static render(t){const e=t.annotationStorage;const r=t.linkService;const n=t.xfaHtml;const s=t.intent||"display";const i=document.createElement(n.name);if(n.attributes){this.setAttributes({html:i,element:n,intent:s,linkService:r})}const a=[[n,-1,i]];const o=t.div;o.append(i);if(t.viewport){const h=`matrix(${t.viewport.transform.join(",")})`;o.style.transform=h}if(s!=="richText"){o.setAttribute("class","xfaLayer xfaFont")}const l=[];while(a.length>0){var c;const[u,d,f]=a.at(-1);if(d+1===u.children.length){a.pop();continue}const p=u.children[++a.at(-1)[1]];if(p===null){continue}const{name:g}=p;if(g==="#text"){const v=document.createTextNode(p.value);l.push(v);f.append(v);continue}let t;if(p!==null&&p!==void 0&&(c=p.attributes)!==null&&c!==void 0&&c.xmlns){t=document.createElementNS(p.attributes.xmlns,g)}else{t=document.createElement(g)}f.append(t);if(p.attributes){this.setAttributes({html:t,element:p,storage:e,intent:s,linkService:r})}if(p.children&&p.children.length>0){a.push([p,-1,t])}else if(p.value){const v=document.createTextNode(p.value);if(b.XfaText.shouldBuildText(g)){l.push(v)}t.append(v)}}for(const m of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea")){m.setAttribute("readOnly",true)}return{textDivs:l}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e;t.div.hidden=false}}e.XfaLayer=n},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.TextLayerRenderTask=void 0;e.renderTextLayer=a;var b=r(1);var c=r(133);const s=1e5;const l=30;const h=.8;const u=new Map;const _=/^\s+$/g;function y(t,e){const r=u.get(t);if(r){return r}e.save();e.font=`${l}px ${t}`;const n=e.measureText("");let s=n.fontBoundingBoxAscent;let i=Math.abs(n.fontBoundingBoxDescent);if(s){e.restore();const o=s/(s+i);u.set(t,o);return o}e.strokeStyle="red";e.clearRect(0,0,l,l);e.strokeText("g",0,0);let a=e.getImageData(0,0,l,l).data;i=0;for(let t=a.length-1-3;t>=0;t-=4){if(a[t]>0){i=Math.ceil(t/4/l);break}}e.clearRect(0,0,l,l);e.strokeText("A",0,l);a=e.getImageData(0,0,l,l).data;s=0;for(let t=0,e=a.length;t<e;t+=4){if(a[t]>0){s=l-Math.floor(t/4/l);break}}e.restore();if(s){const o=s/(s+i);u.set(t,o);return o}u.set(t,h);return h}function i(s,i,t,e){const a=document.createElement("span");const r=s._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:i.str!=="",hasEOL:i.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:i.str!=="",hasEOL:i.hasEOL,fontSize:0};s._textDivs.push(a);const n=b.Util.transform(s._viewport.transform,i.transform);let o=Math.atan2(n[1],n[0]);const l=t[i.fontName];if(l.vertical){o+=Math.PI/2}const c=Math.hypot(n[2],n[3]);const h=c*y(l.fontFamily,e);let u,d;if(o===0){u=n[4];d=n[5]-h}else{u=n[4]+h*Math.sin(o);d=n[5]-h*Math.cos(o)}a.style.left=`${u}px`;a.style.top=`${d}px`;a.style.fontSize=`${c}px`;a.style.fontFamily=l.fontFamily;r.fontSize=c;a.setAttribute("role","presentation");a.textContent=i.str;a.dir=i.dir;if(s._fontInspectorEnabled){a.dataset.fontName=i.fontName}if(o!==0){r.angle=o*(180/Math.PI)}let f=false;if(i.str.length>1||s._enhanceTextSelection&&_.test(i.str)){f=true}else if(i.str!==" "&&i.transform[0]!==i.transform[3]){const p=Math.abs(i.transform[0]),g=Math.abs(i.transform[3]);if(p!==g&&Math.max(p,g)/Math.min(p,g)>1.5){f=true}}if(f){if(l.vertical){r.canvasWidth=i.height*s._viewport.scale}else{r.canvasWidth=i.width*s._viewport.scale}}s._textDivProperties.set(a,r);if(s._textContentStream){s._layoutText(a)}if(s._enhanceTextSelection&&r.hasText){let t=1,e=0;if(o!==0){t=Math.cos(o);e=Math.sin(o)}const v=(l.vertical?i.height:i.width)*s._viewport.scale;const m=c;let r,n;if(o!==0){r=[t,e,-e,t,u,d];n=b.Util.getAxialAlignedBoundingBox([0,0,v,m],r)}else{n=[u,d,u+v,d+m]}s._bounds.push({left:n[0],top:n[1],right:n[2],bottom:n[3],div:a,size:[v,m],m:r})}}function o(e){if(e._canceled){return}const r=e._textDivs;const t=e._capability;const n=r.length;if(n>s){e._renderingDone=true;t.resolve();return}if(!e._textContentStream){for(let t=0;t<n;t++){e._layoutText(r[t])}}e._renderingDone=true;t.resolve()}function g(e,r,n){let s=0;for(let t=0;t<n;t++){const i=e[r++];if(i>0){s=s?Math.min(i,s):i}}return s}function d(e){const r=e._bounds;const t=e._viewport;const n=v(t.width,t.height,r);for(let t=0;t<n.length;t++){const s=r[t].div;const i=e._textDivProperties.get(s);if(i.angle===0){i.paddingLeft=r[t].left-n[t].left;i.paddingTop=r[t].top-n[t].top;i.paddingRight=n[t].right-r[t].right;i.paddingBottom=n[t].bottom-r[t].bottom;e._textDivProperties.set(s,i);continue}const a=n[t],o=r[t];const l=o.m,c=l[0],h=l[1];const u=[[0,0],[0,o.size[1]],[o.size[0],0],o.size];const d=new Float64Array(64);for(let t=0,e=u.length;t<e;t++){const p=b.Util.applyTransform(u[t],l);d[t+0]=c&&(a.left-p[0])/c;d[t+4]=h&&(a.top-p[1])/h;d[t+8]=c&&(a.right-p[0])/c;d[t+12]=h&&(a.bottom-p[1])/h;d[t+16]=h&&(a.left-p[0])/-h;d[t+20]=c&&(a.top-p[1])/c;d[t+24]=h&&(a.right-p[0])/-h;d[t+28]=c&&(a.bottom-p[1])/c;d[t+32]=c&&(a.left-p[0])/-c;d[t+36]=h&&(a.top-p[1])/-h;d[t+40]=c&&(a.right-p[0])/-c;d[t+44]=h&&(a.bottom-p[1])/-h;d[t+48]=h&&(a.left-p[0])/h;d[t+52]=c&&(a.top-p[1])/-c;d[t+56]=h&&(a.right-p[0])/h;d[t+60]=c&&(a.bottom-p[1])/-c}const f=1+Math.min(Math.abs(c),Math.abs(h));i.paddingLeft=g(d,32,16)/f;i.paddingTop=g(d,48,16)/f;i.paddingRight=g(d,0,16)/f;i.paddingBottom=g(d,16,16)/f;e._textDivProperties.set(s,i)}}function v(s,t,e){const i=e.map(function(t,e){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:e,x1New:undefined,x2New:undefined}});f(s,i);const a=new Array(e.length);for(const r of i){const n=r.index;a[n]={left:r.x1New,top:0,right:r.x2New,bottom:0}}e.map(function(t,e){const r=a[e],n=i[e];n.x1=t.top;n.y1=s-r.right;n.x2=t.bottom;n.y2=s-r.left;n.index=e;n.x1New=undefined;n.x2New=undefined});f(t,i);for(const r of i){const n=r.index;a[n].top=r.x1New;a[n].bottom=r.x2New}return a}function f(t,e){e.sort(function(t,e){return t.x1-e.x1||t.index-e.index});const r={x1:-Infinity,y1:-Infinity,x2:0,y2:Infinity,index:-1,x1New:0,x2New:0};const l=[{start:-Infinity,end:Infinity,boundary:r}];for(const c of e){let e=0;while(e<l.length&&l[e].end<=c.y1){e++}let r=l.length-1;while(r>=0&&l[r].start>=c.y2){r--}let n,s;let i,a,o=-Infinity;for(i=e;i<=r;i++){n=l[i];s=n.boundary;let t;if(s.x2>c.x1){t=s.index>c.index?s.x1New:c.x1}else if(s.x2New===undefined){t=(s.x2+c.x1)/2}else{t=s.x2New}if(t>o){o=t}}c.x1New=o;for(i=e;i<=r;i++){n=l[i];s=n.boundary;if(s.x2New===undefined){if(s.x2>c.x1){if(s.index>c.index){s.x2New=s.x2}}else{s.x2New=o}}else if(s.x2New>o){s.x2New=Math.max(o,s.x2)}}const h=[];let t=null;for(i=e;i<=r;i++){n=l[i];s=n.boundary;const u=s.x2>c.x2?s:c;if(t===u){h.at(-1).end=n.end}else{h.push({start:n.start,end:n.end,boundary:u});t=u}}if(l[e].start<c.y1){h[0].start=c.y1;h.unshift({start:l[e].start,end:c.y1,boundary:l[e].boundary})}if(c.y2<l[r].end){h.at(-1).end=c.y2;h.push({start:c.y2,end:l[r].end,boundary:l[r].boundary})}for(i=e;i<=r;i++){n=l[i];s=n.boundary;if(s.x2New!==undefined){continue}let t=false;for(a=e-1;!t&&a>=0&&l[a].start>=s.y1;a--){t=l[a].boundary===s}for(a=r+1;!t&&a<l.length&&l[a].end<=s.y2;a++){t=l[a].boundary===s}for(a=0;!t&&a<h.length;a++){t=h[a].boundary===s}if(!t){s.x2New=o}}Array.prototype.splice.apply(l,[e,r-e+1,...h])}for(const n of l){const s=n.boundary;if(s.x2New===undefined){s.x2New=Math.max(t,s.x2)}}}class n{constructor(t){var e;let{textContent:r,textContentStream:n,container:s,viewport:i,textDivs:a,textContentItemsStr:o,enhanceTextSelection:l}=t;if(l){(0,c.deprecated)("The `enhanceTextSelection` functionality will be removed in the future.")}this._textContent=r;this._textContentStream=n;this._container=s;this._document=s.ownerDocument;this._viewport=i;this._textDivs=a||[];this._textContentItemsStr=o||[];this._enhanceTextSelection=!!l;this._fontInspectorEnabled=!!((e=globalThis.FontInspector)!==null&&e!==void 0&&e.enabled);this._reader=null;this._layoutTextLastFontSize=null;this._layoutTextLastFontFamily=null;this._layoutTextCtx=null;this._textDivProperties=new WeakMap;this._renderingDone=false;this._canceled=false;this._capability=(0,b.createPromiseCapability)();this._renderTimer=null;this._bounds=[];this._devicePixelRatio=globalThis.devicePixelRatio||1;this._capability.promise.finally(()=>{if(!this._enhanceTextSelection){this._textDivProperties=null}if(this._layoutTextCtx){this._layoutTextCtx.canvas.width=0;this._layoutTextCtx.canvas.height=0;this._layoutTextCtx=null}}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=true;if(this._reader){this._reader.cancel(new b.AbortException("TextLayer task cancelled.")).catch(()=>{});this._reader=null}if(this._renderTimer!==null){clearTimeout(this._renderTimer);this._renderTimer=null}this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(r,n){for(let t=0,e=r.length;t<e;t++){if(r[t].str===undefined){if(r[t].type==="beginMarkedContentProps"||r[t].type==="beginMarkedContent"){const s=this._container;this._container=document.createElement("span");this._container.classList.add("markedContent");if(r[t].id!==null){this._container.setAttribute("id",`${r[t].id}`)}s.append(this._container)}else if(r[t].type==="endMarkedContent"){this._container=this._container.parentNode}continue}this._textContentItemsStr.push(r[t].str);i(this,r[t],n,this._layoutTextCtx)}}_layoutText(t){const e=this._textDivProperties.get(t);let r="";if(e.canvasWidth!==0&&e.hasText){const{fontFamily:n}=t.style;const{fontSize:s}=e;if(s!==this._layoutTextLastFontSize||n!==this._layoutTextLastFontFamily){this._layoutTextCtx.font=`${s*this._devicePixelRatio}px ${n}`;this._layoutTextLastFontSize=s;this._layoutTextLastFontFamily=n}const{width:i}=this._layoutTextCtx.measureText(t.textContent);if(i>0){const a=this._devicePixelRatio*e.canvasWidth/i;if(this._enhanceTextSelection){e.scale=a}r=`scaleX(${a})`}}if(e.angle!==0){r=`rotate(${e.angle}deg) ${r}`}if(r.length>0){if(this._enhanceTextSelection){e.originalTransform=r}t.style.transform=r}if(e.hasText){this._container.append(t)}if(e.hasEOL){const o=document.createElement("br");o.setAttribute("role","presentation");this._container.append(o)}}_render(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;const n=(0,b.createPromiseCapability)();let s=Object.create(null);const e=this._document.createElement("canvas");e.height=e.width=l;this._layoutTextCtx=e.getContext("2d",{alpha:false});if(this._textContent){const r=this._textContent.items;const i=this._textContent.styles;this._processItems(r,i);n.resolve()}else if(this._textContentStream){const a=()=>{this._reader.read().then(t=>{let{value:e,done:r}=t;if(r){n.resolve();return}Object.assign(s,e.styles);this._processItems(e.items,s);a()},n.reject)};this._reader=this._textContentStream.getReader();a()}else{throw new Error('Neither "textContent" nor "textContentStream" parameters specified.')}n.promise.then(()=>{s=null;if(!t){o(this)}else{this._renderTimer=setTimeout(()=>{o(this);this._renderTimer=null},t)}},this._capability.reject)}expandTextDivs(){let r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!this._enhanceTextSelection||!this._renderingDone){return}if(this._bounds!==null){d(this);this._bounds=null}const n=[],s=[];for(let t=0,e=this._textDivs.length;t<e;t++){const i=this._textDivs[t];const a=this._textDivProperties.get(i);if(!a.hasText){continue}if(r){n.length=0;s.length=0;if(a.originalTransform){n.push(a.originalTransform)}if(a.paddingTop>0){s.push(`${a.paddingTop}px`);n.push(`translateY(${-a.paddingTop}px)`)}else{s.push(0)}if(a.paddingRight>0){s.push(`${a.paddingRight/a.scale}px`)}else{s.push(0)}if(a.paddingBottom>0){s.push(`${a.paddingBottom}px`)}else{s.push(0)}if(a.paddingLeft>0){s.push(`${a.paddingLeft/a.scale}px`);n.push(`translateX(${-a.paddingLeft/a.scale}px)`)}else{s.push(0)}i.style.padding=s.join(" ");if(n.length){i.style.transform=n.join(" ")}}else{i.style.padding=null;i.style.transform=a.originalTransform}}}}e.TextLayerRenderTask=n;function a(t){const e=new n({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});e._render(t.timeout);return e}},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SVGGraphics=void 0;var s=r(133);var T=r(1);var n=r(3);let a=class{constructor(){(0,T.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=a;{const w={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"};const E="http://www.w3.org/XML/1998/namespace";const c="http://www.w3.org/1999/xlink";const h=["butt","round","square"];const u=["miter","round","bevel"];const C=function(r){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";let e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(URL.createObjectURL&&typeof Blob!=="undefined"&&!e){return URL.createObjectURL(new Blob([r],{type:t}))}const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s=`data:${t};base64,`;for(let t=0,e=r.length;t<e;t+=3){const i=r[t]&255;const a=r[t+1]&255;const o=r[t+2]&255;const l=i>>2,c=(i&3)<<4|a>>4;const h=t+1<e?(a&15)<<2|o>>6:64;const u=t+2<e?o&63:64;s+=n[l]+n[c]+n[h]+n[u]}return s};const d=function(){const b=new Uint8Array([137,80,78,71,13,10,26,10]);const _=12;const o=new Int32Array(256);for(let t=0;t<256;t++){let e=t;for(let t=0;t<8;t++){if(e&1){e=3988292384^e>>1&2147483647}else{e=e>>1&2147483647}}o[t]=e}function l(e,r,n){let s=-1;for(let t=r;t<n;t++){const i=(s^e[t])&255;const a=o[i];s=s>>>8^a}return s^-1}function y(t,e,r,n){let s=n;const i=e.length;r[s]=i>>24&255;r[s+1]=i>>16&255;r[s+2]=i>>8&255;r[s+3]=i&255;s+=4;r[s]=t.charCodeAt(0)&255;r[s+1]=t.charCodeAt(1)&255;r[s+2]=t.charCodeAt(2)&255;r[s+3]=t.charCodeAt(3)&255;s+=4;r.set(e,s);s+=e.length;const a=l(r,n+4,s);r[s]=a>>24&255;r[s+1]=a>>16&255;r[s+2]=a>>8&255;r[s+3]=a&255}function c(e,r,n){let s=1;let i=0;for(let t=r;t<n;++t){s=(s+(e[t]&255))%65521;i=(i+s)%65521}return i<<16|s}function A(e){if(!n.isNodeJS){return t(e)}try{let t;if(parseInt(process.versions.node)>=8){t=e}else{t=Buffer.from(e)}const r=require("zlib").deflateSync(t,{level:9});return r instanceof Uint8Array?r:new Uint8Array(r)}catch(t){(0,T.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return t(e)}function t(t){let e=t.length;const r=65535;const n=Math.ceil(e/r);const s=new Uint8Array(2+e+n*5+4);let i=0;s[i++]=120;s[i++]=156;let a=0;while(e>r){s[i++]=0;s[i++]=255;s[i++]=255;s[i++]=0;s[i++]=0;s.set(t.subarray(a,a+r),i);i+=r;a+=r;e-=r}s[i++]=1;s[i++]=e&255;s[i++]=e>>8&255;s[i++]=~e&65535&255;s[i++]=(~e&65535)>>8&255;s.set(t.subarray(a),i);i+=t.length-a;const o=c(t,0,t.length);s[i++]=o>>24&255;s[i++]=o>>16&255;s[i++]=o>>8&255;s[i++]=o&255;return s}function i(t,e,r,n){const s=t.width;const i=t.height;let a,o,l;const c=t.data;switch(e){case T.ImageKind.GRAYSCALE_1BPP:o=0;a=1;l=s+7>>3;break;case T.ImageKind.RGB_24BPP:o=2;a=8;l=s*3;break;case T.ImageKind.RGBA_32BPP:o=6;a=8;l=s*4;break;default:throw new Error("invalid format")}const h=new Uint8Array((1+l)*i);let u=0,d=0;for(let t=0;t<i;++t){h[u++]=0;h.set(c.subarray(d,d+l),u);d+=l;u+=l}if(e===T.ImageKind.GRAYSCALE_1BPP&&n){u=0;for(let t=0;t<i;t++){u++;for(let t=0;t<l;t++){h[u++]^=255}}}const f=new Uint8Array([s>>24&255,s>>16&255,s>>8&255,s&255,i>>24&255,i>>16&255,i>>8&255,i&255,a,o,0,0,0]);const p=A(h);const g=b.length+_*3+f.length+p.length;const v=new Uint8Array(g);let m=0;v.set(b,m);m+=b.length;y("IHDR",f,v,m);m+=_+f.length;y("IDATA",p,v,m);m+=_+p.length;y("IEND",new Uint8Array(0),v,m);return C(v,"image/png",r)}return function t(e,r,n){const s=e.kind===undefined?T.ImageKind.GRAYSCALE_1BPP:e.kind;return i(e,s,r,n)}}();class f{constructor(){this.fontSizeScale=1;this.fontWeight=w.fontWeight;this.fontSize=0;this.textMatrix=T.IDENTITY_MATRIX;this.fontMatrix=T.FONT_IDENTITY_MATRIX;this.leading=0;this.textRenderingMode=T.TextRenderingMode.FILL;this.textMatrixScale=1;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRise=0;this.fillColor=w.fillColor;this.strokeColor="#000000";this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.lineJoin="";this.lineCap="";this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=[];this.activeClipUrl=null;this.clipGroup=null;this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(t,e){this.x=t;this.y=e}}function l(t){let e=[];const r=[];for(const n of t){if(n.fn==="save"){e.push({fnId:92,fn:"group",items:[]});r.push(e);e=e.at(-1).items;continue}if(n.fn==="restore"){e=r.pop()}else{e.push(n)}}return e}function S(t){if(Number.isInteger(t)){return t.toString()}const e=t.toFixed(10);let r=e.length-1;if(e[r]!=="0"){return e}do{r--}while(e[r]==="0");return e.substring(0,e[r]==="."?r:r+1)}function x(t){if(t[4]===0&&t[5]===0){if(t[1]===0&&t[2]===0){if(t[0]===1&&t[3]===1){return""}return`scale(${S(t[0])} ${S(t[3])})`}if(t[0]===t[3]&&t[1]===-t[2]){const e=Math.acos(t[0])*180/Math.PI;return`rotate(${S(e)})`}}else{if(t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1){return`translate(${S(t[4])} ${S(t[5])})`}}return`matrix(${S(t[0])} ${S(t[1])} ${S(t[2])} ${S(t[3])} ${S(t[4])} `+`${S(t[5])})`}let i=0;let o=0;let k=0;e.SVGGraphics=a=class{constructor(t,e){let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;(0,s.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future.");this.svgFactory=new s.DOMSVGFactory;this.current=new f;this.transformMatrix=T.IDENTITY_MATRIX;this.transformStack=[];this.extraStack=[];this.commonObjs=t;this.objs=e;this.pendingClip=null;this.pendingEOFill=false;this.embedFonts=false;this.embeddedFonts=Object.create(null);this.cssStyle=null;this.forceDataSchema=!!r;this._operatorIdMapping=[];for(const n in T.OPS){this._operatorIdMapping[T.OPS[n]]=n}}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t);this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop();this.current=this.extraStack.pop();this.pendingClip=null;this.tgrp=null}group(t){this.save();this.executeOpTree(t);this.restore()}loadDependencies(t){const r=t.fnArray;const n=t.argsArray;for(let t=0,e=r.length;t<e;t++){if(r[t]!==T.OPS.dependency){continue}for(const s of n[t]){const i=s.startsWith("g_")?this.commonObjs:this.objs;const a=new Promise(t=>{i.get(s,t)});this.current.dependencies.push(a)}}return Promise.all(this.current.dependencies)}transform(t,e,r,n,s,i){const a=[t,e,r,n,s,i];this.transformMatrix=T.Util.transform(this.transformMatrix,a);this.tgrp=null}getSVG(t,e){this.viewport=e;const r=this._initialize(e);return this.loadDependencies(t).then(()=>{this.transformMatrix=T.IDENTITY_MATRIX;this.executeOpTree(this.convertOpList(t));return r})}convertOpList(t){const r=this._operatorIdMapping;const n=t.argsArray;const s=t.fnArray;const i=[];for(let t=0,e=s.length;t<e;t++){const a=s[t];i.push({fnId:a,fn:r[a],args:n[t]})}return l(i)}executeOpTree(t){for(const e of t){const r=e.fn;const n=e.fnId;const s=e.args;switch(n|0){case T.OPS.beginText:this.beginText();break;case T.OPS.dependency:break;case T.OPS.setLeading:this.setLeading(s);break;case T.OPS.setLeadingMoveText:this.setLeadingMoveText(s[0],s[1]);break;case T.OPS.setFont:this.setFont(s);break;case T.OPS.showText:this.showText(s[0]);break;case T.OPS.showSpacedText:this.showText(s[0]);break;case T.OPS.endText:this.endText();break;case T.OPS.moveText:this.moveText(s[0],s[1]);break;case T.OPS.setCharSpacing:this.setCharSpacing(s[0]);break;case T.OPS.setWordSpacing:this.setWordSpacing(s[0]);break;case T.OPS.setHScale:this.setHScale(s[0]);break;case T.OPS.setTextMatrix:this.setTextMatrix(s[0],s[1],s[2],s[3],s[4],s[5]);break;case T.OPS.setTextRise:this.setTextRise(s[0]);break;case T.OPS.setTextRenderingMode:this.setTextRenderingMode(s[0]);break;case T.OPS.setLineWidth:this.setLineWidth(s[0]);break;case T.OPS.setLineJoin:this.setLineJoin(s[0]);break;case T.OPS.setLineCap:this.setLineCap(s[0]);break;case T.OPS.setMiterLimit:this.setMiterLimit(s[0]);break;case T.OPS.setFillRGBColor:this.setFillRGBColor(s[0],s[1],s[2]);break;case T.OPS.setStrokeRGBColor:this.setStrokeRGBColor(s[0],s[1],s[2]);break;case T.OPS.setStrokeColorN:this.setStrokeColorN(s);break;case T.OPS.setFillColorN:this.setFillColorN(s);break;case T.OPS.shadingFill:this.shadingFill(s[0]);break;case T.OPS.setDash:this.setDash(s[0],s[1]);break;case T.OPS.setRenderingIntent:this.setRenderingIntent(s[0]);break;case T.OPS.setFlatness:this.setFlatness(s[0]);break;case T.OPS.setGState:this.setGState(s[0]);break;case T.OPS.fill:this.fill();break;case T.OPS.eoFill:this.eoFill();break;case T.OPS.stroke:this.stroke();break;case T.OPS.fillStroke:this.fillStroke();break;case T.OPS.eoFillStroke:this.eoFillStroke();break;case T.OPS.clip:this.clip("nonzero");break;case T.OPS.eoClip:this.clip("evenodd");break;case T.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case T.OPS.paintImageXObject:this.paintImageXObject(s[0]);break;case T.OPS.paintInlineImageXObject:this.paintInlineImageXObject(s[0]);break;case T.OPS.paintImageMaskXObject:this.paintImageMaskXObject(s[0]);break;case T.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(s[0],s[1]);break;case T.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case T.OPS.closePath:this.closePath();break;case T.OPS.closeStroke:this.closeStroke();break;case T.OPS.closeFillStroke:this.closeFillStroke();break;case T.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case T.OPS.nextLine:this.nextLine();break;case T.OPS.transform:this.transform(s[0],s[1],s[2],s[3],s[4],s[5]);break;case T.OPS.constructPath:this.constructPath(s[0],s[1]);break;case T.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,T.warn)(`Unimplemented operator ${r}`);break}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,e,r,n,s,i){const a=this.current;a.textMatrix=a.lineMatrix=[t,e,r,n,s,i];a.textMatrixScale=Math.hypot(t,e);a.x=a.lineX=0;a.y=a.lineY=0;a.xcoords=[];a.ycoords=[];a.tspan=this.svgFactory.createElement("svg:tspan");a.tspan.setAttributeNS(null,"font-family",a.fontFamily);a.tspan.setAttributeNS(null,"font-size",`${S(a.fontSize)}px`);a.tspan.setAttributeNS(null,"y",S(-a.y));a.txtElement=this.svgFactory.createElement("svg:text");a.txtElement.append(a.tspan)}beginText(){const t=this.current;t.x=t.lineX=0;t.y=t.lineY=0;t.textMatrix=T.IDENTITY_MATRIX;t.lineMatrix=T.IDENTITY_MATRIX;t.textMatrixScale=1;t.tspan=this.svgFactory.createElement("svg:tspan");t.txtElement=this.svgFactory.createElement("svg:text");t.txtgrp=this.svgFactory.createElement("svg:g");t.xcoords=[];t.ycoords=[]}moveText(t,e){const r=this.current;r.x=r.lineX+=t;r.y=r.lineY+=e;r.xcoords=[];r.ycoords=[];r.tspan=this.svgFactory.createElement("svg:tspan");r.tspan.setAttributeNS(null,"font-family",r.fontFamily);r.tspan.setAttributeNS(null,"font-size",`${S(r.fontSize)}px`);r.tspan.setAttributeNS(null,"y",S(-r.y))}showText(t){const s=this.current;const i=s.font;const a=s.fontSize;if(a===0){return}const o=s.fontSizeScale;const l=s.charSpacing;const c=s.wordSpacing;const h=s.fontDirection;const e=s.textHScale*h;const u=i.vertical;const d=u?1:-1;const f=i.defaultVMetrics;const p=a*s.fontMatrix[0];let g=0;for(const v of t){if(v===null){g+=h*c;continue}else if(typeof v==="number"){g+=d*v*a/1e3;continue}const m=(v.isSpace?c:0)+l;const b=v.fontChar;let e,r;let n=v.width;if(u){let t;const _=v.vmetric||f;t=v.vmetric?_[1]:n*.5;t=-t*p;const y=_[2]*p;n=_?-_[0]:n;e=t/o;r=(g+y)/o}else{e=g/o;r=0}if(v.isInFont||i.missingFile){s.xcoords.push(s.x+e);if(u){s.ycoords.push(-s.y+r)}s.tspan.textContent+=b}else{}let t;if(u){t=n*p-m*h}else{t=n*p+m*h}g+=t}s.tspan.setAttributeNS(null,"x",s.xcoords.map(S).join(" "));if(u){s.tspan.setAttributeNS(null,"y",s.ycoords.map(S).join(" "))}else{s.tspan.setAttributeNS(null,"y",S(-s.y))}if(u){s.y-=g}else{s.x+=g*e}s.tspan.setAttributeNS(null,"font-family",s.fontFamily);s.tspan.setAttributeNS(null,"font-size",`${S(s.fontSize)}px`);if(s.fontStyle!==w.fontStyle){s.tspan.setAttributeNS(null,"font-style",s.fontStyle)}if(s.fontWeight!==w.fontWeight){s.tspan.setAttributeNS(null,"font-weight",s.fontWeight)}const r=s.textRenderingMode&T.TextRenderingMode.FILL_STROKE_MASK;if(r===T.TextRenderingMode.FILL||r===T.TextRenderingMode.FILL_STROKE){if(s.fillColor!==w.fillColor){s.tspan.setAttributeNS(null,"fill",s.fillColor)}if(s.fillAlpha<1){s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)}}else if(s.textRenderingMode===T.TextRenderingMode.ADD_TO_PATH){s.tspan.setAttributeNS(null,"fill","transparent")}else{s.tspan.setAttributeNS(null,"fill","none")}if(r===T.TextRenderingMode.STROKE||r===T.TextRenderingMode.FILL_STROKE){const A=1/(s.textMatrixScale||1);this._setStrokeAttributes(s.tspan,A)}let n=s.textMatrix;if(s.textRise!==0){n=n.slice();n[5]+=s.textRise}s.txtElement.setAttributeNS(null,"transform",`${x(n)} scale(${S(e)}, -1)`);s.txtElement.setAttributeNS(E,"xml:space","preserve");s.txtElement.append(s.tspan);s.txtgrp.append(s.txtElement);this._ensureTransformGroup().append(s.txtElement)}setLeadingMoveText(t,e){this.setLeading(-e);this.moveText(t,e)}addFontStyle(t){if(!t.data){throw new Error("addFontStyle: No font data available, "+'ensure that the "fontExtraProperties" API parameter is set.')}if(!this.cssStyle){this.cssStyle=this.svgFactory.createElement("svg:style");this.cssStyle.setAttributeNS(null,"type","text/css");this.defs.append(this.cssStyle)}const e=C(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}";`+` src: url(${e}); }\n`}setFont(t){const e=this.current;const r=this.commonObjs.get(t[0]);let n=t[1];e.font=r;if(this.embedFonts&&!r.missingFile&&!this.embeddedFonts[r.loadedName]){this.addFontStyle(r);this.embeddedFonts[r.loadedName]=r}e.fontMatrix=r.fontMatrix||T.FONT_IDENTITY_MATRIX;let s="normal";if(r.black){s="900"}else if(r.bold){s="bold"}const i=r.italic?"italic":"normal";if(n<0){n=-n;e.fontDirection=-1}else{e.fontDirection=1}e.fontSize=n;e.fontFamily=r.loadedName;e.fontWeight=s;e.fontStyle=i;e.tspan=this.svgFactory.createElement("svg:tspan");e.tspan.setAttributeNS(null,"y",S(-e.y));e.xcoords=[];e.ycoords=[]}endText(){var t;const e=this.current;if(e.textRenderingMode&T.TextRenderingMode.ADD_TO_PATH_FLAG&&(t=e.txtElement)!==null&&t!==void 0&&t.hasChildNodes()){e.element=e.txtElement;this.clip("nonzero");this.endPath()}}setLineWidth(t){if(t>0){this.current.lineWidth=t}}setLineCap(t){this.current.lineCap=h[t]}setLineJoin(t){this.current.lineJoin=u[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,e,r){this.current.strokeColor=T.Util.makeHexColor(t,e,r)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,e,r){this.current.fillColor=T.Util.makeHexColor(t,e,r);this.current.tspan=this.svgFactory.createElement("svg:tspan");this.current.xcoords=[];this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const e=this.viewport.width;const r=this.viewport.height;const n=T.Util.inverseTransform(this.transformMatrix);const s=T.Util.applyTransform([0,0],n);const i=T.Util.applyTransform([0,r],n);const a=T.Util.applyTransform([e,0],n);const o=T.Util.applyTransform([e,r],n);const l=Math.min(s[0],i[0],a[0],o[0]);const c=Math.min(s[1],i[1],a[1],o[1]);const h=Math.max(s[0],i[0],a[0],o[0]);const u=Math.max(s[1],i[1],a[1],o[1]);const d=this.svgFactory.createElement("svg:rect");d.setAttributeNS(null,"x",l);d.setAttributeNS(null,"y",c);d.setAttributeNS(null,"width",h-l);d.setAttributeNS(null,"height",u-c);d.setAttributeNS(null,"fill",this._makeShadingPattern(t));if(this.current.fillAlpha<1){d.setAttributeNS(null,"fill-opacity",this.current.fillAlpha)}this._ensureTransformGroup().append(d)}_makeColorN_Pattern(t){if(t[0]==="TilingPattern"){return this._makeTilingPattern(t)}return this._makeShadingPattern(t)}_makeTilingPattern(t){const e=t[1];const r=t[2];const n=t[3]||T.IDENTITY_MATRIX;const[s,i,a,o]=t[4];const l=t[5];const c=t[6];const h=t[7];const u=`shading${k++}`;const[d,f,p,g]=T.Util.normalizeRect([...T.Util.applyTransform([s,i],n),...T.Util.applyTransform([a,o],n)]);const[v,m]=T.Util.singularValueDecompose2dScale(n);const b=l*v;const _=c*m;const y=this.svgFactory.createElement("svg:pattern");y.setAttributeNS(null,"id",u);y.setAttributeNS(null,"patternUnits","userSpaceOnUse");y.setAttributeNS(null,"width",b);y.setAttributeNS(null,"height",_);y.setAttributeNS(null,"x",`${d}`);y.setAttributeNS(null,"y",`${f}`);const A=this.svg;const S=this.transformMatrix;const x=this.current.fillColor;const w=this.current.strokeColor;const E=this.svgFactory.create(p-d,g-f);this.svg=E;this.transformMatrix=n;if(h===2){const C=T.Util.makeHexColor(...e);this.current.fillColor=C;this.current.strokeColor=C}this.executeOpTree(this.convertOpList(r));this.svg=A;this.transformMatrix=S;this.current.fillColor=x;this.current.strokeColor=w;y.append(E.childNodes[0]);this.defs.append(y);return`url(#${u})`}_makeShadingPattern(e){if(typeof e==="string"){e=this.objs.get(e)}switch(e[0]){case"RadialAxial":const r=`shading${k++}`;const n=e[3];let t;switch(e[1]){case"axial":const s=e[4];const i=e[5];t=this.svgFactory.createElement("svg:linearGradient");t.setAttributeNS(null,"id",r);t.setAttributeNS(null,"gradientUnits","userSpaceOnUse");t.setAttributeNS(null,"x1",s[0]);t.setAttributeNS(null,"y1",s[1]);t.setAttributeNS(null,"x2",i[0]);t.setAttributeNS(null,"y2",i[1]);break;case"radial":const a=e[4];const o=e[5];const l=e[6];const c=e[7];t=this.svgFactory.createElement("svg:radialGradient");t.setAttributeNS(null,"id",r);t.setAttributeNS(null,"gradientUnits","userSpaceOnUse");t.setAttributeNS(null,"cx",o[0]);t.setAttributeNS(null,"cy",o[1]);t.setAttributeNS(null,"r",c);t.setAttributeNS(null,"fx",a[0]);t.setAttributeNS(null,"fy",a[1]);t.setAttributeNS(null,"fr",l);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(const h of n){const u=this.svgFactory.createElement("svg:stop");u.setAttributeNS(null,"offset",h[0]);u.setAttributeNS(null,"stop-color",h[1]);t.append(u)}this.defs.append(t);return`url(#${r})`;case"Mesh":(0,T.warn)("Unimplemented pattern Mesh");return null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(t,e){this.current.dashArray=t;this.current.dashPhase=e}constructPath(t,e){const r=this.current;let n=r.x,s=r.y;let i=[];let a=0;for(const o of t){switch(o|0){case T.OPS.rectangle:n=e[a++];s=e[a++];const l=e[a++];const c=e[a++];const h=n+l;const u=s+c;i.push("M",S(n),S(s),"L",S(h),S(s),"L",S(h),S(u),"L",S(n),S(u),"Z");break;case T.OPS.moveTo:n=e[a++];s=e[a++];i.push("M",S(n),S(s));break;case T.OPS.lineTo:n=e[a++];s=e[a++];i.push("L",S(n),S(s));break;case T.OPS.curveTo:n=e[a+4];s=e[a+5];i.push("C",S(e[a]),S(e[a+1]),S(e[a+2]),S(e[a+3]),S(n),S(s));a+=6;break;case T.OPS.curveTo2:i.push("C",S(n),S(s),S(e[a]),S(e[a+1]),S(e[a+2]),S(e[a+3]));n=e[a+2];s=e[a+3];a+=4;break;case T.OPS.curveTo3:n=e[a+2];s=e[a+3];i.push("C",S(e[a]),S(e[a+1]),S(n),S(s),S(n),S(s));a+=4;break;case T.OPS.closePath:i.push("Z");break}}i=i.join(" ");if(r.path&&t.length>0&&t[0]!==T.OPS.rectangle&&t[0]!==T.OPS.moveTo){i=r.path.getAttributeNS(null,"d")+i}else{r.path=this.svgFactory.createElement("svg:path");this._ensureTransformGroup().append(r.path)}r.path.setAttributeNS(null,"d",i);r.path.setAttributeNS(null,"fill","none");r.element=r.path;r.setCurrentPoint(n,s)}endPath(){const t=this.current;t.path=null;if(!this.pendingClip){return}if(!t.element){this.pendingClip=null;return}const e=`clippath${i++}`;const r=this.svgFactory.createElement("svg:clipPath");r.setAttributeNS(null,"id",e);r.setAttributeNS(null,"transform",x(this.transformMatrix));const n=t.element.cloneNode(true);if(this.pendingClip==="evenodd"){n.setAttributeNS(null,"clip-rule","evenodd")}else{n.setAttributeNS(null,"clip-rule","nonzero")}this.pendingClip=null;r.append(n);this.defs.append(r);if(t.activeClipUrl){t.clipGroup=null;for(const s of this.extraStack){s.clipGroup=null}r.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${e})`;this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const e=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",e)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,r]of t){switch(e){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r);break;case"CA":this.setStrokeAlpha(r);break;case"ca":this.setFillAlpha(r);break;default:(0,T.warn)(`Unimplemented graphic state operator ${e}`);break}}}fill(){const t=this.current;if(t.element){t.element.setAttributeNS(null,"fill",t.fillColor);t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha);this.endPath()}}stroke(){const t=this.current;if(t.element){this._setStrokeAttributes(t.element);t.element.setAttributeNS(null,"fill","none");this.endPath()}}_setStrokeAttributes(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;const r=this.current;let n=r.dashArray;if(e!==1&&n.length>0){n=n.map(function(t){return e*t})}t.setAttributeNS(null,"stroke",r.strokeColor);t.setAttributeNS(null,"stroke-opacity",r.strokeAlpha);t.setAttributeNS(null,"stroke-miterlimit",S(r.miterLimit));t.setAttributeNS(null,"stroke-linecap",r.lineCap);t.setAttributeNS(null,"stroke-linejoin",r.lineJoin);t.setAttributeNS(null,"stroke-width",S(e*r.lineWidth)+"px");t.setAttributeNS(null,"stroke-dasharray",n.map(S).join(" "));t.setAttributeNS(null,"stroke-dashoffset",S(e*r.dashPhase)+"px")}eoFill(){if(this.current.element){this.current.element.setAttributeNS(null,"fill-rule","evenodd")}this.fill()}fillStroke(){this.stroke();this.fill()}eoFillStroke(){if(this.current.element){this.current.element.setAttributeNS(null,"fill-rule","evenodd")}this.fillStroke()}closeStroke(){this.closePath();this.stroke()}closeFillStroke(){this.closePath();this.fillStroke()}closeEOFillStroke(){this.closePath();this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0");t.setAttributeNS(null,"y","0");t.setAttributeNS(null,"width","1px");t.setAttributeNS(null,"height","1px");t.setAttributeNS(null,"fill",this.current.fillColor);this._ensureTransformGroup().append(t)}paintImageXObject(t){const e=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);if(!e){(0,T.warn)(`Dependent image with object ID ${t} is not ready yet`);return}this.paintInlineImageXObject(e)}paintInlineImageXObject(t,e){const r=t.width;const n=t.height;const s=d(t,this.forceDataSchema,!!e);const i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0");i.setAttributeNS(null,"y","0");i.setAttributeNS(null,"width",S(r));i.setAttributeNS(null,"height",S(n));this.current.element=i;this.clip("nonzero");const a=this.svgFactory.createElement("svg:image");a.setAttributeNS(c,"xlink:href",s);a.setAttributeNS(null,"x","0");a.setAttributeNS(null,"y",S(-n));a.setAttributeNS(null,"width",S(r)+"px");a.setAttributeNS(null,"height",S(n)+"px");a.setAttributeNS(null,"transform",`scale(${S(1/r)} ${S(-1/n)})`);if(e){e.append(a)}else{this._ensureTransformGroup().append(a)}}paintImageMaskXObject(t){const e=this.current;const r=t.width;const n=t.height;const s=e.fillColor;e.maskId=`mask${o++}`;const i=this.svgFactory.createElement("svg:mask");i.setAttributeNS(null,"id",e.maskId);const a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0");a.setAttributeNS(null,"y","0");a.setAttributeNS(null,"width",S(r));a.setAttributeNS(null,"height",S(n));a.setAttributeNS(null,"fill",s);a.setAttributeNS(null,"mask",`url(#${e.maskId})`);this.defs.append(i);this._ensureTransformGroup().append(a);this.paintInlineImageXObject(t,i)}paintFormXObjectBegin(t,e){if(Array.isArray(t)&&t.length===6){this.transform(t[0],t[1],t[2],t[3],t[4],t[5])}if(e){const r=e[2]-e[0];const n=e[3]-e[1];const s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x",e[0]);s.setAttributeNS(null,"y",e[1]);s.setAttributeNS(null,"width",S(r));s.setAttributeNS(null,"height",S(n));this.current.element=s;this.clip("nonzero");this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const e=this.svgFactory.create(t.width,t.height);const r=this.svgFactory.createElement("svg:defs");e.append(r);this.defs=r;const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"transform",x(t.transform));e.append(n);this.svg=n;return e}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl);this.svg.append(t);this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){if(!this.tgrp){this.tgrp=this.svgFactory.createElement("svg:g");this.tgrp.setAttributeNS(null,"transform",x(this.transformMatrix));if(this.current.activeClipUrl){this._ensureClipGroup().append(this.tgrp)}else{this.svg.append(this.tgrp)}}return this.tgrp}}}},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PDFNodeStream=void 0;var a=r(1);var o=r(158);const s=require("fs");const l=require("http");const c=require("https");const n=require("url");const i=/^file:\/\/\/[a-zA-Z]:\//;function h(t){const e=n.parse(t);if(e.protocol==="file:"||e.host){return e}if(/^[a-z]:[/\\]/i.test(t)){return n.parse(`file:///${t}`)}if(!e.host){e.protocol="file:"}return e}class u{constructor(t){this.source=t;this.url=h(t.url);this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:";this.isFsUrl=this.url.protocol==="file:";this.httpHeaders=this.isHttp&&t.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return(t=(e=this._fullRequestReader)===null||e===void 0?void 0:e._loaded)!==null&&t!==void 0?t:0}getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once.");this._fullRequestReader=this.isFsUrl?new m(this):new g(this);return this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength){return null}const r=this.isFsUrl?new b(this,t,e):new v(this,t,e);this._rangeRequestReaders.push(r);return r}cancelAllRequests(t){if(this._fullRequestReader){this._fullRequestReader.cancel(t)}for(const e of this._rangeRequestReaders.slice(0)){e.cancel(t)}}}e.PDFNodeStream=u;class d{constructor(t){this._url=t.url;this._done=false;this._storedError=null;this.onProgress=null;const e=t.source;this._contentLength=e.length;this._loaded=0;this._filename=null;this._disableRange=e.disableRange||false;this._rangeChunkSize=e.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true}this._isStreamingSupported=!e.disableStream;this._isRangeSupported=!e.disableRange;this._readableStream=null;this._readCapability=(0,a.createPromiseCapability)();this._headersCapability=(0,a.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;if(this._done){return{value:undefined,done:true}}if(this._storedError){throw this._storedError}const t=this._readableStream.read();if(t===null){this._readCapability=(0,a.createPromiseCapability)();return this.read()}this._loaded+=t.length;if(this.onProgress){this.onProgress({loaded:this._loaded,total:this._contentLength})}const e=new Uint8Array(t).buffer;return{value:e,done:false}}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t;this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t;t.on("readable",()=>{this._readCapability.resolve()});t.on("end",()=>{t.destroy();this._done=true;this._readCapability.resolve()});t.on("error",t=>{this._error(t)});if(!this._isStreamingSupported&&this._isRangeSupported){this._error(new a.AbortException("streaming is disabled"))}if(this._storedError){this._readableStream.destroy(this._storedError)}}}class f{constructor(t){this._url=t.url;this._done=false;this._storedError=null;this.onProgress=null;this._loaded=0;this._readableStream=null;this._readCapability=(0,a.createPromiseCapability)();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;if(this._done){return{value:undefined,done:true}}if(this._storedError){throw this._storedError}const t=this._readableStream.read();if(t===null){this._readCapability=(0,a.createPromiseCapability)();return this.read()}this._loaded+=t.length;if(this.onProgress){this.onProgress({loaded:this._loaded})}const e=new Uint8Array(t).buffer;return{value:e,done:false}}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t;this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t;t.on("readable",()=>{this._readCapability.resolve()});t.on("end",()=>{t.destroy();this._done=true;this._readCapability.resolve()});t.on("error",t=>{this._error(t)});if(this._storedError){this._readableStream.destroy(this._storedError)}}}function p(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}class g extends d{constructor(i){super(i);const t=t=>{if(t.statusCode===404){const s=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=s;this._headersCapability.reject(s);return}this._headersCapability.resolve();this._setReadableStream(t);const e=t=>{return this._readableStream.headers[t.toLowerCase()]};const{allowRangeRequests:r,suggestedLength:n}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:i.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r;this._contentLength=n||this._contentLength;this._filename=(0,o.extractFilenameFromHeader)(e)};this._request=null;if(this._url.protocol==="http:"){this._request=l.request(p(this._url,i.httpHeaders),t)}else{this._request=c.request(p(this._url,i.httpHeaders),t)}this._request.on("error",t=>{this._storedError=t;this._headersCapability.reject(t)});this._request.end()}}class v extends f{constructor(t,e,r){super(t);this._httpHeaders={};for(const s in t.httpHeaders){const i=t.httpHeaders[s];if(typeof i==="undefined"){continue}this._httpHeaders[s]=i}this._httpHeaders.Range=`bytes=${e}-${r-1}`;const n=t=>{if(t.statusCode===404){const e=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=e;return}this._setReadableStream(t)};this._request=null;if(this._url.protocol==="http:"){this._request=l.request(p(this._url,this._httpHeaders),n)}else{this._request=c.request(p(this._url,this._httpHeaders),n)}this._request.on("error",t=>{this._storedError=t});this._request.end()}}class m extends d{constructor(t){super(t);let r=decodeURIComponent(this._url.path);if(i.test(this._url.href)){r=r.replace(/^\//,"")}s.lstat(r,(t,e)=>{if(t){if(t.code==="ENOENT"){t=new a.MissingPDFException(`Missing PDF "${r}".`)}this._storedError=t;this._headersCapability.reject(t);return}this._contentLength=e.size;this._setReadableStream(s.createReadStream(r));this._headersCapability.resolve()})}}class b extends f{constructor(t,e,r){super(t);let n=decodeURIComponent(this._url.path);if(i.test(this._url.href)){n=n.replace(/^\//,"")}this._setReadableStream(s.createReadStream(n,{start:e,end:r-1}))}}},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.createResponseStatusError=l;e.extractFilenameFromHeader=o;e.validateRangeRequestCapabilities=a;e.validateResponseStatus=c;var n=r(1);var s=r(159);var i=r(133);function a(t){let{getResponseHeader:e,isHttp:r,rangeChunkSize:n,disableRange:s}=t;const i={allowRangeRequests:false,suggestedLength:undefined};const a=parseInt(e("Content-Length"),10);if(!Number.isInteger(a)){return i}i.suggestedLength=a;if(a<=2*n){return i}if(s||!r){return i}if(e("Accept-Ranges")!=="bytes"){return i}const o=e("Content-Encoding")||"identity";if(o!=="identity"){return i}i.allowRangeRequests=true;return i}function o(t){const e=t("Content-Disposition");if(e){let t=(0,s.getFilenameFromContentDispositionHeader)(e);if(t.includes("%")){try{t=decodeURIComponent(t)}catch(t){}}if((0,i.isPdfFile)(t)){return t}}return null}function l(t,e){if(t===404||t===0&&e.startsWith("file:")){return new n.MissingPDFException('Missing PDF "'+e+'".')}return new n.UnexpectedResponseException(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)}function c(t){return t===200||t===206}},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.getFilenameFromContentDispositionHeader=n;var u=r(1);function n(t){let s=true;let e=r("filename\\*","i").exec(t);if(e){e=e[1];let t=o(e);t=unescape(t);t=l(t);t=c(t);return n(t)}e=a(t);if(e){const h=c(e);return n(h)}e=r("filename","i").exec(t);if(e){e=e[1];let t=o(e);t=c(t);return n(t)}function r(t,e){return new RegExp("(?:^|;)\\s*"+t+"\\s*=\\s*"+"("+'[^";\\s][^;\\s]*'+"|"+'"(?:[^"\\\\]|\\\\"?)+"?'+")",e)}function i(t,e){if(t){if(!/^[\x00-\xFF]+$/.test(e)){return e}try{const r=new TextDecoder(t,{fatal:true});const n=(0,u.stringToBytes)(e);e=r.decode(n);s=false}catch(t){}}return e}function n(t){if(s&&/[\x80-\xff]/.test(t)){t=i("utf-8",t);if(s){t=i("iso-8859-1",t)}}return t}function a(t){const n=[];let s;const e=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");while((s=e.exec(t))!==null){let[,t,e,r]=s;t=parseInt(t,10);if(t in n){if(t===0){break}continue}n[t]=[e,r]}const i=[];for(let r=0;r<n.length;++r){if(!(r in n)){break}let[t,e]=n[r];e=o(e);if(t){e=unescape(e);if(r===0){e=l(e)}}i.push(e)}return i.join("")}function o(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const r=e[t].indexOf('"');if(r!==-1){e[t]=e[t].slice(0,r);e.length=t+1}e[t]=e[t].replace(/\\(.)/g,"$1")}t=e.join('"')}return t}function l(t){const e=t.indexOf("'");if(e===-1){return t}const r=t.slice(0,e);const n=t.slice(e+1);const s=n.replace(/^[^']*'/,"");return i(r,s)}function c(t){if(!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)){return t}return t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(t,e,r,n){if(r==="q"||r==="Q"){n=n.replace(/_/g," ");n=n.replace(/=([0-9a-fA-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))});return i(e,n)}try{n=atob(n)}catch(t){}return i(e,n)})}return""}},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PDFNetworkStream=void 0;var n=r(1);var i=r(158);const d=200;const f=206;function p(t){const e=t.response;if(typeof e!=="string"){return e}const r=(0,n.stringToBytes)(e);return r.buffer}class s{constructor(t){let e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.url=t;this.isHttp=/^https?:/i.test(t);this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null);this.withCredentials=e.withCredentials||false;this.getXhr=e.getXhr||function t(){return new XMLHttpRequest};this.currXhrId=0;this.pendingRequests=Object.create(null)}requestRange(t,e,r){const n={begin:t,end:e};for(const s in r){n[s]=r[s]}return this.request(n)}requestFull(t){return this.request(t)}request(e){const r=this.getXhr();const t=this.currXhrId++;const n=this.pendingRequests[t]={xhr:r};r.open("GET",this.url);r.withCredentials=this.withCredentials;for(const s in this.httpHeaders){const i=this.httpHeaders[s];if(typeof i==="undefined"){continue}r.setRequestHeader(s,i)}if(this.isHttp&&"begin"in e&&"end"in e){r.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`);n.expectedStatus=f}else{n.expectedStatus=d}r.responseType="arraybuffer";if(e.onError){r.onerror=function(t){e.onError(r.status)}}r.onreadystatechange=this.onStateChange.bind(this,t);r.onprogress=this.onProgress.bind(this,t);n.onHeadersReceived=e.onHeadersReceived;n.onDone=e.onDone;n.onError=e.onError;n.onProgress=e.onProgress;r.send(null);return t}onProgress(t,e){var r;const n=this.pendingRequests[t];if(!n){return}(r=n.onProgress)===null||r===void 0?void 0:r.call(n,e)}onStateChange(t,e){const r=this.pendingRequests[t];if(!r){return}const n=r.xhr;if(n.readyState>=2&&r.onHeadersReceived){r.onHeadersReceived();delete r.onHeadersReceived}if(n.readyState!==4){return}if(!(t in this.pendingRequests)){return}delete this.pendingRequests[t];if(n.status===0&&this.isHttp){var s;(s=r.onError)===null||s===void 0?void 0:s.call(r,n.status);return}const i=n.status||d;const a=i===d&&r.expectedStatus===f;if(!a&&i!==r.expectedStatus){var o;(o=r.onError)===null||o===void 0?void 0:o.call(r,n.status);return}const l=p(n);if(i===f){const h=n.getResponseHeader("Content-Range");const u=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);r.onDone({begin:parseInt(u[1],10),chunk:l})}else if(l){r.onDone({begin:0,chunk:l})}else{var c;(c=r.onError)===null||c===void 0?void 0:c.call(r,n.status)}}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t];e.abort()}}class a{constructor(t){this._source=t;this._manager=new s(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials});this._rangeChunkSize=t.rangeChunkSize;this._fullRequestReader=null;this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);if(e>=0){this._rangeRequestReaders.splice(e,1)}}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once.");this._fullRequestReader=new o(this._manager,this._source);return this._fullRequestReader}getRangeReader(t,e){const r=new l(this._manager,t,e);r.onClosed=this._onRangeRequestReaderClosed.bind(this);this._rangeRequestReaders.push(r);return r}cancelAllRequests(t){var e;(e=this._fullRequestReader)===null||e===void 0?void 0:e.cancel(t);for(const r of this._rangeRequestReaders.slice(0)){r.cancel(t)}}}e.PDFNetworkStream=a;class o{constructor(t,e){this._manager=t;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url;this._fullRequestId=t.requestFull(r);this._headersReceivedCapability=(0,n.createPromiseCapability)();this._disableRange=e.disableRange||false;this._contentLength=e.length;this._rangeChunkSize=e.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true}this._isStreamingSupported=false;this._isRangeSupported=false;this._cachedChunks=[];this._requests=[];this._done=false;this._storedError=undefined;this._filename=null;this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId;const e=this._manager.getRequestXhr(t);const r=t=>{return e.getResponseHeader(t)};const{allowRangeRequests:n,suggestedLength:s}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});if(n){this._isRangeSupported=true}this._contentLength=s||this._contentLength;this._filename=(0,i.extractFilenameFromHeader)(r);if(this._isRangeSupported){this._manager.abortRequest(t)}this._headersReceivedCapability.resolve()}_onDone(t){if(t){if(this._requests.length>0){const e=this._requests.shift();e.resolve({value:t.chunk,done:false})}else{this._cachedChunks.push(t.chunk)}}this._done=true;if(this._cachedChunks.length>0){return}for(const e of this._requests){e.resolve({value:undefined,done:true})}this._requests.length=0}_onError(t){this._storedError=(0,i.createResponseStatusError)(t,this._url);this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests){e.reject(this._storedError)}this._requests.length=0;this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)===null||e===void 0?void 0:e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError){throw this._storedError}if(this._cachedChunks.length>0){const e=this._cachedChunks.shift();return{value:e,done:false}}if(this._done){return{value:undefined,done:true}}const t=(0,n.createPromiseCapability)();this._requests.push(t);return t.promise}cancel(t){this._done=true;this._headersReceivedCapability.reject(t);for(const e of this._requests){e.resolve({value:undefined,done:true})}this._requests.length=0;if(this._manager.isPendingRequest(this._fullRequestId)){this._manager.abortRequest(this._fullRequestId)}this._fullRequestReader=null}}class l{constructor(t,e,r){this._manager=t;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url;this._requestId=t.requestRange(e,r,n);this._requests=[];this._queuedChunk=null;this._done=false;this._storedError=undefined;this.onProgress=null;this.onClosed=null}_close(){var t;(t=this.onClosed)===null||t===void 0?void 0:t.call(this,this)}_onDone(t){const e=t.chunk;if(this._requests.length>0){const r=this._requests.shift();r.resolve({value:e,done:false})}else{this._queuedChunk=e}this._done=true;for(const r of this._requests){r.resolve({value:undefined,done:true})}this._requests.length=0;this._close()}_onError(t){this._storedError=(0,i.createResponseStatusError)(t,this._url);for(const e of this._requests){e.reject(this._storedError)}this._requests.length=0;this._queuedChunk=null}_onProgress(t){if(!this.isStreamingSupported){var e;(e=this.onProgress)===null||e===void 0?void 0:e.call(this,{loaded:t.loaded})}}get isStreamingSupported(){return false}async read(){if(this._storedError){throw this._storedError}if(this._queuedChunk!==null){const e=this._queuedChunk;this._queuedChunk=null;return{value:e,done:false}}if(this._done){return{value:undefined,done:true}}const t=(0,n.createPromiseCapability)();this._requests.push(t);return t.promise}cancel(t){this._done=true;for(const e of this._requests){e.resolve({value:undefined,done:true})}this._requests.length=0;if(this._manager.isPendingRequest(this._requestId)){this._manager.abortRequest(this._requestId)}this._close()}}},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:true});e.PDFFetchStream=void 0;var i=r(1);var a=r(158);function o(t,e,r){return{method:"GET",headers:t,signal:r.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function l(t){const e=new Headers;for(const r in t){const n=t[r];if(typeof n==="undefined"){continue}e.append(r,n)}return e}class n{constructor(t){this.source=t;this.isHttp=/^https?:/i.test(t.url);this.httpHeaders=this.isHttp&&t.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return(t=(e=this._fullRequestReader)===null||e===void 0?void 0:e._loaded)!==null&&t!==void 0?t:0}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once.");this._fullRequestReader=new s(this);return this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength){return null}const r=new c(this,t,e);this._rangeRequestReaders.push(r);return r}cancelAllRequests(t){if(this._fullRequestReader){this._fullRequestReader.cancel(t)}for(const e of this._rangeRequestReaders.slice(0)){e.cancel(t)}}}e.PDFFetchStream=n;class s{constructor(t){this._stream=t;this._reader=null;this._loaded=0;this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||false;this._contentLength=e.length;this._headersCapability=(0,i.createPromiseCapability)();this._disableRange=e.disableRange||false;this._rangeChunkSize=e.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true}this._abortController=new AbortController;this._isStreamingSupported=!e.disableStream;this._isRangeSupported=!e.disableRange;this._headers=l(this._stream.httpHeaders);const s=e.url;fetch(s,o(this._headers,this._withCredentials,this._abortController)).then(e=>{if(!(0,a.validateResponseStatus)(e.status)){throw(0,a.createResponseStatusError)(e.status,s)}this._reader=e.body.getReader();this._headersCapability.resolve();const t=t=>{return e.headers.get(t)};const{allowRangeRequests:r,suggestedLength:n}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r;this._contentLength=n||this._contentLength;this._filename=(0,a.extractFilenameFromHeader)(t);if(!this._isStreamingSupported&&this._isRangeSupported){this.cancel(new i.AbortException("Streaming is disabled."))}}).catch(this._headersCapability.reject);this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();if(e){return{value:t,done:e}}this._loaded+=t.byteLength;if(this.onProgress){this.onProgress({loaded:this._loaded,total:this._contentLength})}const r=new Uint8Array(t).buffer;return{value:r,done:false}}cancel(t){if(this._reader){this._reader.cancel(t)}this._abortController.abort()}}class c{constructor(t,e,r){this._stream=t;this._reader=null;this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||false;this._readCapability=(0,i.createPromiseCapability)();this._isStreamingSupported=!n.disableStream;this._abortController=new AbortController;this._headers=l(this._stream.httpHeaders);this._headers.append("Range",`bytes=${e}-${r-1}`);const s=n.url;fetch(s,o(this._headers,this._withCredentials,this._abortController)).then(t=>{if(!(0,a.validateResponseStatus)(t.status)){throw(0,a.createResponseStatusError)(t.status,s)}this._readCapability.resolve();this._reader=t.body.getReader()}).catch(this._readCapability.reject);this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();if(e){return{value:t,done:e}}this._loaded+=t.byteLength;if(this.onProgress){this.onProgress({loaded:this._loaded})}const r=new Uint8Array(t).buffer;return{value:r,done:false}}cancel(t){if(this._reader){this._reader.cancel(t)}this._abortController.abort()}}}];var __webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==undefined){return e.exports}var r=__webpack_module_cache__[t]={exports:{}};__webpack_modules__[t](r,r.exports,__w_pdfjs_require__);return r.exports}var __webpack_exports__={};(()=>{"use strict";var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:true,get:function(){return s.AnnotationEditorLayer}});Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:true,get:function(){return e.AnnotationEditorParamsType}});Object.defineProperty(t,"AnnotationEditorType",{enumerable:true,get:function(){return e.AnnotationEditorType}});Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:true,get:function(){return i.AnnotationEditorUIManager}});Object.defineProperty(t,"AnnotationLayer",{enumerable:true,get:function(){return a.AnnotationLayer}});Object.defineProperty(t,"AnnotationMode",{enumerable:true,get:function(){return e.AnnotationMode}});Object.defineProperty(t,"CMapCompressionType",{enumerable:true,get:function(){return e.CMapCompressionType}});Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:true,get:function(){return o.GlobalWorkerOptions}});Object.defineProperty(t,"InvalidPDFException",{enumerable:true,get:function(){return e.InvalidPDFException}});Object.defineProperty(t,"LoopbackPort",{enumerable:true,get:function(){return r.LoopbackPort}});Object.defineProperty(t,"MissingPDFException",{enumerable:true,get:function(){return e.MissingPDFException}});Object.defineProperty(t,"OPS",{enumerable:true,get:function(){return e.OPS}});Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:true,get:function(){return r.PDFDataRangeTransport}});Object.defineProperty(t,"PDFDateString",{enumerable:true,get:function(){return n.PDFDateString}});Object.defineProperty(t,"PDFWorker",{enumerable:true,get:function(){return r.PDFWorker}});Object.defineProperty(t,"PasswordResponses",{enumerable:true,get:function(){return e.PasswordResponses}});Object.defineProperty(t,"PermissionFlag",{enumerable:true,get:function(){return e.PermissionFlag}});Object.defineProperty(t,"PixelsPerInch",{enumerable:true,get:function(){return n.PixelsPerInch}});Object.defineProperty(t,"RenderingCancelledException",{enumerable:true,get:function(){return n.RenderingCancelledException}});Object.defineProperty(t,"SVGGraphics",{enumerable:true,get:function(){return h.SVGGraphics}});Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:true,get:function(){return e.UNSUPPORTED_FEATURES}});Object.defineProperty(t,"UnexpectedResponseException",{enumerable:true,get:function(){return e.UnexpectedResponseException}});Object.defineProperty(t,"Util",{enumerable:true,get:function(){return e.Util}});Object.defineProperty(t,"VerbosityLevel",{enumerable:true,get:function(){return e.VerbosityLevel}});Object.defineProperty(t,"XfaLayer",{enumerable:true,get:function(){return u.XfaLayer}});Object.defineProperty(t,"build",{enumerable:true,get:function(){return r.build}});Object.defineProperty(t,"createPromiseCapability",{enumerable:true,get:function(){return e.createPromiseCapability}});Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:true,get:function(){return e.createValidAbsoluteUrl}});Object.defineProperty(t,"getDocument",{enumerable:true,get:function(){return r.getDocument}});Object.defineProperty(t,"getFilenameFromUrl",{enumerable:true,get:function(){return n.getFilenameFromUrl}});Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:true,get:function(){return n.getPdfFilenameFromUrl}});Object.defineProperty(t,"getXfaPageViewport",{enumerable:true,get:function(){return n.getXfaPageViewport}});Object.defineProperty(t,"isPdfFile",{enumerable:true,get:function(){return n.isPdfFile}});Object.defineProperty(t,"loadScript",{enumerable:true,get:function(){return n.loadScript}});Object.defineProperty(t,"renderTextLayer",{enumerable:true,get:function(){return c.renderTextLayer}});Object.defineProperty(t,"shadow",{enumerable:true,get:function(){return e.shadow}});Object.defineProperty(t,"version",{enumerable:true,get:function(){return r.version}});var e=__w_pdfjs_require__(1);var r=__w_pdfjs_require__(129);var n=__w_pdfjs_require__(133);var s=__w_pdfjs_require__(147);var i=__w_pdfjs_require__(132);var a=__w_pdfjs_require__(152);var o=__w_pdfjs_require__(140);var l=__w_pdfjs_require__(3);var c=__w_pdfjs_require__(155);var h=__w_pdfjs_require__(156);var u=__w_pdfjs_require__(154);const d="2.16.105";const f="172ccdbe5";{if(l.isNodeJS){const{PDFNodeStream:p}=__w_pdfjs_require__(157);(0,r.setPDFNetworkStreamFactory)(t=>{return new p(t)})}else{const{PDFNetworkStream:g}=__w_pdfjs_require__(160);const{PDFFetchStream:v}=__w_pdfjs_require__(161);(0,r.setPDFNetworkStreamFactory)(t=>{if((0,n.isValidFetchUrl)(t.url)){return new v(t)}return new g(t)})}}})();return __webpack_exports__})()});