(()=>{"use strict";var n=[,(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.animationStarted=t.VERTICAL_PADDING=t.UNKNOWN_SCALE=t.TextLayerMode=t.SpreadMode=t.SidebarView=t.ScrollMode=t.SCROLLBAR_PADDING=t.RenderingStates=t.RendererType=t.ProgressBar=t.PresentationModeState=t.OutputScale=t.MIN_SCALE=t.MAX_SCALE=t.MAX_AUTO_SCALE=t.DEFAULT_SCALE_VALUE=t.DEFAULT_SCALE_DELTA=t.DEFAULT_SCALE=t.AutoPrintRegExp=void 0;t.apiPageLayoutToViewerModes=j;t.apiPageModeToSidebarView=$;t.approximateFraction=C;t.backtrackBeforeAllVisibleElements=k;t.binarySearchFirstItem=A;t.docStyle=void 0;t.getActiveOrFocusedElement=W;t.getPageSizeInches=I;t.getVisibleElements=M;t.isPortraitOrientation=R;t.isValidRotation=B;t.isValidScrollMode=V;t.isValidSpreadMode=O;t.noContextMenuHandler=x;t.normalizeWheelEventDelta=D;t.normalizeWheelEventDirection=N;t.parseQueryString=P;t.removeNullCharacters=L;t.roundToDivide=T;t.scrollIntoView=b;t.watchScroll=y;const i="auto";t.DEFAULT_SCALE_VALUE=i;const n=1;t.DEFAULT_SCALE=n;const s=1.1;t.DEFAULT_SCALE_DELTA=s;const r=.1;t.MIN_SCALE=r;const a=10;t.MAX_SCALE=a;const o=0;t.UNKNOWN_SCALE=o;const l=1.25;t.MAX_AUTO_SCALE=l;const d=40;t.SCROLLBAR_PADDING=d;const c=5;t.VERTICAL_PADDING=c;const h={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};t.RenderingStates=h;const u={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};t.PresentationModeState=u;const p={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};t.SidebarView=p;const f={CANVAS:"canvas",SVG:"svg"};t.RendererType=f;const g={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};t.TextLayerMode=g;const m={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};t.ScrollMode=m;const v={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};t.SpreadMode=v;const _=/\bprint\s*\(/;t.AutoPrintRegExp=_;class w{constructor(){const e=window.devicePixelRatio||1;this.sx=e;this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}}t.OutputScale=w;function b(e,t,i=false){let n=e.offsetParent;if(!n){console.error("offsetParent is not set -- cannot scroll");return}let s=e.offsetTop+e.clientTop;let r=e.offsetLeft+e.clientLeft;while(n.clientHeight===n.scrollHeight&&n.clientWidth===n.scrollWidth||i&&(n.classList.contains("markedContent")||getComputedStyle(n).overflow==="hidden")){s+=n.offsetTop;r+=n.offsetLeft;n=n.offsetParent;if(!n){return}}if(t){if(t.top!==undefined){s+=t.top}if(t.left!==undefined){r+=t.left;n.scrollLeft=r}}n.scrollTop=s}function y(r,a){const e=function(e){if(l){return}l=window.requestAnimationFrame(function e(){l=null;const t=r.scrollLeft;const i=o.lastX;if(t!==i){o.right=t>i}o.lastX=t;const n=r.scrollTop;const s=o.lastY;if(n!==s){o.down=n>s}o.lastY=n;a(o)})};const o={right:true,down:true,lastX:r.scrollLeft,lastY:r.scrollTop,_eventHandler:e};let l=null;r.addEventListener("scroll",e,true);return o}function P(e){const t=new Map;for(const[i,n]of new URLSearchParams(e)){t.set(i.toLowerCase(),n)}return t}const E=/\x00/g;const S=/[\x01-\x1F]/g;function L(e,t=false){if(typeof e!=="string"){console.error(`The argument must be a string.`);return e}if(t){e=e.replace(S," ")}return e.replace(E,"")}function A(e,t,i=0){let n=i;let s=e.length-1;if(s<0||!t(e[s])){return e.length}if(t(e[n])){return n}while(n<s){const r=n+s>>1;const a=e[r];if(t(a)){s=r}else{n=r+1}}return n}function C(e){if(Math.floor(e)===e){return[e,1]}const t=1/e;const i=8;if(t>i){return[1,i]}else if(Math.floor(t)===t){return[1,t]}const n=e>1?t:e;let s=0,r=1,a=1,o=1;while(true){const d=s+a,c=r+o;if(c>i){break}if(n<=d/c){a=d;o=c}else{s=d;r=c}}let l;if(n-s/r<a/o-n){l=n===e?[s,r]:[r,s]}else{l=n===e?[a,o]:[o,a]}return l}function T(e,t){const i=e%t;return i===0?e:Math.round(e-i+t)}function I({view:e,userUnit:t,rotate:i}){const[n,s,r,a]=e;const o=i%180!==0;const l=(r-n)/72*t;const d=(a-s)/72*t;return{width:o?d:l,height:o?l:d}}function k(t,i,e){if(t<2){return t}let n=i[t].div;let s=n.offsetTop+n.clientTop;if(s>=e){n=i[t-1].div;s=n.offsetTop+n.clientTop}for(let e=t-2;e>=0;--e){n=i[e].div;if(n.offsetTop+n.clientTop+n.clientHeight<=s){break}t=e}return t}function M({scrollEl:e,views:t,sortByVisibility:i=false,horizontal:n=false,rtl:s=false}){const r=e.scrollTop,a=r+e.clientHeight;const o=e.scrollLeft,l=o+e.clientWidth;function d(e){const t=e.div;const i=t.offsetTop+t.clientTop+t.clientHeight;return i>r}function c(e){const t=e.div;const i=t.offsetLeft+t.clientLeft;const n=i+t.clientWidth;return s?i<l:n>o}const h=[],u=new Set,p=t.length;let f=A(t,n?c:d);if(f>0&&f<p&&!n){f=k(f,t,r)}let g=n?l:-1;for(let e=f;e<p;e++){const _=t[e],w=_.div;const b=w.offsetLeft+w.clientLeft;const y=w.offsetTop+w.clientTop;const P=w.clientWidth,E=w.clientHeight;const S=b+P;const L=y+E;if(g===-1){if(L>=a){g=L}}else if((n?b:y)>g){break}if(L<=r||y>=a||S<=o||b>=l){continue}const C=Math.max(0,r-y)+Math.max(0,L-a);const T=Math.max(0,o-b)+Math.max(0,S-l);const I=(E-C)/E,M=(P-T)/P;const x=I*M*100|0;h.push({id:_.id,x:b,y:y,view:_,percent:x,widthPercent:M*100|0});u.add(_.id)}const m=h[0],v=h.at(-1);if(i){h.sort(function(e,t){const i=e.percent-t.percent;if(Math.abs(i)>.001){return-i}return e.id-t.id})}return{first:m,last:v,views:h,ids:u}}function x(e){e.preventDefault()}function N(e){let t=Math.hypot(e.deltaX,e.deltaY);const i=Math.atan2(e.deltaY,e.deltaX);if(-.25*Math.PI<i&&i<.75*Math.PI){t=-t}return t}function D(e){let t=N(e);const i=0;const n=1;const s=30;const r=30;if(e.deltaMode===i){t/=s*r}else if(e.deltaMode===n){t/=r}return t}function B(e){return Number.isInteger(e)&&e%90===0}function V(e){return Number.isInteger(e)&&Object.values(m).includes(e)&&e!==m.UNKNOWN}function O(e){return Number.isInteger(e)&&Object.values(v).includes(e)&&e!==v.UNKNOWN}function R(e){return e.width<=e.height}const F=new Promise(function(e){window.requestAnimationFrame(e)});t.animationStarted=F;const U=document.documentElement.style;t.docStyle=U;function z(e,t,i){return Math.min(Math.max(e,t),i)}class H{#classList=null;#percent=0;#visible=true;constructor(e){if(arguments.length>1){throw new Error("ProgressBar no longer accepts any additional options, "+"please use CSS rules to modify its appearance instead.")}const t=document.getElementById(e);this.#classList=t.classList}get percent(){return this.#percent}set percent(e){this.#percent=z(e,0,100);if(isNaN(e)){this.#classList.add("indeterminate");return}this.#classList.remove("indeterminate");U.setProperty("--progressBar-percent",`${this.#percent}%`)}setWidth(e){if(!e){return}const t=e.parentNode;const i=t.offsetWidth-e.offsetWidth;if(i>0){U.setProperty("--progressBar-end-offset",`${i}px`)}}hide(){if(!this.#visible){return}this.#visible=false;this.#classList.add("hidden")}show(){if(this.#visible){return}this.#visible=true;this.#classList.remove("hidden")}}t.ProgressBar=H;function W(){let e=document;let t=e.activeElement||e.querySelector(":focus");while(t?.shadowRoot){e=t.shadowRoot;t=e.activeElement||e.querySelector(":focus")}return t}function j(e){let t=m.VERTICAL,i=v.NONE;switch(e){case"SinglePage":t=m.PAGE;break;case"OneColumn":break;case"TwoPageLeft":t=m.PAGE;case"TwoColumnLeft":i=v.ODD;break;case"TwoPageRight":t=m.PAGE;case"TwoColumnRight":i=v.EVEN;break}return{scrollMode:t,spreadMode:i}}function $(e){switch(e){case"UseNone":return p.NONE;case"UseThumbs":return p.THUMBS;case"UseOutlines":return p.OUTLINE;case"UseAttachments":return p.ATTACHMENTS;case"UseOC":return p.LAYERS}return p.NONE}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.compatibilityParams=t.OptionKind=t.AppOptions=void 0;const o=Object.create(null);t.compatibilityParams=o;{const n=navigator.userAgent||"";const s=navigator.platform||"";const r=navigator.maxTouchPoints||1;const a=/Android/.test(n);const h=/\b(iPad|iPhone|iPod)(?=;)/.test(n)||s==="MacIntel"&&r>1;(function e(){if(h||a){o.maxCanvasPixels=5242880}})()}const l={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};t.OptionKind=l;const d={annotationEditorMode:{value:-1,kind:l.VIEWER+l.PREFERENCE},annotationMode:{value:2,kind:l.VIEWER+l.PREFERENCE},cursorToolOnLoad:{value:0,kind:l.VIEWER+l.PREFERENCE},defaultZoomValue:{value:"",kind:l.VIEWER+l.PREFERENCE},disableHistory:{value:false,kind:l.VIEWER},disablePageLabels:{value:false,kind:l.VIEWER+l.PREFERENCE},enablePermissions:{value:false,kind:l.VIEWER+l.PREFERENCE},enablePrintAutoRotate:{value:true,kind:l.VIEWER+l.PREFERENCE},enableScripting:{value:true,kind:l.VIEWER+l.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:l.VIEWER},externalLinkTarget:{value:0,kind:l.VIEWER+l.PREFERENCE},historyUpdateUrl:{value:false,kind:l.VIEWER+l.PREFERENCE},ignoreDestinationZoom:{value:false,kind:l.VIEWER+l.PREFERENCE},imageResourcesPath:{value:"../images/",kind:l.VIEWER},maxCanvasPixels:{value:16777216,kind:l.VIEWER},forcePageColors:{value:false,kind:l.VIEWER+l.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:l.VIEWER+l.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:l.VIEWER+l.PREFERENCE},pdfBugEnabled:{value:false,kind:l.VIEWER+l.PREFERENCE},printResolution:{value:150,kind:l.VIEWER},sidebarViewOnLoad:{value:-1,kind:l.VIEWER+l.PREFERENCE},scrollModeOnLoad:{value:-1,kind:l.VIEWER+l.PREFERENCE},spreadModeOnLoad:{value:-1,kind:l.VIEWER+l.PREFERENCE},textLayerMode:{value:1,kind:l.VIEWER+l.PREFERENCE},useOnlyCssZoom:{value:false,kind:l.VIEWER+l.PREFERENCE},viewerCssTheme:{value:0,kind:l.VIEWER+l.PREFERENCE},viewOnLoad:{value:0,kind:l.VIEWER+l.PREFERENCE},cMapPacked:{value:true,kind:l.API},cMapUrl:{value:"../libs/cmaps/",kind:l.API},disableAutoFetch:{value:false,kind:l.API+l.PREFERENCE},disableFontFace:{value:false,kind:l.API+l.PREFERENCE},disableRange:{value:false,kind:l.API+l.PREFERENCE},disableStream:{value:false,kind:l.API+l.PREFERENCE},docBaseUrl:{value:"",kind:l.API},enableXfa:{value:true,kind:l.API+l.PREFERENCE},fontExtraProperties:{value:false,kind:l.API},isEvalSupported:{value:true,kind:l.API},maxImageSize:{value:-1,kind:l.API},pdfBug:{value:false,kind:l.API},standardFontDataUrl:{value:"../fonts/",kind:l.API},verbosity:{value:1,kind:l.API},workerPort:{value:null,kind:l.WORKER},workerSrc:{value:"./js/libs/pdf.worker.min.js",kind:l.WORKER}};{d.defaultUrl={value:"",kind:l.VIEWER};d.disablePreferences={value:false,kind:l.VIEWER};d.locale={value:navigator.language||"en-US",kind:l.VIEWER};d.renderer={value:"canvas",kind:l.VIEWER+l.PREFERENCE};d.sandboxBundleSrc={value:"./js/libs/pdf.sandbox.js",kind:l.VIEWER}}const c=Object.create(null);class i{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(e){const t=c[e];if(t!==undefined){return t}const i=d[e];if(i!==undefined){return o[e]??i.value}return undefined}static getAll(e=null){const t=Object.create(null);for(const i in d){const n=d[i];if(e){if((e&n.kind)===0){continue}if(e===l.PREFERENCE){const r=n.value,a=typeof r;if(a==="boolean"||a==="string"||a==="number"&&Number.isInteger(r)){t[i]=r;continue}throw new Error(`Invalid type for preference: ${i}`)}}const s=c[i];t[i]=s!==undefined?s:o[i]??n.value}return t}static set(e,t){c[e]=t}static setAll(e){for(const t in e){c[t]=e[t]}}static remove(e){delete c[e]}static _hasUserOptions(){return Object.keys(c).length>0}}t.AppOptions=i},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.SimpleLinkService=t.PDFLinkService=t.LinkTarget=void 0;var o=i(1);const l="noopener noreferrer nofollow";const d={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};t.LinkTarget=d;function n(e,{url:t,target:i,rel:n,enabled:s=true}={}){if(!t||typeof t!=="string"){throw new Error('A valid "url" parameter must provided.')}const r=(0,o.removeNullCharacters)(t);if(s){e.href=e.title=r}else{e.href="";e.title=`Disabled: ${r}`;e.onclick=()=>{return false}}let a="";switch(i){case d.NONE:break;case d.SELF:a="_self";break;case d.BLANK:a="_blank";break;case d.PARENT:a="_parent";break;case d.TOP:a="_top";break}e.target=a;e.rel=typeof n==="string"?n:l}class c{#pagesRefCache=new Map;constructor({eventBus:e,externalLinkTarget:t=null,externalLinkRel:i=null,ignoreDestinationZoom:n=false}={}){this.eventBus=e;this.externalLinkTarget=t;this.externalLinkRel=i;this.externalLinkEnabled=true;this._ignoreDestinationZoom=n;this.baseUrl=null;this.pdfDocument=null;this.pdfViewer=null;this.pdfHistory=null}setDocument(e,t=null){this.baseUrl=t;this.pdfDocument=e;this.#pagesRefCache.clear()}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(e){this.pdfViewer.currentPageNumber=e}get rotation(){return this.pdfViewer.pagesRotation}set rotation(e){this.pdfViewer.pagesRotation=e}#goToDestinationHelper(t,i=null,n){const s=n[0];let e;if(typeof s==="object"&&s!==null){e=this._cachedPageNumber(s);if(!e){this.pdfDocument.getPageIndex(s).then(e=>{this.cachePageRef(e+1,s);this.#goToDestinationHelper(t,i,n)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${s}" is not `+`a valid page reference, for dest="${t}".`)});return}}else if(Number.isInteger(s)){e=s+1}else{console.error(`PDFLinkService.#goToDestinationHelper: "${s}" is not `+`a valid destination reference, for dest="${t}".`);return}if(!e||e<1||e>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${e}" is not `+`a valid page number, for dest="${t}".`);return}if(this.pdfHistory){this.pdfHistory.pushCurrentPosition();this.pdfHistory.push({namedDest:i,explicitDest:n,pageNumber:e})}this.pdfViewer.scrollPageIntoView({pageNumber:e,destArray:n,ignoreDestinationZoom:this._ignoreDestinationZoom})}async goToDestination(e){if(!this.pdfDocument){return}let t,i;if(typeof e==="string"){t=e;i=await this.pdfDocument.getDestination(e)}else{t=null;i=await e}if(!Array.isArray(i)){console.error(`PDFLinkService.goToDestination: "${i}" is not `+`a valid destination array, for dest="${e}".`);return}this.#goToDestinationHelper(e,t,i)}goToPage(e){if(!this.pdfDocument){return}const t=typeof e==="string"&&this.pdfViewer.pageLabelToPageNumber(e)||e|0;if(!(Number.isInteger(t)&&t>0&&t<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${e}" is not a valid page.`);return}if(this.pdfHistory){this.pdfHistory.pushCurrentPosition();this.pdfHistory.pushPage(t)}this.pdfViewer.scrollPageIntoView({pageNumber:t})}addLinkAttributes(e,t,i=false){n(e,{url:t,target:i?d.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(e){if(typeof e==="string"){if(e.length>0){return this.getAnchorUrl("#"+escape(e))}}else if(Array.isArray(e)){const t=JSON.stringify(e);if(t.length>0){return this.getAnchorUrl("#"+escape(t))}}return this.getAnchorUrl("")}getAnchorUrl(e){return(this.baseUrl||"")+e}setHash(e){if(!this.pdfDocument){return}let t,i;if(e.includes("=")){const n=(0,o.parseQueryString)(e);if(n.has("search")){this.eventBus.dispatch("findfromurlhash",{source:this,query:n.get("search").replace(/"/g,""),phraseSearch:n.get("phrase")==="true"})}if(n.has("page")){t=n.get("page")|0||1}if(n.has("zoom")){const s=n.get("zoom").split(",");const r=s[0];const a=parseFloat(r);if(!r.includes("Fit")){i=[null,{name:"XYZ"},s.length>1?s[1]|0:null,s.length>2?s[2]|0:null,a?a/100:r]}else{if(r==="Fit"||r==="FitB"){i=[null,{name:r}]}else if(r==="FitH"||r==="FitBH"||r==="FitV"||r==="FitBV"){i=[null,{name:r},s.length>1?s[1]|0:null]}else if(r==="FitR"){if(s.length!==5){console.error('PDFLinkService.setHash: Not enough parameters for "FitR".')}else{i=[null,{name:r},s[1]|0,s[2]|0,s[3]|0,s[4]|0]}}else{console.error(`PDFLinkService.setHash: "${r}" is not a valid zoom value.`)}}}if(i){this.pdfViewer.scrollPageIntoView({pageNumber:t||this.page,destArray:i,allowNegativeOffset:true})}else if(t){this.page=t}if(n.has("pagemode")){this.eventBus.dispatch("pagemode",{source:this,mode:n.get("pagemode")})}if(n.has("nameddest")){this.goToDestination(n.get("nameddest"))}}else{i=unescape(e);try{i=JSON.parse(i);if(!Array.isArray(i)){i=i.toString()}}catch(e){}if(typeof i==="string"||c.#isValidExplicitDestination(i)){this.goToDestination(i);return}console.error(`PDFLinkService.setHash: "${unescape(e)}" is not a valid destination.`)}}executeNamedAction(e){switch(e){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break;default:break}this.eventBus.dispatch("namedaction",{source:this,action:e})}cachePageRef(e,t){if(!t){return}const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;this.#pagesRefCache.set(i,e)}_cachedPageNumber(e){if(!e){return null}const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#pagesRefCache.get(t)||null}isPageVisible(e){return this.pdfViewer.isPageVisible(e)}isPageCached(e){return this.pdfViewer.isPageCached(e)}static#isValidExplicitDestination(t){if(!Array.isArray(t)){return false}const i=t.length;if(i<2){return false}const e=t[0];if(!(typeof e==="object"&&Number.isInteger(e.num)&&Number.isInteger(e.gen))&&!(Number.isInteger(e)&&e>=0)){return false}const n=t[1];if(!(typeof n==="object"&&typeof n.name==="string")){return false}let s=true;switch(n.name){case"XYZ":if(i!==5){return false}break;case"Fit":case"FitB":return i===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(i!==3){return false}break;case"FitR":if(i!==6){return false}s=false;break;default:return false}for(let e=2;e<i;e++){const r=t[e];if(!(typeof r==="number"||s&&r===null)){return false}}return true}}t.PDFLinkService=c;class s{constructor(){this.externalLinkEnabled=true}get pagesCount(){return 0}get page(){return 0}set page(e){}get rotation(){return 0}set rotation(e){}async goToDestination(e){}goToPage(e){}addLinkAttributes(e,t,i=false){n(e,{url:t,enabled:this.externalLinkEnabled})}getDestinationHash(e){return"#"}getAnchorUrl(e){return"#"}setHash(e){}executeNamedAction(e){}cachePageRef(e,t){}isPageVisible(e){return true}isPageCached(e){return true}}t.SimpleLinkService=s},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFViewerApplication=t.PDFPrintServiceFactory=t.DefaultExternalServices=void 0;var v=i(1);var p=i(5);var _=i(2);var f=i(6);var g=i(7);var m=i(3);var w=i(9);var b=i(10);var y=i(11);var P=i(12);var E=i(14);var S=i(15);var L=i(16);var C=i(18);var T=i(19);var I=i(20);var M=i(21);var x=i(22);var A=i(23);var k=i(24);var N=i(25);var D=i(26);var B=i(28);var V=i(39);var O=i(40);var l=i(41);const n=5e3;const R=1e4;const s=1e3;const F={UNKNOWN:-1,PREVIOUS:0,INITIAL:1};const o={AUTOMATIC:0,LIGHT:1,DARK:2};const h=["1.0","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2.0","2.1","2.2","2.3"];const u=["acrobat distiller","acrobat pdfwriter","adobe livecycle","adobe pdf library","adobe photoshop","ghostscript","tcpdf","cairo","dvipdfm","dvips","pdftex","pdfkit","itext","prince","quarkxpress","mac os x","microsoft","openoffice","oracle","luradocument","pdf-xchange","antenna house","aspose.cells","fpdf"];class r{constructor(){throw new Error("Cannot initialize DefaultExternalServices.")}static updateFindControlState(e){}static updateFindMatchesCount(e){}static initPassiveLoading(e){}static reportTelemetry(e){}static createDownloadManager(e){throw new Error("Not implemented: createDownloadManager")}static createPreferences(){throw new Error("Not implemented: createPreferences")}static createL10n(e){throw new Error("Not implemented: createL10n")}static createScripting(e){throw new Error("Not implemented: createScripting")}static get supportsIntegratedFind(){return(0,p.shadow)(this,"supportsIntegratedFind",false)}static get supportsDocumentFonts(){return(0,p.shadow)(this,"supportsDocumentFonts",true)}static get supportedMouseWheelZoomModifierKeys(){return(0,p.shadow)(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:true,metaKey:true})}static get isInAutomation(){return(0,p.shadow)(this,"isInAutomation",false)}static updateEditorStates(e){throw new Error("Not implemented: updateEditorStates")}}t.DefaultExternalServices=r;const U={initialBookmark:document.location.hash.substring(1),_initializedCapability:(0,p.createPromiseCapability)(),appConfig:null,pdfDocument:null,pdfLoadingTask:null,printService:null,pdfViewer:null,pdfThumbnailViewer:null,pdfRenderingQueue:null,pdfPresentationMode:null,pdfDocumentProperties:null,pdfLinkService:null,pdfHistory:null,pdfSidebar:null,pdfSidebarResizer:null,pdfOutlineViewer:null,pdfAttachmentViewer:null,pdfLayerViewer:null,pdfCursorTools:null,pdfScriptingManager:null,store:null,downloadManager:null,overlayManager:null,preferences:null,toolbar:null,secondaryToolbar:null,eventBus:null,l10n:null,annotationEditorParams:null,isInitialViewSet:false,downloadComplete:false,isViewerEmbedded:window.parent!==window,url:"",baseUrl:"",_downloadUrl:"",externalServices:r,_boundEvents:Object.create(null),documentInfo:null,metadata:null,_contentDispositionFilename:null,_contentLength:null,_saveInProgress:false,_docStats:null,_wheelUnusedTicks:0,_idleCallbacks:new Set,_PDFBug:null,_hasAnnotationEditors:false,_title:document.title,_printAnnotationStoragePromise:null,async initialize(e){this.preferences=this.externalServices.createPreferences();this.appConfig=e;await this._readPreferences();await this._parseHashParameters();this._forceCssTheme();await this._initializeL10n();if(this.isViewerEmbedded&&_.AppOptions.get("externalLinkTarget")===m.LinkTarget.NONE){_.AppOptions.set("externalLinkTarget",m.LinkTarget.TOP)}await this._initializeViewerComponents();this.bindEvents();this.bindWindowEvents();const t=e.appContainer||document.documentElement;this.l10n.translate(t).then(()=>{this.eventBus.dispatch("localized",{source:this})});this._initializedCapability.resolve()},async _readPreferences(){if(_.AppOptions.get("disablePreferences")){return}if(_.AppOptions._hasUserOptions()){console.warn("_readPreferences: The Preferences may override manually set AppOptions; "+'please use the "disablePreferences"-option in order to prevent that.')}try{_.AppOptions.setAll(await this.preferences.getAll())}catch(e){console.error(`_readPreferences: "${e?.message}".`)}},async _parseHashParameters(){if(!_.AppOptions.get("pdfBugEnabled")){return}const e=document.location.hash.substring(1);if(!e){return}const{mainContainer:t,viewerContainer:i}=this.appConfig,n=(0,v.parseQueryString)(e);if(n.get("disableworker")==="true"){try{await d()}catch(e){console.error(`_parseHashParameters: "${e.message}".`)}}if(n.has("disablerange")){_.AppOptions.set("disableRange",n.get("disablerange")==="true")}if(n.has("disablestream")){_.AppOptions.set("disableStream",n.get("disablestream")==="true")}if(n.has("disableautofetch")){_.AppOptions.set("disableAutoFetch",n.get("disableautofetch")==="true")}if(n.has("disablefontface")){_.AppOptions.set("disableFontFace",n.get("disablefontface")==="true")}if(n.has("disablehistory")){_.AppOptions.set("disableHistory",n.get("disablehistory")==="true")}if(n.has("verbosity")){_.AppOptions.set("verbosity",n.get("verbosity")|0)}if(n.has("textlayer")){switch(n.get("textlayer")){case"off":_.AppOptions.set("textLayerMode",v.TextLayerMode.DISABLE);break;case"visible":case"shadow":case"hover":i.classList.add(`textLayer-${n.get("textlayer")}`);try{await c(this);this._PDFBug.loadCSS()}catch(e){console.error(`_parseHashParameters: "${e.message}".`)}break}}if(n.has("pdfbug")){_.AppOptions.set("pdfBug",true);_.AppOptions.set("fontExtraProperties",true);const s=n.get("pdfbug").split(",");try{await c(this);this._PDFBug.init({OPS:p.OPS},t,s)}catch(e){console.error(`_parseHashParameters: "${e.message}".`)}}if(n.has("locale")){_.AppOptions.set("locale",n.get("locale"))}},async _initializeL10n(){this.l10n=this.externalServices.createL10n({locale:_.AppOptions.get("locale")});const e=await this.l10n.getDirection();document.getElementsByTagName("html")[0].dir=e},_forceCssTheme(){const i=_.AppOptions.get("viewerCssTheme");if(i===o.AUTOMATIC||!Object.values(o).includes(i)){return}try{const n=document.styleSheets[0];const s=n?.cssRules||[];for(let e=0,t=s.length;e<t;e++){const r=s[e];if(r instanceof CSSMediaRule&&r.media?.[0]==="(prefers-color-scheme: dark)"){if(i===o.LIGHT){n.deleteRule(e);return}const a=/^@media \(prefers-color-scheme: dark\) {\n\s*([\w\s-.,:;/\\{}()]+)\n}$/.exec(r.cssText);if(a?.[1]){n.deleteRule(e);n.insertRule(a[1],e)}return}}}catch(e){console.error(`_forceCssTheme: "${e?.message}".`)}},async _initializeViewerComponents(){const{appConfig:e,externalServices:t}=this;const i=t.isInAutomation?new f.AutomationEventBus:new f.EventBus;this.eventBus=i;this.overlayManager=new b.OverlayManager;const n=new x.PDFRenderingQueue;n.onIdle=this._cleanup.bind(this);this.pdfRenderingQueue=n;const s=new m.PDFLinkService({eventBus:i,externalLinkTarget:_.AppOptions.get("externalLinkTarget"),externalLinkRel:_.AppOptions.get("externalLinkRel"),ignoreDestinationZoom:_.AppOptions.get("ignoreDestinationZoom")});this.pdfLinkService=s;const r=t.createDownloadManager();this.downloadManager=r;const a=new L.PDFFindController({linkService:s,eventBus:i});this.findController=a;const o=new A.PDFScriptingManager({eventBus:i,sandboxBundleSrc:_.AppOptions.get("sandboxBundleSrc"),scriptingFactory:t,docPropertiesLookup:this._scriptingDocProperties.bind(this)});this.pdfScriptingManager=o;const l=e.mainContainer,d=e.viewerContainer;const c=_.AppOptions.get("annotationEditorMode");const h=_.AppOptions.get("forcePageColors")||window.matchMedia("(forced-colors: active)").matches?{background:_.AppOptions.get("pageColorsBackground"),foreground:_.AppOptions.get("pageColorsForeground")}:null;this.pdfViewer=new B.PDFViewer({container:l,viewer:d,eventBus:i,renderingQueue:n,linkService:s,downloadManager:r,findController:a,scriptingManager:_.AppOptions.get("enableScripting")&&o,renderer:_.AppOptions.get("renderer"),l10n:this.l10n,textLayerMode:_.AppOptions.get("textLayerMode"),annotationMode:_.AppOptions.get("annotationMode"),annotationEditorMode:c,imageResourcesPath:_.AppOptions.get("imageResourcesPath"),enablePrintAutoRotate:_.AppOptions.get("enablePrintAutoRotate"),useOnlyCssZoom:_.AppOptions.get("useOnlyCssZoom"),maxCanvasPixels:_.AppOptions.get("maxCanvasPixels"),enablePermissions:_.AppOptions.get("enablePermissions"),pageColors:h});n.setViewer(this.pdfViewer);s.setViewer(this.pdfViewer);o.setViewer(this.pdfViewer);this.pdfThumbnailViewer=new D.PDFThumbnailViewer({container:e.sidebar.thumbnailView,eventBus:i,renderingQueue:n,linkService:s,l10n:this.l10n,pageColors:h});n.setThumbnailViewer(this.pdfThumbnailViewer);if(!this.isViewerEmbedded&&!_.AppOptions.get("disableHistory")){this.pdfHistory=new C.PDFHistory({linkService:s,eventBus:i});s.setHistory(this.pdfHistory)}if(!this.supportsIntegratedFind){this.findBar=new S.PDFFindBar(e.findBar,i,this.l10n)}if(c!==p.AnnotationEditorType.DISABLE){this.annotationEditorParams=new w.AnnotationEditorParams(e.annotationEditorParams,i);for(const u of[document.getElementById("editorModeButtons"),document.getElementById("editorModeSeparator")]){u.classList.remove("hidden")}}this.pdfDocumentProperties=new E.PDFDocumentProperties(e.documentProperties,this.overlayManager,i,this.l10n,()=>{return this._docFilename});this.pdfCursorTools=new g.PDFCursorTools({container:l,eventBus:i,cursorToolOnLoad:_.AppOptions.get("cursorToolOnLoad")});this.toolbar=new O.Toolbar(e.toolbar,i,this.l10n);this.secondaryToolbar=new V.SecondaryToolbar(e.secondaryToolbar,i);if(this.supportsFullscreen){this.pdfPresentationMode=new M.PDFPresentationMode({container:l,pdfViewer:this.pdfViewer,eventBus:i})}this.passwordPrompt=new y.PasswordPrompt(e.passwordOverlay,this.overlayManager,this.l10n,this.isViewerEmbedded);this.pdfOutlineViewer=new I.PDFOutlineViewer({container:e.sidebar.outlineView,eventBus:i,linkService:s});this.pdfAttachmentViewer=new P.PDFAttachmentViewer({container:e.sidebar.attachmentsView,eventBus:i,downloadManager:r});this.pdfLayerViewer=new T.PDFLayerViewer({container:e.sidebar.layersView,eventBus:i,l10n:this.l10n});this.pdfSidebar=new k.PDFSidebar({elements:e.sidebar,pdfViewer:this.pdfViewer,pdfThumbnailViewer:this.pdfThumbnailViewer,eventBus:i,l10n:this.l10n});this.pdfSidebar.onToggled=this.forceRendering.bind(this);this.pdfSidebarResizer=new N.PDFSidebarResizer(e.sidebarResizer,i,this.l10n)},run(e){this.initialize(e).then(H)},get initialized(){return this._initializedCapability.settled},get initializedPromise(){return this._initializedCapability.promise},zoomIn(e){if(this.pdfViewer.isInPresentationMode){return}this.pdfViewer.increaseScale(e)},zoomOut(e){if(this.pdfViewer.isInPresentationMode){return}this.pdfViewer.decreaseScale(e)},zoomReset(){if(this.pdfViewer.isInPresentationMode){return}this.pdfViewer.currentScaleValue=v.DEFAULT_SCALE_VALUE},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0},get page(){return this.pdfViewer.currentPageNumber},set page(e){this.pdfViewer.currentPageNumber=e},get supportsPrinting(){return Oe.instance.supportsPrinting},get supportsFullscreen(){return(0,p.shadow)(this,"supportsFullscreen",document.fullscreenEnabled)},get supportsIntegratedFind(){return this.externalServices.supportsIntegratedFind},get supportsDocumentFonts(){return this.externalServices.supportsDocumentFonts},get loadingBar(){const e=new v.ProgressBar("loadingBar");return(0,p.shadow)(this,"loadingBar",e)},get supportedMouseWheelZoomModifierKeys(){return this.externalServices.supportedMouseWheelZoomModifierKeys},initPassiveLoading(){throw new Error("Not implemented: initPassiveLoading")},setTitleUsingUrl(t="",e=null){this.url=t;this.baseUrl=t.split("#")[0];if(e){this._downloadUrl=e===t?this.baseUrl:e.split("#")[0]}let i=(0,p.getPdfFilenameFromUrl)(t,"");if(!i){try{i=decodeURIComponent((0,p.getFilenameFromUrl)(t))||t}catch(e){i=t}}this.setTitle(i)},setTitle(e=this._title){this._title=e;if(this.isViewerEmbedded){return}document.title=`${this._hasAnnotationEditors?"* ":""}${e}`},get _docFilename(){return this._contentDispositionFilename||(0,p.getPdfFilenameFromUrl)(this.url)},_hideViewBookmark(){const{toolbar:e,secondaryToolbar:t}=this.appConfig;e.viewBookmark.hidden=true;t.viewBookmarkButton.hidden=true},_cancelIdleCallbacks(){if(!this._idleCallbacks.size){return}for(const e of this._idleCallbacks){window.cancelIdleCallback(e)}this._idleCallbacks.clear()},async close(){this._unblockDocumentLoadEvent();this._hideViewBookmark();const{container:e}=this.appConfig.errorWrapper;e.hidden=true;if(!this.pdfLoadingTask){return}if(this.pdfDocument?.annotationStorage.size>0&&this._annotationStorageModified){try{await this.save()}catch(e){}}const t=[];t.push(this.pdfLoadingTask.destroy());this.pdfLoadingTask=null;if(this.pdfDocument){this.pdfDocument=null;this.pdfThumbnailViewer.setDocument(null);this.pdfViewer.setDocument(null);this.pdfLinkService.setDocument(null);this.pdfDocumentProperties.setDocument(null)}this.pdfLinkService.externalLinkEnabled=true;this.store=null;this.isInitialViewSet=false;this.downloadComplete=false;this.url="";this.baseUrl="";this._downloadUrl="";this.documentInfo=null;this.metadata=null;this._contentDispositionFilename=null;this._contentLength=null;this._saveInProgress=false;this._docStats=null;this._hasAnnotationEditors=false;this._cancelIdleCallbacks();t.push(this.pdfScriptingManager.destroyPromise);this.setTitle();this.pdfSidebar.reset();this.pdfOutlineViewer.reset();this.pdfAttachmentViewer.reset();this.pdfLayerViewer.reset();this.pdfHistory?.reset();this.findBar?.reset();this.toolbar.reset();this.secondaryToolbar.reset();this._PDFBug?.cleanup();await Promise.all(t)},async open(e,t){if(this.pdfLoadingTask){await this.close()}const i=_.AppOptions.getAll(_.OptionKind.WORKER);for(const a in i){p.GlobalWorkerOptions[a]=i[a]}const n=Object.create(null);if(typeof e==="string"){this.setTitleUsingUrl(e,e);n.url=e}else if(e&&"byteLength"in e){n.data=e}else if(e.url&&e.originalUrl){this.setTitleUsingUrl(e.originalUrl,e.url);n.url=e.url}const s=_.AppOptions.getAll(_.OptionKind.API);for(const a in s){let e=s[a];if(a==="docBaseUrl"&&!e){}n[a]=e}if(t){for(const a in t){n[a]=t[a]}}const r=(0,p.getDocument)(n);this.pdfLoadingTask=r;r.onPassword=(e,t)=>{this.pdfLinkService.externalLinkEnabled=false;this.passwordPrompt.setUpdateCallback(e,t);this.passwordPrompt.open()};r.onProgress=({loaded:e,total:t})=>{this.progress(e/t)};r.onUnsupportedFeature=this.fallback.bind(this);return r.promise.then(e=>{this.load(e)},t=>{if(r!==this.pdfLoadingTask){return undefined}let e="loading_error";if(t instanceof p.InvalidPDFException){e="invalid_file_error"}else if(t instanceof p.MissingPDFException){e="missing_file_error"}else if(t instanceof p.UnexpectedResponseException){e="unexpected_response_error"}return this.l10n.get(e).then(e=>{this._documentError(e,{message:t?.message});throw t})})},_ensureDownloadComplete(){if(this.pdfDocument&&this.downloadComplete){return}throw new Error("PDF document not downloaded.")},async download(){const t=this._downloadUrl,i=this._docFilename;try{this._ensureDownloadComplete();const e=await this.pdfDocument.getData();const n=new Blob([e],{type:"application/pdf"});await this.downloadManager.download(n,t,i)}catch(e){await this.downloadManager.downloadUrl(t,i)}},async save(){if(this._saveInProgress){return}this._saveInProgress=true;await this.pdfScriptingManager.dispatchWillSave();const e=this._downloadUrl,t=this._docFilename;try{this._ensureDownloadComplete();const i=await this.pdfDocument.saveDocument();const n=new Blob([i],{type:"application/pdf"});await this.downloadManager.download(n,e,t)}catch(e){console.error(`Error when saving the document: ${e.message}`);await this.download()}finally{await this.pdfScriptingManager.dispatchDidSave();this._saveInProgress=false}if(this._hasAnnotationEditors){this.externalServices.reportTelemetry({type:"editing",data:{type:"save"}})}},downloadOrSave(){if(this.pdfDocument?.annotationStorage.size>0){this.save()}else{this.download()}},fallback(e){this.externalServices.reportTelemetry({type:"unsupportedFeature",featureId:e})},_documentError(e,t=null){this._unblockDocumentLoadEvent();this._otherError(e,t);this.eventBus.dispatch("documenterror",{source:this,message:e,reason:t?.message??null})},_otherError(e,t=null){const i=[this.l10n.get("error_version_info",{version:p.version||"?",build:p.build||"?"})];if(t){i.push(this.l10n.get("error_message",{message:t.message}));if(t.stack){i.push(this.l10n.get("error_stack",{stack:t.stack}))}else{if(t.filename){i.push(this.l10n.get("error_file",{file:t.filename}))}if(t.lineNumber){i.push(this.l10n.get("error_line",{line:t.lineNumber}))}}}const n=this.appConfig.errorWrapper;const s=n.container;s.hidden=false;const r=n.errorMessage;r.textContent=e;const a=n.closeButton;a.onclick=function(){s.hidden=true};const o=n.errorMoreInfo;const l=n.moreInfoButton;const d=n.lessInfoButton;l.onclick=function(){o.hidden=false;l.hidden=true;d.hidden=false;o.style.height=o.scrollHeight+"px"};d.onclick=function(){o.hidden=true;l.hidden=false;d.hidden=true};l.oncontextmenu=v.noContextMenuHandler;d.oncontextmenu=v.noContextMenuHandler;a.oncontextmenu=v.noContextMenuHandler;l.hidden=false;d.hidden=true;Promise.all(i).then(e=>{o.value=e.join("\n")})},progress(e){if(this.downloadComplete){return}const t=Math.round(e*100);if(t<=this.loadingBar.percent){return}this.loadingBar.percent=t;const i=this.pdfDocument?.loadingParams.disableAutoFetch??_.AppOptions.get("disableAutoFetch");if(!i||isNaN(t)){return}if(this.disableAutoFetchLoadingBarTimeout){clearTimeout(this.disableAutoFetchLoadingBarTimeout);this.disableAutoFetchLoadingBarTimeout=null}this.loadingBar.show();this.disableAutoFetchLoadingBarTimeout=setTimeout(()=>{this.loadingBar.hide();this.disableAutoFetchLoadingBarTimeout=null},n)},load(f){this.pdfDocument=f;f.getDownloadInfo().then(({length:e})=>{this._contentLength=e;this.downloadComplete=true;this.loadingBar.hide();s.then(()=>{this.eventBus.dispatch("documentloaded",{source:this})})});const t=f.getPageLayout().catch(function(){});const i=f.getPageMode().catch(function(){});const n=f.getOpenAction().catch(function(){});this.toolbar.setPagesCount(f.numPages,false);this.secondaryToolbar.setPagesCount(f.numPages);let e;e=null;this.pdfLinkService.setDocument(f,e);this.pdfDocumentProperties.setDocument(f);const g=this.pdfViewer;g.setDocument(f);const{firstPagePromise:s,onePageRendered:r,pagesPromise:m}=g;const a=this.pdfThumbnailViewer;a.setDocument(f);const o=(this.store=new l.ViewHistory(f.fingerprints[0])).getMultiple({page:null,zoom:v.DEFAULT_SCALE_VALUE,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:v.SidebarView.UNKNOWN,scrollMode:v.ScrollMode.UNKNOWN,spreadMode:v.SpreadMode.UNKNOWN}).catch(()=>{return Object.create(null)});s.then(e=>{this.loadingBar.setWidth(this.appConfig.viewerContainer);this._initializeAnnotationStorageCallbacks(f);Promise.all([v.animationStarted,o,t,i,n]).then(async([e,t,i,n,s])=>{const r=_.AppOptions.get("viewOnLoad");this._initializePdfHistory({fingerprint:f.fingerprints[0],viewOnLoad:r,initialDest:s?.dest});const a=this.initialBookmark;const o=_.AppOptions.get("defaultZoomValue");let l=o?`zoom=${o}`:null;let d=null;let c=_.AppOptions.get("sidebarViewOnLoad");let h=_.AppOptions.get("scrollModeOnLoad");let u=_.AppOptions.get("spreadModeOnLoad");if(t.page&&r!==F.INITIAL){l=`page=${t.page}&zoom=${o||t.zoom},`+`${t.scrollLeft},${t.scrollTop}`;d=parseInt(t.rotation,10);if(c===v.SidebarView.UNKNOWN){c=t.sidebarView|0}if(h===v.ScrollMode.UNKNOWN){h=t.scrollMode|0}if(u===v.SpreadMode.UNKNOWN){u=t.spreadMode|0}}if(n&&c===v.SidebarView.UNKNOWN){c=(0,v.apiPageModeToSidebarView)(n)}if(i&&h===v.ScrollMode.UNKNOWN&&u===v.SpreadMode.UNKNOWN){const p=(0,v.apiPageLayoutToViewerModes)(i);u=p.spreadMode}this.setInitialView(l,{rotation:d,sidebarView:c,scrollMode:h,spreadMode:u});this.eventBus.dispatch("documentinit",{source:this});if(!this.isViewerEmbedded){g.focus()}await Promise.race([m,new Promise(e=>{setTimeout(e,R)})]);if(!a&&!l){return}if(g.hasEqualPageSizes){return}this.initialBookmark=a;g.currentScaleValue=g.currentScaleValue;this.setInitialView(l)}).catch(()=>{this.setInitialView()}).then(function(){g.update()})});m.then(()=>{this._unblockDocumentLoadEvent();this._initializeAutoPrint(f,n)},t=>{this.l10n.get("loading_error").then(e=>{this._documentError(e,{message:t?.message})})});r.then(e=>{this.externalServices.reportTelemetry({type:"pageInfo",timestamp:e.timestamp});f.getOutline().then(e=>{if(f!==this.pdfDocument){return}this.pdfOutlineViewer.render({outline:e,pdfDocument:f})});f.getAttachments().then(e=>{if(f!==this.pdfDocument){return}this.pdfAttachmentViewer.render({attachments:e})});g.optionalContentConfigPromise.then(e=>{if(f!==this.pdfDocument){return}this.pdfLayerViewer.render({optionalContentConfig:e,pdfDocument:f})});if("requestIdleCallback"in window){const t=window.requestIdleCallback(()=>{this._collectTelemetry(f);this._idleCallbacks.delete(t)},{timeout:1e3});this._idleCallbacks.add(t)}});this._initializePageLabels(f);this._initializeMetadata(f)},async _scriptingDocProperties(e){if(!this.documentInfo){await new Promise(e=>{this.eventBus._on("metadataloaded",e,{once:true})});if(e!==this.pdfDocument){return null}}if(!this._contentLength){await new Promise(e=>{this.eventBus._on("documentloaded",e,{once:true})});if(e!==this.pdfDocument){return null}}return{...this.documentInfo,baseURL:this.baseUrl,filesize:this._contentLength,filename:this._docFilename,metadata:this.metadata?.getRaw(),authors:this.metadata?.get("dc:creator"),numPages:this.pagesCount,URL:this.url}},async _collectTelemetry(e){const t=await this.pdfDocument.getMarkInfo();if(e!==this.pdfDocument){return}const i=t?.Marked||false;this.externalServices.reportTelemetry({type:"tagged",tagged:i})},async _initializeAutoPrint(e,t){const[i,n]=await Promise.all([t,!this.pdfViewer.enableScripting?e.getJavaScript():null]);if(e!==this.pdfDocument){return}let s=false;if(i?.action==="Print"){s=true}if(n){n.some(e=>{if(!e){return false}console.warn("Warning: JavaScript support is not enabled");this.fallback(p.UNSUPPORTED_FEATURES.javaScript);return true});if(!s){for(const r of n){if(r&&v.AutoPrintRegExp.test(r)){s=true;break}}}}if(s){this.triggerPrinting()}},async _initializeMetadata(e){const{info:t,metadata:i,contentDispositionFilename:n,contentLength:s}=await e.getMetadata();if(e!==this.pdfDocument){return}this.documentInfo=t;this.metadata=i;this._contentDispositionFilename??=n;this._contentLength??=s;console.log(`PDF ${e.fingerprints[0]} [${t.PDFFormatVersion} `+`${(t.Producer||"-").trim()} / ${(t.Creator||"-").trim()}] `+`(PDF.js: ${p.version||"-"})`);let r=t.Title;const a=i?.get("dc:title");if(a){if(a!=="Untitled"&&!/[\uFFF0-\uFFFF]/g.test(a)){r=a}}if(r){this.setTitle(`${r} - ${this._contentDispositionFilename||this._title}`)}else if(this._contentDispositionFilename){this.setTitle(this._contentDispositionFilename)}if(t.IsXFAPresent&&!t.IsAcroFormPresent&&!e.isPureXfa){if(e.loadingParams.enableXfa){console.warn("Warning: XFA Foreground documents are not supported")}else{console.warn("Warning: XFA support is not enabled")}this.fallback(p.UNSUPPORTED_FEATURES.forms)}else if((t.IsAcroFormPresent||t.IsXFAPresent)&&!this.pdfViewer.renderForms){console.warn("Warning: Interactive form support is not enabled");this.fallback(p.UNSUPPORTED_FEATURES.forms)}if(t.IsSignaturesPresent){console.warn("Warning: Digital signatures validation is not supported");this.fallback(p.UNSUPPORTED_FEATURES.signatures)}let o="other";if(h.includes(t.PDFFormatVersion)){o=`v${t.PDFFormatVersion.replace(".","_")}`}let l="other";if(t.Producer){const c=t.Producer.toLowerCase();u.some(function(e){if(!c.includes(e)){return false}l=e.replace(/[ .-]/g,"_");return true})}let d=null;if(t.IsXFAPresent){d="xfa"}else if(t.IsAcroFormPresent){d="acroform"}this.externalServices.reportTelemetry({type:"documentInfo",version:o,generator:l,formType:d});this.eventBus.dispatch("metadataloaded",{source:this})},async _initializePageLabels(e){const t=await e.getPageLabels();if(e!==this.pdfDocument){return}if(!t||_.AppOptions.get("disablePageLabels")){return}const i=t.length;let n=0,s=0;for(let e=0;e<i;e++){const l=t[e];if(l===(e+1).toString()){n++}else if(l===""){s++}else{break}}if(n>=i||s>=i){return}const{pdfViewer:r,pdfThumbnailViewer:a,toolbar:o}=this;r.setPageLabels(t);a.setPageLabels(t);o.setPagesCount(i,true);o.setPageNumber(r.currentPageNumber,r.currentPageLabel)},_initializePdfHistory({fingerprint:e,viewOnLoad:t,initialDest:i=null}){if(!this.pdfHistory){return}this.pdfHistory.initialize({fingerprint:e,resetHistory:t===F.INITIAL,updateUrl:_.AppOptions.get("historyUpdateUrl")});if(this.pdfHistory.initialBookmark){this.initialBookmark=this.pdfHistory.initialBookmark;this.initialRotation=this.pdfHistory.initialRotation}if(i&&!this.initialBookmark&&t===F.UNKNOWN){this.initialBookmark=JSON.stringify(i);this.pdfHistory.push({explicitDest:i,pageNumber:null})}},_initializeAnnotationStorageCallbacks(e){if(e!==this.pdfDocument){return}const{annotationStorage:t}=e;t.onSetModified=()=>{window.addEventListener("beforeunload",Be);this._annotationStorageModified=true};t.onResetModified=()=>{window.removeEventListener("beforeunload",Be);delete this._annotationStorageModified};t.onAnnotationEditor=e=>{this._hasAnnotationEditors=!!e;this.setTitle();if(e){this.externalServices.reportTelemetry({type:"editing",data:{type:e}})}}},setInitialView(e,{rotation:t,sidebarView:i,scrollMode:n,spreadMode:s}={}){const r=e=>{if((0,v.isValidRotation)(e)){this.pdfViewer.pagesRotation=e}};const a=(e,t)=>{if((0,v.isValidScrollMode)(e)){this.pdfViewer.scrollMode=e}if((0,v.isValidSpreadMode)(t)){this.pdfViewer.spreadMode=t}};this.isInitialViewSet=true;this.pdfSidebar.setInitialView(i);a(n,s);if(this.initialBookmark){r(this.initialRotation);delete this.initialRotation;this.pdfLinkService.setHash(this.initialBookmark);this.initialBookmark=null}else if(e){r(t);this.pdfLinkService.setHash(e)}this.toolbar.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel);this.secondaryToolbar.setPageNumber(this.pdfViewer.currentPageNumber);if(!this.pdfViewer.currentScaleValue){this.pdfViewer.currentScaleValue=v.DEFAULT_SCALE_VALUE}},_cleanup(){if(!this.pdfDocument){return}this.pdfViewer.cleanup();this.pdfThumbnailViewer.cleanup();this.pdfDocument.cleanup(this.pdfViewer.renderer===v.RendererType.SVG)},forceRendering(){this.pdfRenderingQueue.printing=!!this.printService;this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar.visibleView===v.SidebarView.THUMBS;this.pdfRenderingQueue.renderHighestPriority()},beforePrint(){this._printAnnotationStoragePromise=this.pdfScriptingManager.dispatchWillPrint().catch(()=>{}).then(()=>{return this.pdfDocument?.annotationStorage.print});if(this.printService){return}if(!this.supportsPrinting){this.l10n.get("printing_not_supported").then(e=>{this._otherError(e)});return}if(!this.pdfViewer.pageViewsReady){this.l10n.get("printing_not_ready").then(e=>{window.alert(e)});return}const e=this.pdfViewer.getPagesOverview();const t=this.appConfig.printContainer;const i=_.AppOptions.get("printResolution");const n=this.pdfViewer.optionalContentConfigPromise;const s=Oe.instance.createPrintService(this.pdfDocument,e,t,i,n,this._printAnnotationStoragePromise,this.l10n);this.printService=s;this.forceRendering();s.layout();this.externalServices.reportTelemetry({type:"print"});if(this._hasAnnotationEditors){this.externalServices.reportTelemetry({type:"editing",data:{type:"print"}})}},afterPrint(){if(this._printAnnotationStoragePromise){this._printAnnotationStoragePromise.then(()=>{this.pdfScriptingManager.dispatchDidPrint()});this._printAnnotationStoragePromise=null}if(this.printService){this.printService.destroy();this.printService=null;this.pdfDocument?.annotationStorage.resetModified()}this.forceRendering()},rotatePages(e){this.pdfViewer.pagesRotation+=e},requestPresentationMode(){this.pdfPresentationMode?.request()},triggerPrinting(){if(!this.supportsPrinting){return}},bindEvents(){const{eventBus:e,_boundEvents:t}=this;t.beforePrint=this.beforePrint.bind(this);t.afterPrint=this.afterPrint.bind(this);e._on("resize",q);e._on("hashchange",Y);e._on("beforeprint",t.beforePrint);e._on("afterprint",t.afterPrint);e._on("pagerendered",W);e._on("updateviewarea",X);e._on("pagechanging",Ce);e._on("scalechanging",Se);e._on("rotationchanging",Le);e._on("sidebarviewchanged",K);e._on("pagemode",j);e._on("namedaction",$);e._on("presentationmodechanged",G);e._on("presentationmode",te);e._on("switchannotationeditormode",ie);e._on("switchannotationeditorparams",ne);e._on("firstpage",ae);e._on("lastpage",oe);e._on("nextpage",le);e._on("previouspage",de);e._on("zoomin",ce);e._on("zoomout",he);e._on("zoomreset",ue);e._on("pagenumberchanged",pe);e._on("scalechanged",fe);e._on("rotatecw",ge);e._on("rotateccw",me);e._on("optionalcontentconfig",ve);e._on("switchscrollmode",_e);e._on("scrollmodechanged",Z);e._on("switchspreadmode",we);e._on("spreadmodechanged",Q);e._on("documentproperties",be);e._on("findfromurlhash",ye);e._on("updatefindmatchescount",Pe);e._on("updatefindcontrolstate",Ee);if(_.AppOptions.get("pdfBug")){t.reportPageStatsPDFBug=z;e._on("pagerendered",t.reportPageStatsPDFBug);e._on("pagechanging",t.reportPageStatsPDFBug)}e._on("fileinputchange",J);e._on("openfile",ee)},bindWindowEvents(){const{eventBus:t,_boundEvents:i}=this;function n(e=null){if(e){Te(e)}const t=window.matchMedia(`(resolution: ${window.devicePixelRatio||1}dppx)`);t.addEventListener("change",n,{once:true});i.removeWindowResolutionChange||=function(){t.removeEventListener("change",n);i.removeWindowResolutionChange=null}}n();i.windowResize=()=>{t.dispatch("resize",{source:window})};i.windowHashChange=()=>{t.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})};i.windowBeforePrint=()=>{t.dispatch("beforeprint",{source:window})};i.windowAfterPrint=()=>{t.dispatch("afterprint",{source:window})};i.windowUpdateFromSandbox=e=>{t.dispatch("updatefromsandbox",{source:window,detail:e.detail})};window.addEventListener("visibilitychange",Ie);window.addEventListener("wheel",Ae,{passive:false});window.addEventListener("touchstart",ke,{passive:false});window.addEventListener("click",Ne);window.addEventListener("keydown",De);window.addEventListener("resize",i.windowResize);window.addEventListener("hashchange",i.windowHashChange);window.addEventListener("beforeprint",i.windowBeforePrint);window.addEventListener("afterprint",i.windowAfterPrint);window.addEventListener("updatefromsandbox",i.windowUpdateFromSandbox)},unbindEvents(){const{eventBus:e,_boundEvents:t}=this;e._off("resize",q);e._off("hashchange",Y);e._off("beforeprint",t.beforePrint);e._off("afterprint",t.afterPrint);e._off("pagerendered",W);e._off("updateviewarea",X);e._off("pagechanging",Ce);e._off("scalechanging",Se);e._off("rotationchanging",Le);e._off("sidebarviewchanged",K);e._off("pagemode",j);e._off("namedaction",$);e._off("presentationmodechanged",G);e._off("presentationmode",te);e._off("firstpage",ae);e._off("lastpage",oe);e._off("nextpage",le);e._off("previouspage",de);e._off("zoomin",ce);e._off("zoomout",he);e._off("zoomreset",ue);e._off("pagenumberchanged",pe);e._off("scalechanged",fe);e._off("rotatecw",ge);e._off("rotateccw",me);e._off("optionalcontentconfig",ve);e._off("switchscrollmode",_e);e._off("scrollmodechanged",Z);e._off("switchspreadmode",we);e._off("spreadmodechanged",Q);e._off("documentproperties",be);e._off("findfromurlhash",ye);e._off("updatefindmatchescount",Pe);e._off("updatefindcontrolstate",Ee);if(t.reportPageStatsPDFBug){e._off("pagerendered",t.reportPageStatsPDFBug);e._off("pagechanging",t.reportPageStatsPDFBug);t.reportPageStatsPDFBug=null}e._off("fileinputchange",J);e._off("openfile",ee);t.beforePrint=null;t.afterPrint=null},unbindWindowEvents(){const{_boundEvents:e}=this;window.removeEventListener("visibilitychange",Ie);window.removeEventListener("wheel",Ae,{passive:false});window.removeEventListener("touchstart",ke,{passive:false});window.removeEventListener("click",Ne);window.removeEventListener("keydown",De);window.removeEventListener("resize",e.windowResize);window.removeEventListener("hashchange",e.windowHashChange);window.removeEventListener("beforeprint",e.windowBeforePrint);window.removeEventListener("afterprint",e.windowAfterPrint);window.removeEventListener("updatefromsandbox",e.windowUpdateFromSandbox);e.removeWindowResolutionChange?.();e.windowResize=null;e.windowHashChange=null;e.windowBeforePrint=null;e.windowAfterPrint=null;e.windowUpdateFromSandbox=null},accumulateWheelTicks(e){if(this._wheelUnusedTicks>0&&e<0||this._wheelUnusedTicks<0&&e>0){this._wheelUnusedTicks=0}this._wheelUnusedTicks+=e;const t=Math.sign(this._wheelUnusedTicks)*Math.floor(Math.abs(this._wheelUnusedTicks));this._wheelUnusedTicks-=t;return t},_unblockDocumentLoadEvent(){document.blockUnblockOnload?.(false);this._unblockDocumentLoadEvent=()=>{}},_reportDocumentStatsTelemetry(){const{stats:e}=this.pdfDocument;if(e!==this._docStats){this._docStats=e;this.externalServices.reportTelemetry({type:"documentStats",stats:e})}},get scriptingReady(){return this.pdfScriptingManager.ready}};t.PDFViewerApplication=U;let a;{const Re=["null","http://mozilla.github.io","https://mozilla.github.io"];a=function(e){if(!e){return}try{const t=new URL(window.location.href).origin||"null";if(Re.includes(t)){return}const i=new URL(e,window.location.href).origin;if(i!==t){throw new Error("file origin does not match viewer's")}}catch(t){U.l10n.get("loading_error").then(e=>{U._documentError(e,{message:t?.message})});throw t}}}async function d(){p.GlobalWorkerOptions.workerSrc||=_.AppOptions.get("workerSrc");await(0,p.loadScript)(p.PDFWorker.workerSrc)}async function c(e){const{debuggerScriptPath:t}=e.appConfig;const{PDFBug:i}=await import(t);e._PDFBug=i}function z({pageNumber:e}){if(!globalThis.Stats?.enabled){return}const t=U.pdfViewer.getPageView(e-1);globalThis.Stats.add(e,t?.pdfPage?.stats)}function H(){const{appConfig:e,eventBus:i}=U;let t;const n=document.location.search.substring(1);const s=(0,v.parseQueryString)(n);t=s.get("file")??_.AppOptions.get("defaultUrl");const r=e.openFileInput;r.value=null;r.addEventListener("change",function(e){const{files:t}=e.target;if(!t||t.length===0){return}i.dispatch("fileinputchange",{source:this,fileInput:e.target})});e.mainContainer.addEventListener("dragover",function(e){e.preventDefault();e.dataTransfer.dropEffect=e.dataTransfer.effectAllowed==="copy"?"copy":"move"});e.mainContainer.addEventListener("drop",function(e){e.preventDefault();const{files:t}=e.dataTransfer;if(!t||t.length===0){return}i.dispatch("fileinputchange",{source:this,fileInput:e.dataTransfer})});if(!U.supportsDocumentFonts){_.AppOptions.set("disableFontFace",true);U.l10n.get("web_fonts_disabled").then(e=>{console.warn(e)})}if(!U.supportsPrinting){e.toolbar.print.classList.add("hidden");e.secondaryToolbar.printButton.classList.add("hidden")}if(!U.supportsFullscreen){e.toolbar.presentationModeButton.classList.add("hidden");e.secondaryToolbar.presentationModeButton.classList.add("hidden")}if(U.supportsIntegratedFind){e.toolbar.viewFind.classList.add("hidden")}e.mainContainer.addEventListener("transitionend",function(e){if(e.target===this){i.dispatch("resize",{source:this})}},true);try{if(t){U.open(t)}else{U._hideViewBookmark()}}catch(t){U.l10n.get("loading_error").then(e=>{U._documentError(e,t)})}}function W({pageNumber:e,error:t}){if(e===U.page){U.toolbar.updateLoadingIndicatorState(false)}if(U.pdfSidebar.visibleView===v.SidebarView.THUMBS){const i=U.pdfViewer.getPageView(e-1);const n=U.pdfThumbnailViewer.getThumbnail(e-1);if(i&&n){n.setImage(i)}}if(t){U.l10n.get("rendering_error").then(e=>{U._otherError(e,t)})}U._reportDocumentStatsTelemetry()}function j({mode:e}){let t;switch(e){case"thumbs":t=v.SidebarView.THUMBS;break;case"bookmarks":case"outline":t=v.SidebarView.OUTLINE;break;case"attachments":t=v.SidebarView.ATTACHMENTS;break;case"layers":t=v.SidebarView.LAYERS;break;case"none":t=v.SidebarView.NONE;break;default:console.error('Invalid "pagemode" hash parameter: '+e);return}U.pdfSidebar.switchView(t,true)}function $(e){switch(e.action){case"GoToPage":U.appConfig.toolbar.pageNumber.select();break;case"Find":if(!U.supportsIntegratedFind){U.findBar.toggle()}break;case"Print":break;case"SaveAs":break}}function G(e){U.pdfViewer.presentationModeState=e.state}function K({view:e}){U.pdfRenderingQueue.isThumbnailViewEnabled=e===v.SidebarView.THUMBS;if(U.isInitialViewSet){U.store?.set("sidebarView",e).catch(()=>{})}}function X({location:e}){if(U.isInitialViewSet){U.store?.setMultiple({page:e.pageNumber,zoom:e.scale,scrollLeft:e.left,scrollTop:e.top,rotation:e.rotation}).catch(()=>{})}const t=U.pdfLinkService.getAnchorUrl(e.pdfOpenParams);U.appConfig.toolbar.viewBookmark.href=t;U.appConfig.secondaryToolbar.viewBookmarkButton.href=t;const i=U.pdfViewer.getPageView(U.page-1);const n=i?.renderingState!==v.RenderingStates.FINISHED;U.toolbar.updateLoadingIndicatorState(n)}function Z(e){if(U.isInitialViewSet){U.store?.set("scrollMode",e.mode).catch(()=>{})}}function Q(e){if(U.isInitialViewSet){U.store?.set("spreadMode",e.mode).catch(()=>{})}}function q(){const{pdfDocument:e,pdfViewer:t,pdfRenderingQueue:i}=U;if(i.printing&&window.matchMedia("print").matches){return}t.updateContainerHeightCss();if(!e){return}const n=t.currentScaleValue;if(n==="auto"||n==="page-fit"||n==="page-width"){t.currentScaleValue=n}t.update()}function Y(e){const t=e.hash;if(!t){return}if(!U.isInitialViewSet){U.initialBookmark=t}else if(!U.pdfHistory?.popStateInProgress){U.pdfLinkService.setHash(t)}}{var J=function(e){if(U.pdfViewer?.isInPresentationMode){return}const t=e.fileInput.files[0];let i=URL.createObjectURL(t);if(t.name){i={url:i,originalUrl:t.name}}U.open(i)};var ee=function(e){const t=U.appConfig.openFileInput;t.click()}}function te(){U.requestPresentationMode()}function ie(e){U.pdfViewer.annotationEditorMode=e.mode}function ne(e){U.pdfViewer.annotationEditorParams=e}function se(){U.triggerPrinting()}function re(){U.downloadOrSave()}function ae(){if(U.pdfDocument){U.page=1}}function oe(){if(U.pdfDocument){U.page=U.pagesCount}}function le(){U.pdfViewer.nextPage()}function de(){U.pdfViewer.previousPage()}function ce(){U.zoomIn()}function he(){U.zoomOut()}function ue(){U.zoomReset()}function pe(e){const t=U.pdfViewer;if(e.value!==""){U.pdfLinkService.goToPage(e.value)}if(e.value!==t.currentPageNumber.toString()&&e.value!==t.currentPageLabel){U.toolbar.setPageNumber(t.currentPageNumber,t.currentPageLabel)}}function fe(e){U.pdfViewer.currentScaleValue=e.value}function ge(){U.rotatePages(90)}function me(){U.rotatePages(-90)}function ve(e){U.pdfViewer.optionalContentConfigPromise=e.promise}function _e(e){U.pdfViewer.scrollMode=e.mode}function we(e){U.pdfViewer.spreadMode=e.mode}function be(){U.pdfDocumentProperties.open()}function ye(e){U.eventBus.dispatch("find",{source:e.source,type:"",query:e.query,phraseSearch:e.phraseSearch,caseSensitive:false,entireWord:false,highlightAll:true,findPrevious:false,matchDiacritics:true})}function Pe({matchesCount:e}){if(U.supportsIntegratedFind){U.externalServices.updateFindMatchesCount(e)}else{U.findBar.updateResultsCount(e)}}function Ee({state:e,previous:t,matchesCount:i,rawQuery:n}){if(U.supportsIntegratedFind){U.externalServices.updateFindControlState({result:e,findPrevious:t,matchesCount:i,rawQuery:n})}else{U.findBar.updateUIState(e,t,i)}}function Se(e){U.toolbar.setPageScale(e.presetValue,e.scale);U.pdfViewer.update()}function Le(e){U.pdfThumbnailViewer.pagesRotation=e.pagesRotation;U.forceRendering();U.pdfViewer.currentPageNumber=e.pageNumber}function Ce({pageNumber:e,pageLabel:t}){U.toolbar.setPageNumber(e,t);U.secondaryToolbar.setPageNumber(e);if(U.pdfSidebar.visibleView===v.SidebarView.THUMBS){U.pdfThumbnailViewer.scrollThumbnailIntoView(e)}}function Te(e){U.pdfViewer.refresh()}function Ie(e){if(document.visibilityState==="visible"){xe()}}let Me=null;function xe(){if(Me){clearTimeout(Me)}Me=setTimeout(function(){Me=null},s)}function Ae(t){const{pdfViewer:i,supportedMouseWheelZoomModifierKeys:e}=U;if(i.isInPresentationMode){return}if(t.ctrlKey&&e.ctrlKey||t.metaKey&&e.metaKey){t.preventDefault();if(Me||document.visibilityState==="hidden"){return}const n=t.deltaMode;const s=(0,v.normalizeWheelEventDirection)(t);const r=i.currentScale;let e=0;if(n===WheelEvent.DOM_DELTA_LINE||n===WheelEvent.DOM_DELTA_PAGE){if(Math.abs(s)>=1){e=Math.sign(s)}else{e=U.accumulateWheelTicks(s)}}else{const o=30;e=U.accumulateWheelTicks(s/o)}if(e<0){U.zoomOut(-e)}else if(e>0){U.zoomIn(e)}const a=i.currentScale;if(r!==a){const l=a/r-1;const d=i.container.getBoundingClientRect();const c=t.clientX-d.left;const h=t.clientY-d.top;i.container.scrollLeft+=c*l;i.container.scrollTop+=h*l}}else{xe()}}function ke(e){if(e.touches.length>1){e.preventDefault()}}function Ne(e){if(!U.secondaryToolbar.isOpen){return}const t=U.appConfig;if(U.pdfViewer.containsElement(e.target)||t.toolbar.container.contains(e.target)&&e.target!==t.secondaryToolbar.toggleButton){U.secondaryToolbar.close()}}function De(i){if(U.overlayManager.active){return}const{eventBus:e,pdfViewer:n}=U;const s=n.isInPresentationMode;let r=false,a=false;const t=(i.ctrlKey?1:0)|(i.altKey?2:0)|(i.shiftKey?4:0)|(i.metaKey?8:0);if(t===1||t===8||t===5||t===12){switch(i.keyCode){case 70:if(!U.supportsIntegratedFind&&!i.shiftKey){U.findBar.open();r=true}break;case 71:if(!U.supportsIntegratedFind){const{state:d}=U.findController;if(d){const c=Object.assign(Object.create(null),d,{source:window,type:"again",findPrevious:t===5||t===12});e.dispatch("find",c)}r=true}break;case 61:case 107:case 187:case 171:if(!s){U.zoomIn()}r=true;break;case 173:case 109:case 189:if(!s){U.zoomOut()}r=true;break;case 48:case 96:if(!s){setTimeout(function(){U.zoomReset()});r=false}break;case 38:if(s||U.page>1){U.page=1;r=true;a=true}break;case 40:if(s||U.page<U.pagesCount){U.page=U.pagesCount;r=true;a=true}break}}if(t===1||t===8){switch(i.keyCode){case 83:break;case 79:{e.dispatch("openfile",{source:window});r=true}break}}if(t===3||t===10){switch(i.keyCode){case 80:break;case 71:U.appConfig.toolbar.pageNumber.select();r=true;break}}if(r){if(a&&!s){n.focus()}i.preventDefault();return}const o=(0,v.getActiveOrFocusedElement)();const l=o?.tagName.toUpperCase();if(l==="INPUT"||l==="TEXTAREA"||l==="SELECT"||o?.isContentEditable){if(i.keyCode!==27){return}}if(t===0){let e=0,t=false;switch(i.keyCode){case 38:case 33:if(n.isVerticalScrollbarEnabled){t=true}e=-1;break;case 8:if(!s){t=true}e=-1;break;case 37:if(n.isHorizontalScrollbarEnabled){t=true}case 75:case 80:e=-1;break;case 27:if(U.secondaryToolbar.isOpen){U.secondaryToolbar.close();r=true}if(!U.supportsIntegratedFind&&U.findBar.opened){U.findBar.close();r=true}break;case 40:case 34:if(n.isVerticalScrollbarEnabled){t=true}e=1;break;case 13:case 32:if(!s){t=true}e=1;break;case 39:if(n.isHorizontalScrollbarEnabled){t=true}case 74:case 78:e=1;break;case 36:if(s||U.page>1){U.page=1;r=true;a=true}break;case 35:if(s||U.page<U.pagesCount){U.page=U.pagesCount;r=true;a=true}break;case 83:U.pdfCursorTools.switchTool(g.CursorTool.SELECT);break;case 72:U.pdfCursorTools.switchTool(g.CursorTool.HAND);break;case 82:U.rotatePages(90);break;case 115:U.pdfSidebar.toggle();break}if(e!==0&&(!t||n.currentScaleValue==="page-fit")){if(e>0){n.nextPage()}else{n.previousPage()}r=true}}if(t===4){switch(i.keyCode){case 13:case 32:if(!s&&n.currentScaleValue!=="page-fit"){break}n.previousPage();r=true;break;case 82:U.rotatePages(-90);break}}if(!r&&!s){if(i.keyCode>=33&&i.keyCode<=40||i.keyCode===32&&l!=="BUTTON"){a=true}}if(a&&!n.containsElement(o)){n.focus()}if(r){i.preventDefault()}}function Be(e){e.preventDefault();e.returnValue="";return false}function Ve(e){U.externalServices.updateEditorStates(e)}const Oe={instance:{supportsPrinting:false,createPrintService(){throw new Error("Not implemented: createPrintService")}}};t.PDFPrintServiceFactory=Oe},e=>{let t;if(typeof window!=="undefined"&&window["pdfjs-dist/build/pdf"]){t=window["pdfjs-dist/build/pdf"]}else{t=require("./js/libs/pdf.min.js")}e.exports=t},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.WaitOnType=t.EventBus=t.AutomationEventBus=void 0;t.waitOnEventOrTimeout=i;const d={EVENT:"event",TIMEOUT:"timeout"};t.WaitOnType=d;function i({target:a,name:o,delay:l=0}){return new Promise(function(t,e){if(typeof a!=="object"||!(o&&typeof o==="string")||!(Number.isInteger(l)&&l>=0)){throw new Error("waitOnEventOrTimeout - invalid parameters.")}function i(e){if(a instanceof c){a._off(o,n)}else{a.removeEventListener(o,n)}if(r){clearTimeout(r)}t(e)}const n=i.bind(null,d.EVENT);if(a instanceof c){a._on(o,n)}else{a.addEventListener(o,n)}const s=i.bind(null,d.TIMEOUT);const r=setTimeout(s,l)})}class c{constructor(){this._listeners=Object.create(null)}on(e,t,i=null){this._on(e,t,{external:true,once:i?.once})}off(e,t,i=null){this._off(e,t,{external:true,once:i?.once})}dispatch(e,t){const i=this._listeners[e];if(!i||i.length===0){return}let n;for(const{listener:s,external:r,once:a}of i.slice(0)){if(a){this._off(e,s)}if(r){(n||=[]).push(s);continue}s(t)}if(n){for(const s of n){s(t)}n=null}}_on(e,t,i=null){const n=this._listeners[e]||=[];n.push({listener:t,external:i?.external===true,once:i?.once===true})}_off(e,i,t=null){const n=this._listeners[e];if(!n){return}for(let e=0,t=n.length;e<t;e++){if(n[e].listener===i){n.splice(e,1);return}}}}t.EventBus=c;class n extends c{dispatch(e,t){throw new Error("Not implemented: AutomationEventBus.dispatch")}}t.AutomationEventBus=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFCursorTools=t.CursorTool=void 0;var n=i(8);var s=i(1);const r={SELECT:0,HAND:1,ZOOM:2};t.CursorTool=r;class a{constructor({container:e,eventBus:t,cursorToolOnLoad:i=r.SELECT}){this.container=e;this.eventBus=t;this.active=r.SELECT;this.activeBeforePresentationMode=null;this.handTool=new n.GrabToPan({element:this.container});this.#addEventListeners();Promise.resolve().then(()=>{this.switchTool(i)})}get activeTool(){return this.active}switchTool(e){if(this.activeBeforePresentationMode!==null){return}if(e===this.active){return}const t=()=>{switch(this.active){case r.SELECT:break;case r.HAND:this.handTool.deactivate();break;case r.ZOOM:}};switch(e){case r.SELECT:t();break;case r.HAND:t();this.handTool.activate();break;case r.ZOOM:default:console.error(`switchTool: "${e}" is an unsupported value.`);return}this.active=e;this.#dispatchEvent()}#dispatchEvent(){this.eventBus.dispatch("cursortoolchanged",{source:this,tool:this.active})}#addEventListeners(){this.eventBus._on("switchcursortool",e=>{this.switchTool(e.tool)});this.eventBus._on("presentationmodechanged",e=>{switch(e.state){case s.PresentationModeState.FULLSCREEN:{const t=this.active;this.switchTool(r.SELECT);this.activeBeforePresentationMode=t;break}case s.PresentationModeState.NORMAL:{const t=this.activeBeforePresentationMode;this.activeBeforePresentationMode=null;this.switchTool(t);break}}})}}t.PDFCursorTools=a},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.GrabToPan=void 0;const i="grab-to-pan-grab";class n{constructor(e){this.element=e.element;this.document=e.element.ownerDocument;if(typeof e.ignoreTarget==="function"){this.ignoreTarget=e.ignoreTarget}this.onActiveChanged=e.onActiveChanged;this.activate=this.activate.bind(this);this.deactivate=this.deactivate.bind(this);this.toggle=this.toggle.bind(this);this._onMouseDown=this.#onMouseDown.bind(this);this._onMouseMove=this.#onMouseMove.bind(this);this._endPan=this.#endPan.bind(this);const t=this.overlay=document.createElement("div");t.className="grab-to-pan-grabbing"}activate(){if(!this.active){this.active=true;this.element.addEventListener("mousedown",this._onMouseDown,true);this.element.classList.add(i);this.onActiveChanged?.(true)}}deactivate(){if(this.active){this.active=false;this.element.removeEventListener("mousedown",this._onMouseDown,true);this._endPan();this.element.classList.remove(i);this.onActiveChanged?.(false)}}toggle(){if(this.active){this.deactivate()}else{this.activate()}}ignoreTarget(e){return e.matches("a[href], a[href] *, input, textarea, button, button *, select, option")}#onMouseDown(e){if(e.button!==0||this.ignoreTarget(e.target)){return}if(e.originalTarget){try{e.originalTarget.tagName}catch(e){return}}this.scrollLeftStart=this.element.scrollLeft;this.scrollTopStart=this.element.scrollTop;this.clientXStart=e.clientX;this.clientYStart=e.clientY;this.document.addEventListener("mousemove",this._onMouseMove,true);this.document.addEventListener("mouseup",this._endPan,true);this.element.addEventListener("scroll",this._endPan,true);e.preventDefault();e.stopPropagation();const t=document.activeElement;if(t&&!t.contains(e.target)){t.blur()}}#onMouseMove(e){this.element.removeEventListener("scroll",this._endPan,true);if(!(e.buttons&1)){this._endPan();return}const t=e.clientX-this.clientXStart;const i=e.clientY-this.clientYStart;const n=this.scrollTopStart-i;const s=this.scrollLeftStart-t;if(this.element.scrollTo){this.element.scrollTo({top:n,left:s,behavior:"instant"})}else{this.element.scrollTop=n;this.element.scrollLeft=s}if(!this.overlay.parentNode){document.body.append(this.overlay)}}#endPan(){this.element.removeEventListener("scroll",this._endPan,true);this.document.removeEventListener("mousemove",this._onMouseMove,true);this.document.removeEventListener("mouseup",this._endPan,true);this.overlay.remove()}}t.GrabToPan=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.AnnotationEditorParams=void 0;var l=i(5);class n{constructor(e,t){this.eventBus=t;this.#bindListeners(e)}#bindListeners({editorFreeTextFontSize:n,editorFreeTextColor:s,editorInkColor:r,editorInkThickness:a,editorInkOpacity:o}){n.addEventListener("input",e=>{this.eventBus.dispatch("switchannotationeditorparams",{source:this,type:l.AnnotationEditorParamsType.FREETEXT_SIZE,value:n.valueAsNumber})});s.addEventListener("input",e=>{this.eventBus.dispatch("switchannotationeditorparams",{source:this,type:l.AnnotationEditorParamsType.FREETEXT_COLOR,value:s.value})});r.addEventListener("input",e=>{this.eventBus.dispatch("switchannotationeditorparams",{source:this,type:l.AnnotationEditorParamsType.INK_COLOR,value:r.value})});a.addEventListener("input",e=>{this.eventBus.dispatch("switchannotationeditorparams",{source:this,type:l.AnnotationEditorParamsType.INK_THICKNESS,value:a.valueAsNumber})});o.addEventListener("input",e=>{this.eventBus.dispatch("switchannotationeditorparams",{source:this,type:l.AnnotationEditorParamsType.INK_OPACITY,value:o.valueAsNumber})});this.eventBus._on("annotationeditorparamschanged",e=>{for(const[t,i]of e.details){switch(t){case l.AnnotationEditorParamsType.FREETEXT_SIZE:n.value=i;break;case l.AnnotationEditorParamsType.FREETEXT_COLOR:s.value=i;break;case l.AnnotationEditorParamsType.INK_COLOR:r.value=i;break;case l.AnnotationEditorParamsType.INK_THICKNESS:a.value=i;break;case l.AnnotationEditorParamsType.INK_OPACITY:o.value=i;break}}})}}t.AnnotationEditorParams=n},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.OverlayManager=void 0;class i{#overlays=new WeakMap;#active=null;get active(){return this.#active}async register(e,t=false){if(typeof e!=="object"){throw new Error("Not enough parameters.")}else if(this.#overlays.has(e)){throw new Error("The overlay is already registered.")}this.#overlays.set(e,{canForceClose:t});e.addEventListener("cancel",e=>{this.#active=null})}async unregister(e){if(!this.#overlays.has(e)){throw new Error("The overlay does not exist.")}else if(this.#active===e){throw new Error("The overlay cannot be removed while it is active.")}this.#overlays.delete(e)}async open(e){if(!this.#overlays.has(e)){throw new Error("The overlay does not exist.")}else if(this.#active){if(this.#active===e){throw new Error("The overlay is already active.")}else if(this.#overlays.get(e).canForceClose){await this.close()}else{throw new Error("Another overlay is currently active.")}}this.#active=e;e.showModal()}async close(e=this.#active){if(!this.#overlays.has(e)){throw new Error("The overlay does not exist.")}else if(!this.#active){throw new Error("The overlay is currently not active.")}else if(this.#active!==e){throw new Error("Another overlay is currently active.")}e.close();this.#active=null}}t.OverlayManager=i},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PasswordPrompt=void 0;var n=i(5);class s{#activeCapability=null;#updateCallback=null;#reason=null;constructor(e,t,i,n=false){this.dialog=e.dialog;this.label=e.label;this.input=e.input;this.submitButton=e.submitButton;this.cancelButton=e.cancelButton;this.overlayManager=t;this.l10n=i;this._isViewerEmbedded=n;this.submitButton.addEventListener("click",this.#verify.bind(this));this.cancelButton.addEventListener("click",this.close.bind(this));this.input.addEventListener("keydown",e=>{if(e.keyCode===13){this.#verify()}});this.overlayManager.register(this.dialog,true);this.dialog.addEventListener("close",this.#cancel.bind(this))}async open(){if(this.#activeCapability){await this.#activeCapability.promise}this.#activeCapability=(0,n.createPromiseCapability)();try{await this.overlayManager.open(this.dialog)}catch(e){this.#activeCapability=null;throw e}const e=this.#reason===n.PasswordResponses.INCORRECT_PASSWORD;if(!this._isViewerEmbedded||e){this.input.focus()}this.label.textContent=await this.l10n.get(`password_${e?"invalid":"label"}`)}async close(){if(this.overlayManager.active===this.dialog){this.overlayManager.close(this.dialog)}}#verify(){const e=this.input.value;if(e?.length>0){this.#invokeCallback(e)}}#cancel(){this.#invokeCallback(new Error("PasswordPrompt cancelled."));this.#activeCapability.resolve()}#invokeCallback(e){if(!this.#updateCallback){return}this.close();this.input.value="";this.#updateCallback(e);this.#updateCallback=null}async setUpdateCallback(e,t){if(this.#activeCapability){await this.#activeCapability.promise}this.#updateCallback=e;this.#reason=t}}t.PasswordPrompt=s},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFAttachmentViewer=void 0;var h=i(5);var n=i(13);var s=i(6);class r extends n.BaseTreeViewer{constructor(e){super(e);this.downloadManager=e.downloadManager;this.eventBus._on("fileattachmentannotation",this.#appendAttachment.bind(this))}reset(e=false){super.reset();this._attachments=null;if(!e){this._renderedCapability=(0,h.createPromiseCapability)()}this._pendingDispatchEvent=false}async _dispatchEvent(e){this._renderedCapability.resolve();if(e===0&&!this._pendingDispatchEvent){this._pendingDispatchEvent=true;await(0,s.waitOnEventOrTimeout)({target:this.eventBus,name:"annotationlayerrendered",delay:1e3});if(!this._pendingDispatchEvent){return}}this._pendingDispatchEvent=false;this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:e})}_bindLink(e,{content:t,filename:i}){e.onclick=()=>{this.downloadManager.openOrDownloadData(e,t,i);return false}}render({attachments:e,keepRenderedCapability:t=false}){if(this._attachments){this.reset(t)}this._attachments=e||null;if(!e){this._dispatchEvent(0);return}const i=Object.keys(e).sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())});const n=document.createDocumentFragment();let s=0;for(const r of i){const a=e[r];const o=a.content,l=(0,h.getFilenameFromUrl)(a.filename);const d=document.createElement("div");d.className="treeItem";const c=document.createElement("a");this._bindLink(c,{content:o,filename:l});c.textContent=this._normalizeTextContent(l);d.append(c);n.append(d);s++}this._finishRendering(n,s)}#appendAttachment({filename:i,content:n}){const s=this._renderedCapability.promise;s.then(()=>{if(s!==this._renderedCapability.promise){return}const e=this._attachments||Object.create(null);for(const t in e){if(i===t){return}}e[i]={filename:i,content:n};this.render({attachments:e,keepRenderedCapability:true})})}}t.PDFAttachmentViewer=r},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.BaseTreeViewer=void 0;var n=i(1);const s=-100;const r="selected";class a{constructor(e){if(this.constructor===a){throw new Error("Cannot initialize BaseTreeViewer.")}this.container=e.container;this.eventBus=e.eventBus;this.reset()}reset(){this._pdfDocument=null;this._lastToggleIsShow=true;this._currentTreeItem=null;this.container.textContent="";this.container.classList.remove("treeWithDeepNesting")}_dispatchEvent(e){throw new Error("Not implemented: _dispatchEvent")}_bindLink(e,t){throw new Error("Not implemented: _bindLink")}_normalizeTextContent(e){return(0,n.removeNullCharacters)(e,true)||""}_addToggleButton(i,e=false){const n=document.createElement("div");n.className="treeItemToggler";if(e){n.classList.add("treeItemsHidden")}n.onclick=e=>{e.stopPropagation();n.classList.toggle("treeItemsHidden");if(e.shiftKey){const t=!n.classList.contains("treeItemsHidden");this._toggleTreeItem(i,t)}};i.prepend(n)}_toggleTreeItem(e,t=false){this._lastToggleIsShow=t;for(const i of e.querySelectorAll(".treeItemToggler")){i.classList.toggle("treeItemsHidden",!t)}}_toggleAllTreeItems(){this._toggleTreeItem(this.container,!this._lastToggleIsShow)}_finishRendering(e,t,i=false){if(i){this.container.classList.add("treeWithDeepNesting");this._lastToggleIsShow=!e.querySelector(".treeItemsHidden")}this.container.append(e);this._dispatchEvent(t)}render(e){throw new Error("Not implemented: render")}_updateCurrentTreeItem(e=null){if(this._currentTreeItem){this._currentTreeItem.classList.remove(r);this._currentTreeItem=null}if(e){e.classList.add(r);this._currentTreeItem=e}}_scrollToCurrentTreeItem(e){if(!e){return}let t=e.parentNode;while(t&&t!==this.container){if(t.classList.contains("treeItem")){const i=t.firstElementChild;i?.classList.remove("treeItemsHidden")}t=t.parentNode}this._updateCurrentTreeItem(e);this.container.scrollTo(e.offsetLeft,e.offsetTop+s)}}t.BaseTreeViewer=a},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFDocumentProperties=void 0;var n=i(5);var p=i(1);const s="-";const o=["en-us","en-lr","my"];const f={"8.5x11":"Letter","8.5x14":"Legal"};const g={"297x420":"A3","210x297":"A4"};function m(e,t,i){const n=t?e.width:e.height;const s=t?e.height:e.width;return i[`${n}x${s}`]}class r{#fieldData=null;constructor({dialog:e,fields:t,closeButton:i},n,s,r,a){this.dialog=e;this.fields=t;this.overlayManager=n;this.l10n=r;this._fileNameLookup=a;this.#reset();i.addEventListener("click",this.close.bind(this));this.overlayManager.register(this.dialog);s._on("pagechanging",e=>{this._currentPageNumber=e.pageNumber});s._on("rotationchanging",e=>{this._pagesRotation=e.pagesRotation});this._isNonMetricLocale=true;r.getLanguage().then(e=>{this._isNonMetricLocale=o.includes(e)})}async open(){await Promise.all([this.overlayManager.open(this.dialog),this._dataAvailableCapability.promise]);const e=this._currentPageNumber;const t=this._pagesRotation;if(this.#fieldData&&e===this.#fieldData._currentPageNumber&&t===this.#fieldData._pagesRotation){this.#updateUI();return}const{info:i,contentLength:n}=await this.pdfDocument.getMetadata();const[s,r,a,o,l,d]=await Promise.all([this._fileNameLookup(),this.#parseFileSize(n),this.#parseDate(i.CreationDate),this.#parseDate(i.ModDate),this.pdfDocument.getPage(e).then(e=>{return this.#parsePageSize((0,p.getPageSizeInches)(e),t)}),this.#parseLinearization(i.IsLinearized)]);this.#fieldData=Object.freeze({fileName:s,fileSize:r,title:i.Title,author:i.Author,subject:i.Subject,keywords:i.Keywords,creationDate:a,modificationDate:o,creator:i.Creator,producer:i.Producer,version:i.PDFFormatVersion,pageCount:this.pdfDocument.numPages,pageSize:l,linearized:d,_currentPageNumber:e,_pagesRotation:t});this.#updateUI();const{length:c}=await this.pdfDocument.getDownloadInfo();if(n===c){return}const h=Object.assign(Object.create(null),this.#fieldData);h.fileSize=await this.#parseFileSize(c);this.#fieldData=Object.freeze(h);this.#updateUI()}async close(){this.overlayManager.close(this.dialog)}setDocument(e){if(this.pdfDocument){this.#reset();this.#updateUI(true)}if(!e){return}this.pdfDocument=e;this._dataAvailableCapability.resolve()}#reset(){this.pdfDocument=null;this.#fieldData=null;this._dataAvailableCapability=(0,n.createPromiseCapability)();this._currentPageNumber=1;this._pagesRotation=0}#updateUI(e=false){if(e||!this.#fieldData){for(const t in this.fields){this.fields[t].textContent=s}return}if(this.overlayManager.active!==this.dialog){return}for(const t in this.fields){const i=this.#fieldData[t];this.fields[t].textContent=i||i===0?i:s}}async#parseFileSize(e=0){const t=e/1024,i=t/1024;if(!t){return undefined}return this.l10n.get(`document_properties_${i>=1?"mb":"kb"}`,{size_mb:i>=1&&(+i.toPrecision(3)).toLocaleString(),size_kb:i<1&&(+t.toPrecision(3)).toLocaleString(),size_b:e.toLocaleString()})}async#parsePageSize(e,t){if(!e){return undefined}if(t%180!==0){e={width:e.height,height:e.width}}const i=(0,p.isPortraitOrientation)(e);let n={width:Math.round(e.width*100)/100,height:Math.round(e.height*100)/100};let s={width:Math.round(e.width*25.4*10)/10,height:Math.round(e.height*25.4*10)/10};let r=m(n,i,f)||m(s,i,g);if(!r&&!(Number.isInteger(s.width)&&Number.isInteger(s.height))){const h={width:e.width*25.4,height:e.height*25.4};const u={width:Math.round(s.width),height:Math.round(s.height)};if(Math.abs(h.width-u.width)<.1&&Math.abs(h.height-u.height)<.1){r=m(u,i,g);if(r){n={width:Math.round(u.width/25.4*100)/100,height:Math.round(u.height/25.4*100)/100};s=u}}}const[{width:a,height:o},l,d,c]=await Promise.all([this._isNonMetricLocale?n:s,this.l10n.get(`document_properties_page_size_unit_${this._isNonMetricLocale?"inches":"millimeters"}`),r&&this.l10n.get(`document_properties_page_size_name_${r.toLowerCase()}`),this.l10n.get(`document_properties_page_size_orientation_${i?"portrait":"landscape"}`)]);return this.l10n.get(`document_properties_page_size_dimension_${d?"name_":""}string`,{width:a.toLocaleString(),height:o.toLocaleString(),unit:l,name:d,orientation:c})}async#parseDate(e){const t=n.PDFDateString.toDateObject(e);if(!t){return undefined}return this.l10n.get("document_properties_date_string",{date:t.toLocaleDateString(),time:t.toLocaleTimeString()})}#parseLinearization(e){return this.l10n.get(`document_properties_linearized_${e?"yes":"no"}`)}}t.PDFDocumentProperties=r},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFFindBar=void 0;var r=i(16);const a=1e3;class n{constructor(e,t,i){this.opened=false;this.bar=e.bar;this.toggleButton=e.toggleButton;this.findField=e.findField;this.highlightAll=e.highlightAllCheckbox;this.caseSensitive=e.caseSensitiveCheckbox;this.matchDiacritics=e.matchDiacriticsCheckbox;this.entireWord=e.entireWordCheckbox;this.findMsg=e.findMsg;this.findResultsCount=e.findResultsCount;this.findPreviousButton=e.findPreviousButton;this.findNextButton=e.findNextButton;this.eventBus=t;this.l10n=i;this.toggleButton.addEventListener("click",()=>{this.toggle()});this.findField.addEventListener("input",()=>{this.dispatchEvent("")});this.bar.addEventListener("keydown",e=>{switch(e.keyCode){case 13:if(e.target===this.findField){this.dispatchEvent("again",e.shiftKey)}break;case 27:this.close();break}});this.findPreviousButton.addEventListener("click",()=>{this.dispatchEvent("again",true)});this.findNextButton.addEventListener("click",()=>{this.dispatchEvent("again",false)});this.highlightAll.addEventListener("click",()=>{this.dispatchEvent("highlightallchange")});this.caseSensitive.addEventListener("click",()=>{this.dispatchEvent("casesensitivitychange")});this.entireWord.addEventListener("click",()=>{this.dispatchEvent("entirewordchange")});this.matchDiacritics.addEventListener("click",()=>{this.dispatchEvent("diacriticmatchingchange")});this.eventBus._on("resize",this.#adjustWidth.bind(this))}reset(){this.updateUIState()}dispatchEvent(e,t=false){this.eventBus.dispatch("find",{source:this,type:e,query:this.findField.value,phraseSearch:true,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,highlightAll:this.highlightAll.checked,findPrevious:t,matchDiacritics:this.matchDiacritics.checked})}updateUIState(e,t,i){let n=Promise.resolve("");let s="";switch(e){case r.FindState.FOUND:break;case r.FindState.PENDING:s="pending";break;case r.FindState.NOT_FOUND:n=this.l10n.get("find_not_found");s="notFound";break;case r.FindState.WRAPPED:n=this.l10n.get(`find_reached_${t?"top":"bottom"}`);break}this.findField.setAttribute("data-status",s);this.findField.setAttribute("aria-invalid",e===r.FindState.NOT_FOUND);n.then(e=>{this.findMsg.textContent=e;this.#adjustWidth()});this.updateResultsCount(i)}updateResultsCount({current:t=0,total:i=0}={}){const n=a;let s=Promise.resolve("");if(i>0){if(i>n){let e="find_match_count_limit";s=this.l10n.get(e,{limit:n})}else{let e="find_match_count";s=this.l10n.get(e,{current:t,total:i})}}s.then(e=>{this.findResultsCount.textContent=e;this.#adjustWidth()})}open(){if(!this.opened){this.opened=true;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.bar.classList.remove("hidden")}this.findField.select();this.findField.focus();this.#adjustWidth()}close(){if(!this.opened){return}this.opened=false;this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false");this.bar.classList.add("hidden");this.eventBus.dispatch("findbarclose",{source:this})}toggle(){if(this.opened){this.close()}else{this.open()}}#adjustWidth(){if(!this.opened){return}this.bar.classList.remove("wrapContainers");const e=this.bar.clientHeight;const t=this.bar.firstElementChild.clientHeight;if(e>t){this.bar.classList.add("wrapContainers")}}}t.PDFFindBar=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFFindController=t.FindState=void 0;var o=i(1);var r=i(5);var l=i(17);const a={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};t.FindState=a;const s=250;const d=-50;const c=-400;const y={"":"-","":"'","":"'","":"'","":"'","":'"',"":'"',"":'"',"":'"',"":"1/4","":"1/2","":"3/4"};const h=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);const n=[...h.values()].map(e=>String.fromCharCode(e)).join("");const P=/\p{M}+/gu;const u=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu;const p=/([^\p{M}])\p{M}*$/u;const f=/^\p{M}*([^\p{M}])/u;const E=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g;const S=new Map;const L="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]";let C=null;let T=null;function g(e){const u=[];let i;while((i=E.exec(e))!==null){let{index:t}=i;for(const s of i[0]){let e=S.get(s);if(!e){e=s.normalize("NFD").length;S.set(s,e)}u.push([e,t++])}}let t;if(u.length===0&&C){t=C}else if(u.length>0&&T){t=T}else{const r=Object.keys(y).join("");const a=`([${r}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`;if(u.length===0){t=C=new RegExp(a+"|(\\u0000)","gum")}else{t=T=new RegExp(a+`|(${L})`,"gum")}}const p=[];while((i=P.exec(e))!==null){p.push([i[0].length,i.index])}let n=e.normalize("NFD");const f=[[0,0]];let g=0;let m=0;let v=0;let _=0;let w=0;let b=false;n=n.replace(t,(e,t,i,n,s,r,a)=>{a-=_;if(t){const o=y[e];const l=o.length;for(let e=1;e<l;e++){f.push([a-v+e,v-e])}v-=l-1;return o}if(i){const d=i.endsWith("\n");const c=d?i.length-2:i.length;b=true;let t=c;if(a+w===p[g]?.[1]){t-=p[g][0];++g}for(let e=1;e<=t;e++){f.push([a-1-v+e,v-e])}v-=t;_+=t;if(d){a+=c-1;f.push([a-v+1,1+v]);v+=1;_+=1;w+=1;return i.slice(0,c)}return i}if(n){f.push([a-v+1,1+v]);v+=1;_+=1;w+=1;return n.charAt(0)}if(s){f.push([a-v+1,v-1]);v-=1;_+=1;w+=1;return" "}if(a+w===u[m]?.[1]){const h=u[m][0]-1;++m;for(let e=1;e<=h;e++){f.push([a-(v-e),v-e])}v-=h;_+=h}return r});f.push([n.length,v]);return[n,f,b]}function m(e,t,i){if(!e){return[t,i]}const n=t;const s=t+i;let r=(0,o.binarySearchFirstItem)(e,e=>e[0]>=n);if(e[r][0]>n){--r}let a=(0,o.binarySearchFirstItem)(e,e=>e[0]>=s,r);if(e[a][0]>s){--a}return[n+e[r][1],i+e[a][1]-e[r][1]]}class v{constructor({linkService:e,eventBus:t}){this._linkService=e;this._eventBus=t;this.#reset();t._on("find",this.#onFind.bind(this));t._on("findbarclose",this.#onFindBarClose.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(e){if(this._pdfDocument){this.#reset()}if(!e){return}this._pdfDocument=e;this._firstPageCapability.resolve()}#onFind(e){if(!e){return}const i=this._pdfDocument;const{type:n}=e;if(this._state===null||this.#shouldDirtyMatch(e)){this._dirtyMatch=true}this._state=e;if(n!=="highlightallchange"){this.#updateUIState(a.PENDING)}this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||i&&this._pdfDocument!==i){return}this.#extractText();const e=!this._highlightMatches;const t=!!this._findTimeout;if(this._findTimeout){clearTimeout(this._findTimeout);this._findTimeout=null}if(!n){this._findTimeout=setTimeout(()=>{this.#nextMatch();this._findTimeout=null},s)}else if(this._dirtyMatch){this.#nextMatch()}else if(n==="again"){this.#nextMatch();if(e&&this._state.highlightAll){this.#updateAllPages()}}else if(n==="highlightallchange"){if(t){this.#nextMatch()}else{this._highlightMatches=true}this.#updateAllPages()}else{this.#nextMatch()}})}scrollMatchIntoView({element:e=null,selectedLeft:t=0,pageIndex:i=-1,matchIndex:n=-1}){if(!this._scrollMatches||!e){return}else if(n===-1||n!==this._selected.matchIdx){return}else if(i===-1||i!==this._selected.pageIdx){return}this._scrollMatches=false;const s={top:d,left:t+c};(0,o.scrollIntoView)(e,s,true)}#reset(){this._highlightMatches=false;this._scrollMatches=false;this._pdfDocument=null;this._pageMatches=[];this._pageMatchesLength=[];this._state=null;this._selected={pageIdx:-1,matchIdx:-1};this._offset={pageIdx:null,matchIdx:null,wrapped:false};this._extractTextPromises=[];this._pageContents=[];this._pageDiffs=[];this._hasDiacritics=[];this._matchesCountTotal=0;this._pagesToSearch=null;this._pendingFindMatches=new Set;this._resumePageIdx=null;this._dirtyMatch=false;clearTimeout(this._findTimeout);this._findTimeout=null;this._firstPageCapability=(0,r.createPromiseCapability)()}get#query(){if(this._state.query!==this._rawQuery){this._rawQuery=this._state.query;[this._normalizedQuery]=g(this._state.query)}return this._normalizedQuery}#shouldDirtyMatch(e){if(e.query!==this._state.query){return true}switch(e.type){case"again":const t=this._selected.pageIdx+1;const i=this._linkService;if(t>=1&&t<=i.pagesCount&&t!==i.page&&!i.isPageVisible(t)){return true}return false;case"highlightallchange":return false}return true}#isEntireWord(e,t,i){let n=e.slice(0,t).match(p);if(n){const s=e.charCodeAt(t);const r=n[1].charCodeAt(0);if((0,l.getCharacterType)(s)===(0,l.getCharacterType)(r)){return false}}n=e.slice(t+i).match(f);if(n){const a=e.charCodeAt(t+i-1);const r=n[1].charCodeAt(0);if((0,l.getCharacterType)(a)===(0,l.getCharacterType)(r)){return false}}return true}#calculateRegExpMatch(e,t,i,n){const s=[],r=[];const a=this._pageDiffs[i];let o;while((o=e.exec(n))!==null){if(t&&!this.#isEntireWord(n,o.index,o[0].length)){continue}const[l,d]=m(a,o.index,o[0].length);if(d){s.push(l);r.push(d)}}this._pageMatches[i]=s;this._pageMatchesLength[i]=r}#convertToRegExpString(e,a){const{matchDiacritics:o}=this._state;let l=false;e=e.replace(u,(e,t,i,n,s,r)=>{if(t){return`[ ]*\\${t}[ ]*`}if(i){return`[ ]*${i}[ ]*`}if(n){return"[ ]+"}if(o){return s||r}if(s){return h.has(s.charCodeAt(0))?s:""}if(a){l=true;return`${r}\\p{M}*`}return r});const t="[ ]*";if(e.endsWith(t)){e=e.slice(0,e.length-t.length)}if(o){if(a){l=true;e=`${e}(?=[${n}]|[^\\p{M}]|$)`}}return[l,e]}#calculateMatch(e){let t=this.#query;if(t.length===0){return}const{caseSensitive:i,entireWord:n,phraseSearch:s}=this._state;const r=this._pageContents[e];const a=this._hasDiacritics[e];let o=false;if(s){[o,t]=this.#convertToRegExpString(t,a)}else{const c=t.match(/\S+/g);if(c){t=c.sort().reverse().map(e=>{const[t,i]=this.#convertToRegExpString(e,a);o||=t;return`(${i})`}).join("|")}}const l=`g${o?"u":""}${i?"":"i"}`;t=new RegExp(t,l);this.#calculateRegExpMatch(t,n,e,r);if(this._state.highlightAll){this.#updatePage(e)}if(this._resumePageIdx===e){this._resumePageIdx=null;this.#nextPageMatch()}const d=this._pageMatches[e].length;if(d>0){this._matchesCountTotal+=d;this.#updateUIResultsCount()}}#extractText(){if(this._extractTextPromises.length>0){return}let t=Promise.resolve();for(let n=0,e=this._linkService.pagesCount;n<e;n++){const s=(0,r.createPromiseCapability)();this._extractTextPromises[n]=s.promise;t=t.then(()=>{return this._pdfDocument.getPage(n+1).then(e=>{return e.getTextContent()}).then(e=>{const t=[];for(const i of e.items){t.push(i.str);if(i.hasEOL){t.push("\n")}}[this._pageContents[n],this._pageDiffs[n],this._hasDiacritics[n]]=g(t.join(""));s.resolve()},e=>{console.error(`Unable to get text content for page ${n+1}`,e);this._pageContents[n]="";this._pageDiffs[n]=null;this._hasDiacritics[n]=false;s.resolve()})})}}#updatePage(e){if(this._scrollMatches&&this._selected.pageIdx===e){this._linkService.page=e+1}this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})}#updateAllPages(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#nextMatch(){const e=this._state.findPrevious;const t=this._linkService.page-1;const i=this._linkService.pagesCount;this._highlightMatches=true;if(this._dirtyMatch){this._dirtyMatch=false;this._selected.pageIdx=this._selected.matchIdx=-1;this._offset.pageIdx=t;this._offset.matchIdx=null;this._offset.wrapped=false;this._resumePageIdx=null;this._pageMatches.length=0;this._pageMatchesLength.length=0;this._matchesCountTotal=0;this.#updateAllPages();for(let e=0;e<i;e++){if(this._pendingFindMatches.has(e)){continue}this._pendingFindMatches.add(e);this._extractTextPromises[e].then(()=>{this._pendingFindMatches.delete(e);this.#calculateMatch(e)})}}if(this.#query===""){this.#updateUIState(a.FOUND);return}if(this._resumePageIdx){return}const n=this._offset;this._pagesToSearch=i;if(n.matchIdx!==null){const s=this._pageMatches[n.pageIdx].length;if(!e&&n.matchIdx+1<s||e&&n.matchIdx>0){n.matchIdx=e?n.matchIdx-1:n.matchIdx+1;this.#updateMatch(true);return}this.#advanceOffsetPage(e)}this.#nextPageMatch()}#matchesReady(e){const t=this._offset;const i=e.length;const n=this._state.findPrevious;if(i){t.matchIdx=n?i-1:0;this.#updateMatch(true);return true}this.#advanceOffsetPage(n);if(t.wrapped){t.matchIdx=null;if(this._pagesToSearch<0){this.#updateMatch(false);return true}}return false}#nextPageMatch(){if(this._resumePageIdx!==null){console.error("There can only be one pending page.")}let e=null;do{const t=this._offset.pageIdx;e=this._pageMatches[t];if(!e){this._resumePageIdx=t;break}}while(!this.#matchesReady(e))}#advanceOffsetPage(e){const t=this._offset;const i=this._linkService.pagesCount;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1;t.matchIdx=null;this._pagesToSearch--;if(t.pageIdx>=i||t.pageIdx<0){t.pageIdx=e?i-1:0;t.wrapped=true}}#updateMatch(e=false){let t=a.NOT_FOUND;const i=this._offset.wrapped;this._offset.wrapped=false;if(e){const n=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx;this._selected.matchIdx=this._offset.matchIdx;t=i?a.WRAPPED:a.FOUND;if(n!==-1&&n!==this._selected.pageIdx){this.#updatePage(n)}}this.#updateUIState(t,this._state.findPrevious);if(this._selected.pageIdx!==-1){this._scrollMatches=true;this.#updatePage(this._selected.pageIdx)}}#onFindBarClose(e){const t=this._pdfDocument;this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||t&&this._pdfDocument!==t){return}if(this._findTimeout){clearTimeout(this._findTimeout);this._findTimeout=null}if(this._resumePageIdx){this._resumePageIdx=null;this._dirtyMatch=true}this.#updateUIState(a.FOUND);this._highlightMatches=false;this.#updateAllPages()})}#requestMatchesCount(){const{pageIdx:t,matchIdx:e}=this._selected;let i=0,n=this._matchesCountTotal;if(e!==-1){for(let e=0;e<t;e++){i+=this._pageMatches[e]?.length||0}i+=e+1}if(i<1||i>n){i=n=0}return{current:i,total:n}}#updateUIResultsCount(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#requestMatchesCount()})}#updateUIState(e,t=false){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:t,matchesCount:this.#requestMatchesCount(),rawQuery:this._state?.query??null})}}t.PDFFindController=v},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.CharacterType=void 0;t.getCharacterType=p;const i={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};t.CharacterType=i;function n(e){return e<11904}function s(e){return(e&65408)===0}function r(e){return e>=97&&e<=122||e>=65&&e<=90}function a(e){return e>=48&&e<=57}function o(e){return e===32||e===9||e===13||e===10}function l(e){return e>=13312&&e<=40959||e>=63744&&e<=64255}function d(e){return e>=12448&&e<=12543}function c(e){return e>=12352&&e<=12447}function h(e){return e>=65376&&e<=65439}function u(e){return(e&65408)===3584}function p(e){if(n(e)){if(s(e)){if(o(e)){return i.SPACE}else if(r(e)||a(e)||e===95){return i.ALPHA_LETTER}return i.PUNCT}else if(u(e)){return i.THAI_LETTER}else if(e===160){return i.SPACE}return i.ALPHA_LETTER}if(l(e)){return i.HAN_LETTER}else if(d(e)){return i.KATAKANA_LETTER}else if(c(e)){return i.HIRAGANA_LETTER}else if(h(e)){return i.HALFWIDTH_KATAKANA_LETTER}return i.ALPHA_LETTER}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFHistory=void 0;t.isDestArraysEqual=h;t.isDestHashesEqual=a;var o=i(1);var l=i(6);const d=1e3;const n=50;const s=1e3;function c(){return document.location.hash}class r{constructor({linkService:e,eventBus:t}){this.linkService=e;this.eventBus=t;this._initialized=false;this._fingerprint="";this.reset();this._boundEvents=null;this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=false;this.eventBus._on("pagesloaded",e=>{this._isPagesLoaded=!!e.pagesCount},{once:true})})}initialize({fingerprint:e,resetHistory:t=false,updateUrl:i=false}){if(!e||typeof e!=="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}if(this._initialized){this.reset()}const n=this._fingerprint!==""&&this._fingerprint!==e;this._fingerprint=e;this._updateUrl=i===true;this._initialized=true;this._bindEvents();const s=window.history.state;this._popStateInProgress=false;this._blockHashChange=0;this._currentHash=c();this._numPositionUpdates=0;this._uid=this._maxUid=0;this._destination=null;this._position=null;if(!this._isValidState(s,true)||t){const{hash:a,page:o,rotation:l}=this._parseCurrentHash(true);if(!a||n||t){this._pushOrReplaceState(null,true);return}this._pushOrReplaceState({hash:a,page:o,rotation:l},true);return}const r=s.destination;this._updateInternalState(r,s.uid,true);if(r.rotation!==undefined){this._initialRotation=r.rotation}if(r.dest){this._initialBookmark=JSON.stringify(r.dest);this._destination.page=null}else if(r.hash){this._initialBookmark=r.hash}else if(r.page){this._initialBookmark=`page=${r.page}`}}reset(){if(this._initialized){this._pageHide();this._initialized=false;this._unbindEvents()}if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}this._initialBookmark=null;this._initialRotation=null}push({namedDest:e=null,explicitDest:t,pageNumber:i}){if(!this._initialized){return}if(e&&typeof e!=="string"){console.error("PDFHistory.push: "+`"${e}" is not a valid namedDest parameter.`);return}else if(!Array.isArray(t)){console.error("PDFHistory.push: "+`"${t}" is not a valid explicitDest parameter.`);return}else if(!this._isValidPage(i)){if(i!==null||this._destination){console.error("PDFHistory.push: "+`"${i}" is not a valid pageNumber parameter.`);return}}const n=e||JSON.stringify(t);if(!n){return}let s=false;if(this._destination&&(a(this._destination.hash,n)||h(this._destination.dest,t))){if(this._destination.page){return}s=true}if(this._popStateInProgress&&!s){return}this._pushOrReplaceState({dest:t,hash:n,page:i,rotation:this.linkService.rotation},s);if(!this._popStateInProgress){this._popStateInProgress=true;Promise.resolve().then(()=>{this._popStateInProgress=false})}}pushPage(e){if(!this._initialized){return}if(!this._isValidPage(e)){console.error(`PDFHistory.pushPage: "${e}" is not a valid page number.`);return}if(this._destination?.page===e){return}if(this._popStateInProgress){return}this._pushOrReplaceState({dest:null,hash:`page=${e}`,page:e,rotation:this.linkService.rotation});if(!this._popStateInProgress){this._popStateInProgress=true;Promise.resolve().then(()=>{this._popStateInProgress=false})}}pushCurrentPosition(){if(!this._initialized||this._popStateInProgress){return}this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress){return}const e=window.history.state;if(this._isValidState(e)&&e.uid>0){window.history.back()}}forward(){if(!this._initialized||this._popStateInProgress){return}const e=window.history.state;if(this._isValidState(e)&&e.uid<this._maxUid){window.history.forward()}}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(e,t=false){const i=t||!this._destination;const n={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:e};this._updateInternalState(e,n.uid);let s;if(this._updateUrl&&e?.hash){const r=document.location.href.split("#")[0];if(!r.startsWith("file://")){s=`${r}#${e.hash}`}}if(i){window.history.replaceState(n,"",s)}else{window.history.pushState(n,"",s)}}_tryPushCurrentPosition(e=false){if(!this._position){return}let t=this._position;if(e){t=Object.assign(Object.create(null),this._position);t.temporary=true}if(!this._destination){this._pushOrReplaceState(t);return}if(this._destination.temporary){this._pushOrReplaceState(t,true);return}if(this._destination.hash===t.hash){return}if(!this._destination.page&&(n<=0||this._numPositionUpdates<=n)){return}let i=false;if(this._destination.page>=t.first&&this._destination.page<=t.page){if(this._destination.dest!==undefined||!this._destination.first){return}i=true}this._pushOrReplaceState(t,i)}_isValidPage(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}_isValidState(e,t=false){if(!e){return false}if(e.fingerprint!==this._fingerprint){if(t){if(typeof e.fingerprint!=="string"||e.fingerprint.length!==this._fingerprint.length){return false}const[i]=performance.getEntriesByType("navigation");if(i?.type!=="reload"){return false}}else{return false}}if(!Number.isInteger(e.uid)||e.uid<0){return false}if(e.destination===null||typeof e.destination!=="object"){return false}return true}_updateInternalState(e,t,i=false){if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}if(i&&e?.temporary){delete e.temporary}this._destination=e;this._uid=t;this._maxUid=Math.max(this._maxUid,t);this._numPositionUpdates=0}_parseCurrentHash(e=false){const t=unescape(c()).substring(1);const i=(0,o.parseQueryString)(t);const n=i.get("nameddest")||"";let s=i.get("page")|0;if(!this._isValidPage(s)||e&&n.length>0){s=null}return{hash:t,page:s,rotation:this.linkService.rotation}}_updateViewarea({location:e}){if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}this._position={hash:e.pdfOpenParams.substring(1),page:this.linkService.page,first:e.pageNumber,rotation:e.rotation};if(this._popStateInProgress){return}if(n>0&&this._isPagesLoaded&&this._destination&&!this._destination.page){this._numPositionUpdates++}if(s>0){this._updateViewareaTimeout=setTimeout(()=>{if(!this._popStateInProgress){this._tryPushCurrentPosition(true)}this._updateViewareaTimeout=null},s)}}_popState({state:e}){const t=c(),i=this._currentHash!==t;this._currentHash=t;if(!e){this._uid++;const{hash:s,page:r,rotation:a}=this._parseCurrentHash();this._pushOrReplaceState({hash:s,page:r,rotation:a},true);return}if(!this._isValidState(e)){return}this._popStateInProgress=true;if(i){this._blockHashChange++;(0,l.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:d}).then(()=>{this._blockHashChange--})}const n=e.destination;this._updateInternalState(n,e.uid,true);if((0,o.isValidRotation)(n.rotation)){this.linkService.rotation=n.rotation}if(n.dest){this.linkService.goToDestination(n.dest)}else if(n.hash){this.linkService.setHash(n.hash)}else if(n.page){this.linkService.page=n.page}Promise.resolve().then(()=>{this._popStateInProgress=false})}_pageHide(){if(!this._destination||this._destination.temporary){this._tryPushCurrentPosition()}}_bindEvents(){if(this._boundEvents){return}this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)};this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea);window.addEventListener("popstate",this._boundEvents.popState);window.addEventListener("pagehide",this._boundEvents.pageHide)}_unbindEvents(){if(!this._boundEvents){return}this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea);window.removeEventListener("popstate",this._boundEvents.popState);window.removeEventListener("pagehide",this._boundEvents.pageHide);this._boundEvents=null}}t.PDFHistory=r;function a(e,t){if(typeof e!=="string"||typeof t!=="string"){return false}if(e===t){return true}const i=(0,o.parseQueryString)(e).get("nameddest");if(i===t){return true}return false}function h(i,n){function s(e,t){if(typeof e!==typeof t){return false}if(Array.isArray(e)||Array.isArray(t)){return false}if(e!==null&&typeof e==="object"&&t!==null){if(Object.keys(e).length!==Object.keys(t).length){return false}for(const i in e){if(!s(e[i],t[i])){return false}}return true}return e===t||Number.isNaN(e)&&Number.isNaN(t)}if(!(Array.isArray(i)&&Array.isArray(n))){return false}if(i.length!==n.length){return false}for(let e=0,t=i.length;e<t;e++){if(!s(i[e],n[e])){return false}}return true}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFLayerViewer=void 0;var n=i(13);class s extends n.BaseTreeViewer{constructor(e){super(e);this.l10n=e.l10n;this.eventBus._on("resetlayers",this._resetLayers.bind(this));this.eventBus._on("togglelayerstree",this._toggleAllTreeItems.bind(this))}reset(){super.reset();this._optionalContentConfig=null}_dispatchEvent(e){this.eventBus.dispatch("layersloaded",{source:this,layersCount:e})}_bindLink(t,{groupId:e,input:i}){const n=()=>{this._optionalContentConfig.setVisibility(e,i.checked);this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(this._optionalContentConfig)})};t.onclick=e=>{if(e.target===i){n();return true}else if(e.target!==t){return true}i.checked=!i.checked;n();return false}}async _setNestedName(e,{name:t=null}){if(typeof t==="string"){e.textContent=this._normalizeTextContent(t);return}e.textContent=await this.l10n.get("additional_layers");e.style.fontStyle="italic"}_addToggleButton(e,{name:t=null}){super._addToggleButton(e,t===null)}_toggleAllTreeItems(){if(!this._optionalContentConfig){return}super._toggleAllTreeItems()}render({optionalContentConfig:e,pdfDocument:t}){if(this._optionalContentConfig){this.reset()}this._optionalContentConfig=e||null;this._pdfDocument=t||null;const i=e?.getOrder();if(!i){this._dispatchEvent(0);return}const n=document.createDocumentFragment(),s=[{parent:n,groups:i}];let r=0,a=false;while(s.length>0){const o=s.shift();for(const l of o.groups){const d=document.createElement("div");d.className="treeItem";const c=document.createElement("a");d.append(c);if(typeof l==="object"){a=true;this._addToggleButton(d,l);this._setNestedName(c,l);const h=document.createElement("div");h.className="treeItems";d.append(h);s.push({parent:h,groups:l.order})}else{const u=e.getGroup(l);const p=document.createElement("input");this._bindLink(c,{groupId:l,input:p});p.type="checkbox";p.checked=u.visible;const f=document.createElement("label");f.textContent=this._normalizeTextContent(u.name);f.append(p);c.append(f);r++}o.parent.append(d)}}this._finishRendering(n,r,a)}async _resetLayers(){if(!this._optionalContentConfig){return}const e=await this._pdfDocument.getOptionalContentConfig();this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(e)});this.render({optionalContentConfig:e,pdfDocument:this._pdfDocument})}}t.PDFLayerViewer=s},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFOutlineViewer=void 0;var n=i(13);var h=i(5);var s=i(1);class r extends n.BaseTreeViewer{constructor(e){super(e);this.linkService=e.linkService;this.eventBus._on("toggleoutlinetree",this._toggleAllTreeItems.bind(this));this.eventBus._on("currentoutlineitem",this._currentOutlineItem.bind(this));this.eventBus._on("pagechanging",e=>{this._currentPageNumber=e.pageNumber});this.eventBus._on("pagesloaded",e=>{this._isPagesLoaded=!!e.pagesCount;if(this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled){this._currentOutlineItemCapability.resolve(this._isPagesLoaded)}});this.eventBus._on("sidebarviewchanged",e=>{this._sidebarView=e.view})}reset(){super.reset();this._outline=null;this._pageNumberToDestHashCapability=null;this._currentPageNumber=1;this._isPagesLoaded=null;if(this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled){this._currentOutlineItemCapability.resolve(false)}this._currentOutlineItemCapability=null}_dispatchEvent(e){this._currentOutlineItemCapability=(0,h.createPromiseCapability)();if(e===0||this._pdfDocument?.loadingParams.disableAutoFetch){this._currentOutlineItemCapability.resolve(false)}else if(this._isPagesLoaded!==null){this._currentOutlineItemCapability.resolve(this._isPagesLoaded)}this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:e,currentOutlineItemPromise:this._currentOutlineItemCapability.promise})}_bindLink(e,{url:t,newWindow:i,dest:n}){const{linkService:s}=this;if(t){s.addLinkAttributes(e,t,i);return}e.href=s.getDestinationHash(n);e.onclick=e=>{this._updateCurrentTreeItem(e.target.parentNode);if(n){s.goToDestination(n)}return false}}_setStyles(e,{bold:t,italic:i}){if(t){e.style.fontWeight="bold"}if(i){e.style.fontStyle="italic"}}_addToggleButton(e,{count:t,items:i}){let n=false;if(t<0){let e=i.length;if(e>0){const s=[...i];while(s.length>0){const{count:r,items:a}=s.shift();if(r>0&&a.length>0){e+=a.length;s.push(...a)}}}if(Math.abs(t)===e){n=true}}super._addToggleButton(e,n)}_toggleAllTreeItems(){if(!this._outline){return}super._toggleAllTreeItems()}render({outline:e,pdfDocument:t}){if(this._outline){this.reset()}this._outline=e||null;this._pdfDocument=t||null;if(!e){this._dispatchEvent(0);return}const i=document.createDocumentFragment();const n=[{parent:i,items:e}];let s=0,r=false;while(n.length>0){const a=n.shift();for(const o of a.items){const l=document.createElement("div");l.className="treeItem";const d=document.createElement("a");this._bindLink(d,o);this._setStyles(d,o);d.textContent=this._normalizeTextContent(o.title);l.append(d);if(o.items.length>0){r=true;this._addToggleButton(l,o);const c=document.createElement("div");c.className="treeItems";l.append(c);n.push({parent:c,items:o.items})}a.parent.append(l);s++}}this._finishRendering(i,s,r)}async _currentOutlineItem(){if(!this._isPagesLoaded){throw new Error("_currentOutlineItem: All pages have not been loaded.")}if(!this._outline||!this._pdfDocument){return}const t=await this._getPageNumberToDestHash(this._pdfDocument);if(!t){return}this._updateCurrentTreeItem(null);if(this._sidebarView!==s.SidebarView.OUTLINE){return}for(let e=this._currentPageNumber;e>0;e--){const i=t.get(e);if(!i){continue}const n=this.container.querySelector(`a[href="${i}"]`);if(!n){continue}this._scrollToCurrentTreeItem(n.parentNode);break}}async _getPageNumberToDestHash(i){if(this._pageNumberToDestHashCapability){return this._pageNumberToDestHashCapability.promise}this._pageNumberToDestHashCapability=(0,h.createPromiseCapability)();const n=new Map,s=new Map;const r=[{nesting:0,items:this._outline}];while(r.length>0){const e=r.shift(),a=e.nesting;for(const{dest:o,items:l}of e.items){let e,t;if(typeof o==="string"){e=await i.getDestination(o);if(i!==this._pdfDocument){return null}}else{e=o}if(Array.isArray(e)){const[d]=e;if(typeof d==="object"&&d!==null){t=this.linkService._cachedPageNumber(d);if(!t){try{t=await i.getPageIndex(d)+1;if(i!==this._pdfDocument){return null}this.linkService.cachePageRef(t,d)}catch(e){}}}else if(Number.isInteger(d)){t=d+1}if(Number.isInteger(t)&&(!n.has(t)||a>s.get(t))){const c=this.linkService.getDestinationHash(o);n.set(t,c);s.set(t,a)}}if(l.length>0){r.push({nesting:a+1,items:l})}}}this._pageNumberToDestHashCapability.resolve(n.size>0?n:null);return this._pageNumberToDestHashCapability.promise}}t.PDFOutlineViewer=r},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFPresentationMode=void 0;var a=i(1);var n=i(5);const s=3e3;const r="pdfPresentationMode";const o="pdfPresentationModeControls";const l=50;const d=.1;const c=50;const h=Math.PI/6;class u{#state=a.PresentationModeState.UNKNOWN;#args=null;constructor({container:e,pdfViewer:t,eventBus:i}){this.container=e;this.pdfViewer=t;this.eventBus=i;this.contextMenuOpen=false;this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0;this.touchSwipeState=null}async request(){const{container:e,pdfViewer:t}=this;if(this.active||!t.pagesCount||!e.requestFullscreen){return false}this.#addFullscreenChangeListeners();this.#notifyStateChange(a.PresentationModeState.CHANGING);const i=e.requestFullscreen();this.#args={pageNumber:t.currentPageNumber,scaleValue:t.currentScaleValue,scrollMode:t.scrollMode,spreadMode:null,annotationEditorMode:null};if(t.spreadMode!==a.SpreadMode.NONE&&!(t.pageViewsReady&&t.hasEqualPageSizes)){console.warn("Ignoring Spread modes when entering PresentationMode, "+"since the document may contain varying page sizes.");this.#args.spreadMode=t.spreadMode}if(t.annotationEditorMode!==n.AnnotationEditorType.DISABLE){this.#args.annotationEditorMode=t.annotationEditorMode}try{await i;t.focus();return true}catch(e){this.#removeFullscreenChangeListeners();this.#notifyStateChange(a.PresentationModeState.NORMAL)}return false}get active(){return this.#state===a.PresentationModeState.CHANGING||this.#state===a.PresentationModeState.FULLSCREEN}#mouseWheel(e){if(!this.active){return}e.preventDefault();const t=(0,a.normalizeWheelEventDelta)(e);const i=Date.now();const n=this.mouseScrollTimeStamp;if(i>n&&i-n<l){return}if(this.mouseScrollDelta>0&&t<0||this.mouseScrollDelta<0&&t>0){this.#resetMouseScrollState()}this.mouseScrollDelta+=t;if(Math.abs(this.mouseScrollDelta)>=d){const s=this.mouseScrollDelta;this.#resetMouseScrollState();const r=s>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage();if(r){this.mouseScrollTimeStamp=i}}}#notifyStateChange(e){this.#state=e;this.eventBus.dispatch("presentationmodechanged",{source:this,state:e})}#enter(){this.#notifyStateChange(a.PresentationModeState.FULLSCREEN);this.container.classList.add(r);setTimeout(()=>{this.pdfViewer.scrollMode=a.ScrollMode.PAGE;if(this.#args.spreadMode!==null){this.pdfViewer.spreadMode=a.SpreadMode.NONE}this.pdfViewer.currentPageNumber=this.#args.pageNumber;this.pdfViewer.currentScaleValue="page-fit";if(this.#args.annotationEditorMode!==null){this.pdfViewer.annotationEditorMode=n.AnnotationEditorType.NONE}},0);this.#addWindowListeners();this.#showControls();this.contextMenuOpen=false;window.getSelection().removeAllRanges()}#exit(){const e=this.pdfViewer.currentPageNumber;this.container.classList.remove(r);setTimeout(()=>{this.#removeFullscreenChangeListeners();this.#notifyStateChange(a.PresentationModeState.NORMAL);this.pdfViewer.scrollMode=this.#args.scrollMode;if(this.#args.spreadMode!==null){this.pdfViewer.spreadMode=this.#args.spreadMode}this.pdfViewer.currentScaleValue=this.#args.scaleValue;this.pdfViewer.currentPageNumber=e;if(this.#args.annotationEditorMode!==null){this.pdfViewer.annotationEditorMode=this.#args.annotationEditorMode}this.#args=null},0);this.#removeWindowListeners();this.#hideControls();this.#resetMouseScrollState();this.contextMenuOpen=false}#mouseDown(e){if(this.contextMenuOpen){this.contextMenuOpen=false;e.preventDefault();return}if(e.button===0){const t=e.target.href&&e.target.classList.contains("internalLink");if(!t){e.preventDefault();if(e.shiftKey){this.pdfViewer.previousPage()}else{this.pdfViewer.nextPage()}}}}#contextMenu(){this.contextMenuOpen=true}#showControls(){if(this.controlsTimeout){clearTimeout(this.controlsTimeout)}else{this.container.classList.add(o)}this.controlsTimeout=setTimeout(()=>{this.container.classList.remove(o);delete this.controlsTimeout},s)}#hideControls(){if(!this.controlsTimeout){return}clearTimeout(this.controlsTimeout);this.container.classList.remove(o);delete this.controlsTimeout}#resetMouseScrollState(){this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0}#touchSwipe(t){if(!this.active){return}if(t.touches.length>1){this.touchSwipeState=null;return}switch(t.type){case"touchstart":this.touchSwipeState={startX:t.touches[0].pageX,startY:t.touches[0].pageY,endX:t.touches[0].pageX,endY:t.touches[0].pageY};break;case"touchmove":if(this.touchSwipeState===null){return}this.touchSwipeState.endX=t.touches[0].pageX;this.touchSwipeState.endY=t.touches[0].pageY;t.preventDefault();break;case"touchend":if(this.touchSwipeState===null){return}let e=0;const i=this.touchSwipeState.endX-this.touchSwipeState.startX;const n=this.touchSwipeState.endY-this.touchSwipeState.startY;const s=Math.abs(Math.atan2(n,i));if(Math.abs(i)>c&&(s<=h||s>=Math.PI-h)){e=i}else if(Math.abs(n)>c&&Math.abs(s-Math.PI/2)<=h){e=n}if(e>0){this.pdfViewer.previousPage()}else if(e<0){this.pdfViewer.nextPage()}break}}#addWindowListeners(){this.showControlsBind=this.#showControls.bind(this);this.mouseDownBind=this.#mouseDown.bind(this);this.mouseWheelBind=this.#mouseWheel.bind(this);this.resetMouseScrollStateBind=this.#resetMouseScrollState.bind(this);this.contextMenuBind=this.#contextMenu.bind(this);this.touchSwipeBind=this.#touchSwipe.bind(this);window.addEventListener("mousemove",this.showControlsBind);window.addEventListener("mousedown",this.mouseDownBind);window.addEventListener("wheel",this.mouseWheelBind,{passive:false});window.addEventListener("keydown",this.resetMouseScrollStateBind);window.addEventListener("contextmenu",this.contextMenuBind);window.addEventListener("touchstart",this.touchSwipeBind);window.addEventListener("touchmove",this.touchSwipeBind);window.addEventListener("touchend",this.touchSwipeBind)}#removeWindowListeners(){window.removeEventListener("mousemove",this.showControlsBind);window.removeEventListener("mousedown",this.mouseDownBind);window.removeEventListener("wheel",this.mouseWheelBind,{passive:false});window.removeEventListener("keydown",this.resetMouseScrollStateBind);window.removeEventListener("contextmenu",this.contextMenuBind);window.removeEventListener("touchstart",this.touchSwipeBind);window.removeEventListener("touchmove",this.touchSwipeBind);window.removeEventListener("touchend",this.touchSwipeBind);delete this.showControlsBind;delete this.mouseDownBind;delete this.mouseWheelBind;delete this.resetMouseScrollStateBind;delete this.contextMenuBind;delete this.touchSwipeBind}#fullscreenChange(){if(document.fullscreenElement){this.#enter()}else{this.#exit()}}#addFullscreenChangeListeners(){this.fullscreenChangeBind=this.#fullscreenChange.bind(this);window.addEventListener("fullscreenchange",this.fullscreenChangeBind)}#removeFullscreenChangeListeners(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind);delete this.fullscreenChangeBind}}t.PDFPresentationMode=u},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFRenderingQueue=void 0;var n=i(5);var s=i(1);const r=3e4;class a{constructor(){this.pdfViewer=null;this.pdfThumbnailViewer=null;this.onIdle=null;this.highestPriorityPage=null;this.idleTimeout=null;this.printing=false;this.isThumbnailViewEnabled=false}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(e){if(this.idleTimeout){clearTimeout(this.idleTimeout);this.idleTimeout=null}if(this.pdfViewer.forceRendering(e)){return}if(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()){return}if(this.printing){return}if(this.onIdle){this.idleTimeout=setTimeout(this.onIdle.bind(this),r)}}getHighestPriority(e,i,n,t=false){const s=e.views,r=s.length;if(r===0){return null}for(let e=0;e<r;e++){const c=s[e].view;if(!this.isViewFinished(c)){return c}}const a=e.first.id,o=e.last.id;if(o-a+1>r){const h=e.ids;for(let e=1,t=o-a;e<t;e++){const u=n?a+e:o-e;if(h.has(u)){continue}const p=i[u-1];if(!this.isViewFinished(p)){return p}}}let l=n?o:a-2;let d=i[l];if(d&&!this.isViewFinished(d)){return d}if(t){l+=n?1:-1;d=i[l];if(d&&!this.isViewFinished(d)){return d}}return null}isViewFinished(e){return e.renderingState===s.RenderingStates.FINISHED}renderView(e){switch(e.renderingState){case s.RenderingStates.FINISHED:return false;case s.RenderingStates.PAUSED:this.highestPriorityPage=e.renderingId;e.resume();break;case s.RenderingStates.RUNNING:this.highestPriorityPage=e.renderingId;break;case s.RenderingStates.INITIAL:this.highestPriorityPage=e.renderingId;e.draw().finally(()=>{this.renderHighestPriority()}).catch(e=>{if(e instanceof n.RenderingCancelledException){return}console.error(`renderView: "${e}"`)});break}return true}}t.PDFRenderingQueue=a},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFScriptingManager=void 0;var c=i(1);var a=i(5);class n{constructor({eventBus:e,sandboxBundleSrc:t=null,scriptingFactory:i=null,docPropertiesLookup:n=null}){this._pdfDocument=null;this._pdfViewer=null;this._closeCapability=null;this._destroyCapability=null;this._scripting=null;this._mouseState=Object.create(null);this._ready=false;this._eventBus=e;this._sandboxBundleSrc=t;this._scriptingFactory=i;this._docPropertiesLookup=n}setViewer(e){this._pdfViewer=e}async setDocument(e){if(this._pdfDocument){await this._destroyScripting()}this._pdfDocument=e;if(!e){return}const[t,i,n]=await Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(!t&&!n){await this._destroyScripting();return}if(e!==this._pdfDocument){return}try{this._scripting=this._createScripting()}catch(e){console.error(`PDFScriptingManager.setDocument: "${e?.message}".`);await this._destroyScripting();return}this._internalEvents.set("updatefromsandbox",e=>{if(e?.source!==window){return}this._updateFromSandbox(e.detail)});this._internalEvents.set("dispatcheventinsandbox",e=>{this._scripting?.dispatchEventInSandbox(e.detail)});this._internalEvents.set("pagechanging",({pageNumber:e,previous:t})=>{if(e===t){return}this._dispatchPageClose(t);this._dispatchPageOpen(e)});this._internalEvents.set("pagerendered",({pageNumber:e})=>{if(!this._pageOpenPending.has(e)){return}if(e!==this._pdfViewer.currentPageNumber){return}this._dispatchPageOpen(e)});this._internalEvents.set("pagesdestroy",async e=>{await this._dispatchPageClose(this._pdfViewer.currentPageNumber);await this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"});this._closeCapability?.resolve()});this._domEvents.set("mousedown",e=>{this._mouseState.isDown=true});this._domEvents.set("mouseup",e=>{this._mouseState.isDown=false});for(const[s,r]of this._internalEvents){this._eventBus._on(s,r)}for(const[s,r]of this._domEvents){window.addEventListener(s,r,true)}try{const a=await this._getDocProperties();if(e!==this._pdfDocument){return}await this._scripting.createSandbox({objects:t,calculationOrder:i,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...a,actions:n}});this._eventBus.dispatch("sandboxcreated",{source:this})}catch(e){console.error(`PDFScriptingManager.setDocument: "${e?.message}".`);await this._destroyScripting();return}await this._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"});await this._dispatchPageOpen(this._pdfViewer.currentPageNumber,true);Promise.resolve().then(()=>{if(e===this._pdfDocument){this._ready=true}})}async dispatchWillSave(e){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(e){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(e){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}async dispatchDidPrint(e){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,a.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,a.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,a.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,a.shadow)(this,"_visitedPages",new Map)}async _updateFromSandbox(e){const t=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode;const{id:i,siblings:n,command:s,value:r}=e;if(!i){switch(s){case"clear":console.clear();break;case"error":console.error(r);break;case"layout":if(t){return}const o=(0,c.apiPageLayoutToViewerModes)(r);this._pdfViewer.spreadMode=o.spreadMode;break;case"page-num":this._pdfViewer.currentPageNumber=r+1;break;case"print":await this._pdfViewer.pagesPromise;this._eventBus.dispatch("print",{source:this});break;case"println":console.log(r);break;case"zoom":if(t){return}this._pdfViewer.currentScaleValue=r;break;case"SaveAs":this._eventBus.dispatch("download",{source:this});break;case"FirstPage":this._pdfViewer.currentPageNumber=1;break;case"LastPage":this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;break;case"NextPage":this._pdfViewer.nextPage();break;case"PrevPage":this._pdfViewer.previousPage();break;case"ZoomViewIn":if(t){return}this._pdfViewer.increaseScale();break;case"ZoomViewOut":if(t){return}this._pdfViewer.decreaseScale();break}return}if(t){if(e.focus){return}}delete e.id;delete e.siblings;const a=n?[i,...n]:[i];for(const l of a){const d=document.querySelector(`[data-element-id="${l}"]`);if(d){d.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e}))}else{this._pdfDocument?.annotationStorage.setValue(l,e)}}}async _dispatchPageOpen(t,e=false){const i=this._pdfDocument,n=this._visitedPages;if(e){this._closeCapability=(0,a.createPromiseCapability)()}if(!this._closeCapability){return}const s=this._pdfViewer.getPageView(t-1);if(s?.renderingState!==c.RenderingStates.FINISHED){this._pageOpenPending.add(t);return}this._pageOpenPending.delete(t);const r=(async()=>{const e=await(!n.has(t)?s.pdfPage?.getJSActions():null);if(i!==this._pdfDocument){return}await this._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:t,actions:e})})();n.set(t,r)}async _dispatchPageClose(e){const t=this._pdfDocument,i=this._visitedPages;if(!this._closeCapability){return}if(this._pageOpenPending.has(e)){return}const n=i.get(e);if(!n){return}i.set(e,null);await n;if(t!==this._pdfDocument){return}await this._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e})}async _getDocProperties(){if(this._docPropertiesLookup){return this._docPropertiesLookup(this._pdfDocument)}throw new Error("_getDocProperties: Unable to lookup properties.")}_createScripting(){this._destroyCapability=(0,a.createPromiseCapability)();if(this._scripting){throw new Error("_createScripting: Scripting already exists.")}if(this._scriptingFactory){return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc})}throw new Error("_createScripting: Cannot create scripting.")}async _destroyScripting(){if(!this._scripting){this._pdfDocument=null;this._destroyCapability?.resolve();return}if(this._closeCapability){await Promise.race([this._closeCapability.promise,new Promise(e=>{setTimeout(e,1e3)})]).catch(e=>{});this._closeCapability=null}this._pdfDocument=null;try{await this._scripting.destroySandbox()}catch(e){}for(const[e,t]of this._internalEvents){this._eventBus._off(e,t)}this._internalEvents.clear();for(const[e,t]of this._domEvents){window.removeEventListener(e,t,true)}this._domEvents.clear();this._pageOpenPending.clear();this._visitedPages.clear();this._scripting=null;delete this._mouseState.isDown;this._ready=false;this._destroyCapability?.resolve()}}t.PDFScriptingManager=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFSidebar=void 0;var l=i(1);const n="pdfSidebarNotification";class s{constructor({elements:e,pdfViewer:t,pdfThumbnailViewer:i,eventBus:n,l10n:s}){this.isOpen=false;this.active=l.SidebarView.THUMBS;this.isInitialViewSet=false;this.isInitialEventDispatched=false;this.onToggled=null;this.pdfViewer=t;this.pdfThumbnailViewer=i;this.outerContainer=e.outerContainer;this.sidebarContainer=e.sidebarContainer;this.toggleButton=e.toggleButton;this.thumbnailButton=e.thumbnailButton;this.outlineButton=e.outlineButton;this.attachmentsButton=e.attachmentsButton;this.layersButton=e.layersButton;this.thumbnailView=e.thumbnailView;this.outlineView=e.outlineView;this.attachmentsView=e.attachmentsView;this.layersView=e.layersView;this._outlineOptionsContainer=e.outlineOptionsContainer;this._currentOutlineItemButton=e.currentOutlineItemButton;this.eventBus=n;this.l10n=s;this.#addEventListeners()}reset(){this.isInitialViewSet=false;this.isInitialEventDispatched=false;this.#hideUINotification(true);this.switchView(l.SidebarView.THUMBS);this.outlineButton.disabled=false;this.attachmentsButton.disabled=false;this.layersButton.disabled=false;this._currentOutlineItemButton.disabled=true}get visibleView(){return this.isOpen?this.active:l.SidebarView.NONE}setInitialView(e=l.SidebarView.NONE){if(this.isInitialViewSet){return}this.isInitialViewSet=true;if(e===l.SidebarView.NONE||e===l.SidebarView.UNKNOWN){this.#dispatchEvent();return}this.switchView(e,true);if(!this.isInitialEventDispatched){this.#dispatchEvent()}}switchView(e,t=false){const i=e!==this.active;let n=false;switch(e){case l.SidebarView.NONE:if(this.isOpen){this.close()}return;case l.SidebarView.THUMBS:if(this.isOpen&&i){n=true}break;case l.SidebarView.OUTLINE:if(this.outlineButton.disabled){return}break;case l.SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled){return}break;case l.SidebarView.LAYERS:if(this.layersButton.disabled){return}break;default:console.error(`PDFSidebar.switchView: "${e}" is not a valid view.`);return}this.active=e;const s=e===l.SidebarView.THUMBS,r=e===l.SidebarView.OUTLINE,a=e===l.SidebarView.ATTACHMENTS,o=e===l.SidebarView.LAYERS;this.thumbnailButton.classList.toggle("toggled",s);this.outlineButton.classList.toggle("toggled",r);this.attachmentsButton.classList.toggle("toggled",a);this.layersButton.classList.toggle("toggled",o);this.thumbnailButton.setAttribute("aria-checked",s);this.outlineButton.setAttribute("aria-checked",r);this.attachmentsButton.setAttribute("aria-checked",a);this.layersButton.setAttribute("aria-checked",o);this.thumbnailView.classList.toggle("hidden",!s);this.outlineView.classList.toggle("hidden",!r);this.attachmentsView.classList.toggle("hidden",!a);this.layersView.classList.toggle("hidden",!o);this._outlineOptionsContainer.classList.toggle("hidden",!r);if(t&&!this.isOpen){this.open();return}if(n){this.#updateThumbnailViewer();this.#forceRendering()}if(i){this.#dispatchEvent()}}open(){if(this.isOpen){return}this.isOpen=true;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.outerContainer.classList.add("sidebarMoving","sidebarOpen");if(this.active===l.SidebarView.THUMBS){this.#updateThumbnailViewer()}this.#forceRendering();this.#dispatchEvent();this.#hideUINotification()}close(){if(!this.isOpen){return}this.isOpen=false;this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false");this.outerContainer.classList.add("sidebarMoving");this.outerContainer.classList.remove("sidebarOpen");this.#forceRendering();this.#dispatchEvent()}toggle(){if(this.isOpen){this.close()}else{this.open()}}#dispatchEvent(){if(this.isInitialViewSet&&!this.isInitialEventDispatched){this.isInitialEventDispatched=true}this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})}#forceRendering(){if(this.onToggled){this.onToggled()}else{this.pdfViewer.forceRendering();this.pdfThumbnailViewer.forceRendering()}}#updateThumbnailViewer(){const{pdfViewer:t,pdfThumbnailViewer:i}=this;const n=t.pagesCount;for(let e=0;e<n;e++){const s=t.getPageView(e);if(s?.renderingState===l.RenderingStates.FINISHED){const r=i.getThumbnail(e);r.setImage(s)}}i.scrollThumbnailIntoView(t.currentPageNumber)}#showUINotification(){this.l10n.get("toggle_sidebar_notification2.title").then(e=>{this.toggleButton.title=e});if(!this.isOpen){this.toggleButton.classList.add(n)}}#hideUINotification(e=false){if(this.isOpen||e){this.toggleButton.classList.remove(n)}if(e){this.l10n.get("toggle_sidebar.title").then(e=>{this.toggleButton.title=e})}}#addEventListeners(){this.sidebarContainer.addEventListener("transitionend",e=>{if(e.target===this.sidebarContainer){this.outerContainer.classList.remove("sidebarMoving")}});this.toggleButton.addEventListener("click",()=>{this.toggle()});this.thumbnailButton.addEventListener("click",()=>{this.switchView(l.SidebarView.THUMBS)});this.outlineButton.addEventListener("click",()=>{this.switchView(l.SidebarView.OUTLINE)});this.outlineButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("toggleoutlinetree",{source:this})});this.attachmentsButton.addEventListener("click",()=>{this.switchView(l.SidebarView.ATTACHMENTS)});this.layersButton.addEventListener("click",()=>{this.switchView(l.SidebarView.LAYERS)});this.layersButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("resetlayers",{source:this})});this._currentOutlineItemButton.addEventListener("click",()=>{this.eventBus.dispatch("currentoutlineitem",{source:this})});const t=(e,t,i)=>{t.disabled=!e;if(e){this.#showUINotification()}else if(this.active===i){this.switchView(l.SidebarView.THUMBS)}};this.eventBus._on("outlineloaded",e=>{t(e.outlineCount,this.outlineButton,l.SidebarView.OUTLINE);e.currentOutlineItemPromise.then(e=>{if(!this.isInitialViewSet){return}this._currentOutlineItemButton.disabled=!e})});this.eventBus._on("attachmentsloaded",e=>{t(e.attachmentsCount,this.attachmentsButton,l.SidebarView.ATTACHMENTS)});this.eventBus._on("layersloaded",e=>{t(e.layersCount,this.layersButton,l.SidebarView.LAYERS)});this.eventBus._on("presentationmodechanged",e=>{if(e.state===l.PresentationModeState.NORMAL&&this.visibleView===l.SidebarView.THUMBS){this.#updateThumbnailViewer()}})}}t.PDFSidebar=s},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFSidebarResizer=void 0;var n=i(1);const s="--sidebar-width";const r=200;const a="sidebarResizing";class o{constructor(e,t,i){this.isRTL=false;this.sidebarOpen=false;this._width=null;this._outerContainerWidth=null;this._boundEvents=Object.create(null);this.outerContainer=e.outerContainer;this.resizer=e.resizer;this.eventBus=t;i.getDirection().then(e=>{this.isRTL=e==="rtl"});this._addEventListeners()}get outerContainerWidth(){return this._outerContainerWidth||=this.outerContainer.clientWidth}_updateWidth(e=0){const t=Math.floor(this.outerContainerWidth/2);if(e>t){e=t}if(e<r){e=r}if(e===this._width){return false}this._width=e;n.docStyle.setProperty(s,`${e}px`);return true}_mouseMove(e){let t=e.clientX;if(this.isRTL){t=this.outerContainerWidth-t}this._updateWidth(t)}_mouseUp(e){this.outerContainer.classList.remove(a);this.eventBus.dispatch("resize",{source:this});const t=this._boundEvents;window.removeEventListener("mousemove",t.mouseMove);window.removeEventListener("mouseup",t.mouseUp)}_addEventListeners(){const t=this._boundEvents;t.mouseMove=this._mouseMove.bind(this);t.mouseUp=this._mouseUp.bind(this);this.resizer.addEventListener("mousedown",e=>{if(e.button!==0){return}this.outerContainer.classList.add(a);window.addEventListener("mousemove",t.mouseMove);window.addEventListener("mouseup",t.mouseUp)});this.eventBus._on("sidebarviewchanged",e=>{this.sidebarOpen=!!e?.view});this.eventBus._on("resize",e=>{if(e?.source!==window){return}this._outerContainerWidth=null;if(!this._width){return}if(!this.sidebarOpen){this._updateWidth(this._width);return}this.outerContainer.classList.add(a);const t=this._updateWidth(this._width);Promise.resolve().then(()=>{this.outerContainer.classList.remove(a);if(t){this.eventBus.dispatch("resize",{source:this})}})})}}t.PDFSidebarResizer=o},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFThumbnailViewer=void 0;var l=i(1);var d=i(27);const c=-19;const h="selected";class n{constructor({container:e,eventBus:t,linkService:i,renderingQueue:n,l10n:s,pageColors:r}){this.container=e;this.linkService=i;this.renderingQueue=n;this.l10n=s;this.pageColors=r||null;if(this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))){if(this.pageColors.background||this.pageColors.foreground){console.warn("PDFThumbnailViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used.")}this.pageColors=null}this.scroll=(0,l.watchScroll)(this.container,this._scrollUpdated.bind(this));this._resetView()}_scrollUpdated(){this.renderingQueue.renderHighestPriority()}getThumbnail(e){return this._thumbnails[e]}_getVisibleThumbs(){return(0,l.getVisibleElements)({scrollEl:this.container,views:this._thumbnails})}scrollThumbnailIntoView(t){if(!this.pdfDocument){return}const i=this._thumbnails[t-1];if(!i){console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.');return}if(t!==this._currentPageNumber){const e=this._thumbnails[this._currentPageNumber-1];e.div.classList.remove(h);i.div.classList.add(h)}const{first:n,last:s,views:r}=this._getVisibleThumbs();if(r.length>0){let e=false;if(t<=n.id||t>=s.id){e=true}else{for(const{id:a,percent:o}of r){if(a!==t){continue}e=o<100;break}}if(e){(0,l.scrollIntoView)(i.div,{top:c})}}this._currentPageNumber=t}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!(0,l.isValidRotation)(e)){throw new Error("Invalid thumbnails rotation angle.")}if(!this.pdfDocument){return}if(this._pagesRotation===e){return}this._pagesRotation=e;const t={rotation:e};for(const i of this._thumbnails){i.update(t)}}cleanup(){for(const e of this._thumbnails){if(e.renderingState!==l.RenderingStates.FINISHED){e.reset()}}d.TempImageFactory.destroyCanvas()}_resetView(){this._thumbnails=[];this._currentPageNumber=1;this._pageLabels=null;this._pagesRotation=0;this.container.textContent=""}setDocument(a){if(this.pdfDocument){this._cancelRendering();this._resetView()}this.pdfDocument=a;if(!a){return}const e=a.getPage(1);const o=a.getOptionalContentConfig();e.then(e=>{const t=a.numPages;const i=e.getViewport({scale:1});for(let e=1;e<=t;++e){const r=new d.PDFThumbnailView({container:this.container,id:e,defaultViewport:i.clone(),optionalContentConfigPromise:o,linkService:this.linkService,renderingQueue:this.renderingQueue,l10n:this.l10n,pageColors:this.pageColors});this._thumbnails.push(r)}const n=this._thumbnails[0];if(n){n.setPdfPage(e)}const s=this._thumbnails[this._currentPageNumber-1];s.div.classList.add(h)}).catch(e=>{console.error("Unable to initialize thumbnail viewer",e)})}_cancelRendering(){for(const e of this._thumbnails){e.cancelRendering()}}setPageLabels(e){if(!this.pdfDocument){return}if(!e){this._pageLabels=null}else if(!(Array.isArray(e)&&this.pdfDocument.numPages===e.length)){this._pageLabels=null;console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")}else{this._pageLabels=e}for(let e=0,t=this._thumbnails.length;e<t;e++){this._thumbnails[e].setPageLabel(this._pageLabels?.[e]??null)}}async#ensurePdfPageLoaded(e){if(e.pdfPage){return e.pdfPage}try{const t=await this.pdfDocument.getPage(e.id);if(!e.pdfPage){e.setPdfPage(t)}return t}catch(e){console.error("Unable to get page for thumb view",e);return null}}#getScrollAhead(e){if(e.first?.id===1){return true}else if(e.last?.id===this._thumbnails.length){return false}return this.scroll.down}forceRendering(){const e=this._getVisibleThumbs();const t=this.#getScrollAhead(e);const i=this.renderingQueue.getHighestPriority(e,this._thumbnails,t);if(i){this.#ensurePdfPageLoaded(i).then(()=>{this.renderingQueue.renderView(i)});return true}return false}}t.PDFThumbnailViewer=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.TempImageFactory=t.PDFThumbnailView=void 0;var g=i(1);var c=i(5);const h=2;const o=3;const m=1;const v=98;class l{static#tempCanvas=null;static getCanvas(e,t){const i=this.#tempCanvas||=document.createElement("canvas");i.width=e;i.height=t;const n=i.getContext("2d",{alpha:false});n.save();n.fillStyle="rgb(255, 255, 255)";n.fillRect(0,0,e,t);n.restore();return[i,i.getContext("2d")]}static destroyCanvas(){const e=this.#tempCanvas;if(e){e.width=0;e.height=0}this.#tempCanvas=null}}t.TempImageFactory=l;class n{constructor({container:e,id:t,defaultViewport:i,optionalContentConfigPromise:n,linkService:s,renderingQueue:r,l10n:a,pageColors:o}){this.id=t;this.renderingId="thumbnail"+t;this.pageLabel=null;this.pdfPage=null;this.rotation=0;this.viewport=i;this.pdfPageRotate=i.rotation;this._optionalContentConfigPromise=n||null;this.pageColors=o||null;this.linkService=s;this.renderingQueue=r;this.renderTask=null;this.renderingState=g.RenderingStates.INITIAL;this.resume=null;const l=this.viewport.width,d=this.viewport.height,c=l/d;this.canvasWidth=v;this.canvasHeight=this.canvasWidth/c|0;this.scale=this.canvasWidth/l;this.l10n=a;const h=document.createElement("a");h.href=s.getAnchorUrl("#page="+t);this._thumbPageTitle.then(e=>{h.title=e});h.onclick=function(){s.goToPage(t);return false};this.anchor=h;const u=document.createElement("div");u.className="thumbnail";u.setAttribute("data-page-number",this.id);this.div=u;const p=document.createElement("div");p.className="thumbnailSelectionRing";const f=2*m;p.style.width=this.canvasWidth+f+"px";p.style.height=this.canvasHeight+f+"px";this.ring=p;u.append(p);h.append(u);e.append(h)}setPdfPage(e){this.pdfPage=e;this.pdfPageRotate=e.rotate;const t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:1,rotation:t});this.reset()}reset(){this.cancelRendering();this.renderingState=g.RenderingStates.INITIAL;const e=this.viewport.width,t=this.viewport.height,i=e/t;this.canvasHeight=this.canvasWidth/i|0;this.scale=this.canvasWidth/e;this.div.removeAttribute("data-loaded");const n=this.ring;n.textContent="";const s=2*m;n.style.width=this.canvasWidth+s+"px";n.style.height=this.canvasHeight+s+"px";if(this.canvas){this.canvas.width=0;this.canvas.height=0;delete this.canvas}if(this.image){this.image.removeAttribute("src");delete this.image}}update({rotation:e=null}){if(typeof e==="number"){this.rotation=e}const t=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:t});this.reset()}cancelRendering(){if(this.renderTask){this.renderTask.cancel();this.renderTask=null}this.resume=null}_getPageDrawContext(e=1){const t=document.createElement("canvas");const i=t.getContext("2d",{alpha:false});const n=new g.OutputScale;t.width=e*this.canvasWidth*n.sx|0;t.height=e*this.canvasHeight*n.sy|0;const s=n.scaled?[n.sx,0,0,n.sy,0,0]:null;return{ctx:i,canvas:t,transform:s}}_convertCanvasToImage(e){if(this.renderingState!==g.RenderingStates.FINISHED){throw new Error("_convertCanvasToImage: Rendering has not finished.")}const t=this._reduceImage(e);const i=document.createElement("img");i.className="thumbnailImage";this._thumbPageCanvas.then(e=>{i.setAttribute("aria-label",e)});i.style.width=this.canvasWidth+"px";i.style.height=this.canvasHeight+"px";i.src=t.toDataURL();this.image=i;this.div.setAttribute("data-loaded",true);this.ring.append(i);t.width=0;t.height=0}draw(){if(this.renderingState!==g.RenderingStates.INITIAL){console.error("Must be in new state before drawing");return Promise.resolve()}const{pdfPage:e}=this;if(!e){this.renderingState=g.RenderingStates.FINISHED;return Promise.reject(new Error("pdfPage is not loaded"))}this.renderingState=g.RenderingStates.RUNNING;const t=async(e=null)=>{if(l===this.renderTask){this.renderTask=null}if(e instanceof c.RenderingCancelledException){return}this.renderingState=g.RenderingStates.FINISHED;this._convertCanvasToImage(n);if(e){throw e}};const{ctx:i,canvas:n,transform:s}=this._getPageDrawContext(h);const r=this.viewport.clone({scale:h*this.scale});const a=e=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=g.RenderingStates.PAUSED;this.resume=()=>{this.renderingState=g.RenderingStates.RUNNING;e()};return}e()};const o={canvasContext:i,transform:s,viewport:r,optionalContentConfigPromise:this._optionalContentConfigPromise,pageColors:this.pageColors};const l=this.renderTask=e.render(o);l.onContinue=a;const d=l.promise.then(function(){return t(null)},function(e){return t(e)});d.finally(()=>{n.width=0;n.height=0;const e=this.linkService.isPageCached(this.id);if(!e){this.pdfPage?.cleanup()}});return d}setImage(e){if(this.renderingState!==g.RenderingStates.INITIAL){return}const{thumbnailCanvas:t,pdfPage:i,scale:n}=e;if(!t){return}if(!this.pdfPage){this.setPdfPage(i)}if(n<this.scale){return}this.renderingState=g.RenderingStates.FINISHED;this._convertCanvasToImage(t)}_reduceImage(e){const{ctx:t,canvas:i}=this._getPageDrawContext();if(e.width<=2*i.width){t.drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height);return i}let n=i.width<<o;let s=i.height<<o;const[r,a]=l.getCanvas(n,s);while(n>e.width||s>e.height){n>>=1;s>>=1}a.drawImage(e,0,0,e.width,e.height,0,0,n,s);while(n>2*i.width){a.drawImage(r,0,0,n,s,0,0,n>>1,s>>1);n>>=1;s>>=1}t.drawImage(r,0,0,n,s,0,0,i.width,i.height);return i}get _thumbPageTitle(){return this.l10n.get("thumb_page_title",{page:this.pageLabel??this.id})}get _thumbPageCanvas(){return this.l10n.get("thumb_page_canvas",{page:this.pageLabel??this.id})}setPageLabel(e){this.pageLabel=typeof e==="string"?e:null;this._thumbPageTitle.then(e=>{this.anchor.title=e});if(this.renderingState!==g.RenderingStates.FINISHED){return}this._thumbPageCanvas.then(e=>{this.image?.setAttribute("aria-label",e)})}}t.PDFThumbnailView=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFViewer=t.PDFSinglePageViewer=void 0;var n=i(1);var s=i(29);class r extends s.BaseViewer{}t.PDFViewer=r;class a extends s.BaseViewer{_resetView(){super._resetView();this._scrollMode=n.ScrollMode.PAGE;this._spreadMode=n.SpreadMode.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}t.PDFSinglePageViewer=a},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PagesCountLimit=t.PDFPageViewBuffer=t.BaseViewer=void 0;var b=i(5);var y=i(1);var a=i(30);var u=i(32);var p=i(31);var _=i(33);var n=i(22);var s=i(3);var r=i(35);var o=i(36);var l=i(37);var d=i(38);const c=10;const h="enablePermissions";const w={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};t.PagesCountLimit=w;function P(e){return Object.values(b.AnnotationEditorType).includes(e)&&e!==b.AnnotationEditorType.DISABLE}class f{#buf=new Set;#size=0;constructor(e){this.#size=e}push(e){const t=this.#buf;if(t.has(e)){t.delete(e)}t.add(e);if(t.size>this.#size){this.#destroyFirstView()}}resize(e,t=null){this.#size=e;const i=this.#buf;if(t){const n=i.size;let e=1;for(const s of i){if(t.has(s.id)){i.delete(s);i.add(s)}if(++e>n){break}}}while(i.size>this.#size){this.#destroyFirstView()}}has(e){return this.#buf.has(e)}[Symbol.iterator](){return this.#buf.keys()}#destroyFirstView(){const e=this.#buf.keys().next().value;e?.destroy();this.#buf.delete(e)}}t.PDFPageViewBuffer=f;class g{#buffer=null;#annotationEditorMode=b.AnnotationEditorType.DISABLE;#annotationEditorUIManager=null;#annotationMode=b.AnnotationMode.ENABLE_FORMS;#enablePermissions=false;#previousContainerHeight=0;#scrollModePageState=null;#onVisibilityChange=null;constructor(e){if(this.constructor===g){throw new Error("Cannot initialize BaseViewer.")}const t="2.16.105";if(b.version!==t){throw new Error(`The API version "${b.version}" does not match the Viewer version "${t}".`)}this.container=e.container;this.viewer=e.viewer||e.container.firstElementChild;if(!(this.container?.tagName.toUpperCase()==="DIV"&&this.viewer?.tagName.toUpperCase()==="DIV")){throw new Error("Invalid `container` and/or `viewer` option.")}if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute"){throw new Error("The `container` must be absolutely positioned.")}this.eventBus=e.eventBus;this.linkService=e.linkService||new s.SimpleLinkService;this.downloadManager=e.downloadManager||null;this.findController=e.findController||null;this._scriptingManager=e.scriptingManager||null;this.removePageBorders=e.removePageBorders||false;this.textLayerMode=e.textLayerMode??y.TextLayerMode.ENABLE;this.#annotationMode=e.annotationMode??b.AnnotationMode.ENABLE_FORMS;this.#annotationEditorMode=e.annotationEditorMode??b.AnnotationEditorType.DISABLE;this.imageResourcesPath=e.imageResourcesPath||"";this.enablePrintAutoRotate=e.enablePrintAutoRotate||false;this.renderer=e.renderer||y.RendererType.CANVAS;this.useOnlyCssZoom=e.useOnlyCssZoom||false;this.maxCanvasPixels=e.maxCanvasPixels;this.l10n=e.l10n||p.NullL10n;this.#enablePermissions=e.enablePermissions||false;this.pageColors=e.pageColors||null;if(this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))){if(this.pageColors.background||this.pageColors.foreground){console.warn("BaseViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used.")}this.pageColors=null}this.defaultRenderingQueue=!e.renderingQueue;if(this.defaultRenderingQueue){this.renderingQueue=new n.PDFRenderingQueue;this.renderingQueue.setViewer(this)}else{this.renderingQueue=e.renderingQueue}this.scroll=(0,y.watchScroll)(this.container,this._scrollUpdate.bind(this));this.presentationModeState=y.PresentationModeState.UNKNOWN;this._onBeforeDraw=this._onAfterDraw=null;this._resetView();if(this.removePageBorders){this.viewer.classList.add("removePageBorders")}this.updateContainerHeightCss()}get pagesCount(){return this._pages.length}getPageView(e){return this._pages[e]}get pageViewsReady(){if(!this._pagesCapability.settled){return false}return this._pages.every(function(e){return e?.pdfPage})}get renderForms(){return this.#annotationMode===b.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(e){if(!Number.isInteger(e)){throw new Error("Invalid page number.")}if(!this.pdfDocument){return}if(!this._setCurrentPageNumber(e,true)){console.error(`currentPageNumber: "${e}" is not a valid page.`)}}_setCurrentPageNumber(e,t=false){if(this._currentPageNumber===e){if(t){this.#resetCurrentPageView()}return true}if(!(0<e&&e<=this.pagesCount)){return false}const i=this._currentPageNumber;this._currentPageNumber=e;this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:this._pageLabels?.[e-1]??null,previous:i});if(t){this.#resetCurrentPageView()}return true}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(e){if(!this.pdfDocument){return}let t=e|0;if(this._pageLabels){const i=this._pageLabels.indexOf(e);if(i>=0){t=i+1}}if(!this._setCurrentPageNumber(t,true)){console.error(`currentPageLabel: "${e}" is not a valid page.`)}}get currentScale(){return this._currentScale!==y.UNKNOWN_SCALE?this._currentScale:y.DEFAULT_SCALE}set currentScale(e){if(isNaN(e)){throw new Error("Invalid numeric scale.")}if(!this.pdfDocument){return}this._setScale(e,false)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(e){if(!this.pdfDocument){return}this._setScale(e,false)}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!(0,y.isValidRotation)(e)){throw new Error("Invalid pages rotation angle.")}if(!this.pdfDocument){return}e%=360;if(e<0){e+=360}if(this._pagesRotation===e){return}this._pagesRotation=e;const t=this._currentPageNumber;const i={rotation:e};for(const n of this._pages){n.update(i)}if(this._currentScaleValue){this._setScale(this._currentScaleValue,true)}this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:t});if(this.defaultRenderingQueue){this.update()}}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}#initializePermissions(e){const t={annotationEditorMode:this.#annotationEditorMode,annotationMode:this.#annotationMode,textLayerMode:this.textLayerMode};if(!e){return t}if(!e.includes(b.PermissionFlag.COPY)){this.viewer.classList.add(h)}if(!e.includes(b.PermissionFlag.MODIFY_CONTENTS)){t.annotationEditorMode=b.AnnotationEditorType.DISABLE}if(!e.includes(b.PermissionFlag.MODIFY_ANNOTATIONS)&&!e.includes(b.PermissionFlag.FILL_INTERACTIVE_FORMS)&&this.#annotationMode===b.AnnotationMode.ENABLE_FORMS){t.annotationMode=b.AnnotationMode.ENABLE}return t}#onePageRenderedOrForceFetch(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0){return Promise.resolve()}const e=new Promise(e=>{this.#onVisibilityChange=()=>{if(document.visibilityState!=="hidden"){return}e();document.removeEventListener("visibilitychange",this.#onVisibilityChange);this.#onVisibilityChange=null};document.addEventListener("visibilitychange",this.#onVisibilityChange)});return Promise.race([this._onePageRenderedCapability.promise,e])}setDocument(f){if(this.pdfDocument){this.eventBus.dispatch("pagesdestroy",{source:this});this._cancelRendering();this._resetView();if(this.findController){this.findController.setDocument(null)}if(this._scriptingManager){this._scriptingManager.setDocument(null)}if(this.#annotationEditorUIManager){this.#annotationEditorUIManager.destroy();this.#annotationEditorUIManager=null}}this.pdfDocument=f;if(!f){return}const g=f.isPureXfa;const m=f.numPages;const e=f.getPage(1);const v=f.getOptionalContentConfig();const t=this.#enablePermissions?f.getPermissions():Promise.resolve();if(m>w.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const i=this._scrollMode=y.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:i})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:m})},()=>{});this._onBeforeDraw=e=>{const t=this._pages[e.pageNumber-1];if(!t){return}this.#buffer.push(t)};this.eventBus._on("pagerender",this._onBeforeDraw);this._onAfterDraw=e=>{if(e.cssTransform||this._onePageRenderedCapability.settled){return}this._onePageRenderedCapability.resolve({timestamp:e.timestamp});this.eventBus._off("pagerendered",this._onAfterDraw);this._onAfterDraw=null;if(this.#onVisibilityChange){document.removeEventListener("visibilitychange",this.#onVisibilityChange);this.#onVisibilityChange=null}};this.eventBus._on("pagerendered",this._onAfterDraw);Promise.all([e,t]).then(([e,t])=>{if(f!==this.pdfDocument){return}this._firstPageCapability.resolve(e);this._optionalContentConfigPromise=v;const{annotationEditorMode:i,annotationMode:n,textLayerMode:s}=this.#initializePermissions(t);if(i!==b.AnnotationEditorType.DISABLE){const e=i;if(g){console.warn("Warning: XFA-editing is not implemented.")}else if(P(e)){this.#annotationEditorUIManager=new b.AnnotationEditorUIManager(this.container,this.eventBus);if(e!==b.AnnotationEditorType.NONE){this.#annotationEditorUIManager.updateMode(e)}}else{console.error(`Invalid AnnotationEditor mode: ${e}`)}}const r=this._scrollMode===y.ScrollMode.PAGE?null:this.viewer;const a=this.currentScale;const o=e.getViewport({scale:a*b.PixelsPerInch.PDF_TO_CSS_UNITS});const l=s!==y.TextLayerMode.DISABLE&&!g?this:null;const d=n!==b.AnnotationMode.DISABLE?this:null;const c=g?this:null;const h=this.#annotationEditorUIManager?this:null;for(let e=1;e<=m;++e){const p=new _.PDFPageView({container:r,eventBus:this.eventBus,id:e,scale:a,defaultViewport:o.clone(),optionalContentConfigPromise:v,renderingQueue:this.renderingQueue,textLayerFactory:l,textLayerMode:s,annotationLayerFactory:d,annotationMode:n,xfaLayerFactory:c,annotationEditorLayerFactory:h,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(p)}const u=this._pages[0];if(u){u.setPdfPage(e);this.linkService.cachePageRef(1,e.ref)}if(this._scrollMode===y.ScrollMode.PAGE){this.#ensurePageViewVisible()}else if(this._spreadMode!==y.SpreadMode.NONE){this._updateSpreadMode()}this.#onePageRenderedOrForceFetch().then(async()=>{if(this.findController){this.findController.setDocument(f)}if(this._scriptingManager){this._scriptingManager.setDocument(f)}if(this.#annotationEditorUIManager){this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:this.#annotationEditorMode})}if(f.loadingParams.disableAutoFetch||m>w.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let n=m-1;if(n<=0){this._pagesCapability.resolve();return}for(let i=2;i<=m;++i){const e=f.getPage(i).then(e=>{const t=this._pages[i-1];if(!t.pdfPage){t.setPdfPage(e)}this.linkService.cachePageRef(i,e.ref);if(--n===0){this._pagesCapability.resolve()}},e=>{console.error(`Unable to get page ${i} to initialize viewer`,e);if(--n===0){this._pagesCapability.resolve()}});if(i%w.PAUSE_EAGER_PAGE_INIT===0){await e}}});this.eventBus.dispatch("pagesinit",{source:this});f.getMetadata().then(({info:e})=>{if(f!==this.pdfDocument){return}if(e.Language){this.viewer.lang=e.Language}});if(this.defaultRenderingQueue){this.update()}}).catch(e=>{console.error("Unable to initialize viewer",e);this._pagesCapability.reject(e)})}setPageLabels(e){if(!this.pdfDocument){return}if(!e){this._pageLabels=null}else if(!(Array.isArray(e)&&this.pdfDocument.numPages===e.length)){this._pageLabels=null;console.error(`setPageLabels: Invalid page labels.`)}else{this._pageLabels=e}for(let e=0,t=this._pages.length;e<t;e++){this._pages[e].setPageLabel(this._pageLabels?.[e]??null)}}_resetView(){this._pages=[];this._currentPageNumber=1;this._currentScale=y.UNKNOWN_SCALE;this._currentScaleValue=null;this._pageLabels=null;this.#buffer=new f(c);this._location=null;this._pagesRotation=0;this._optionalContentConfigPromise=null;this._firstPageCapability=(0,b.createPromiseCapability)();this._onePageRenderedCapability=(0,b.createPromiseCapability)();this._pagesCapability=(0,b.createPromiseCapability)();this._scrollMode=y.ScrollMode.VERTICAL;this._previousScrollMode=y.ScrollMode.UNKNOWN;this._spreadMode=y.SpreadMode.NONE;this.#scrollModePageState={previousPageNumber:1,scrollDown:true,pages:[]};if(this._onBeforeDraw){this.eventBus._off("pagerender",this._onBeforeDraw);this._onBeforeDraw=null}if(this._onAfterDraw){this.eventBus._off("pagerendered",this._onAfterDraw);this._onAfterDraw=null}if(this.#onVisibilityChange){document.removeEventListener("visibilitychange",this.#onVisibilityChange);this.#onVisibilityChange=null}this.viewer.textContent="";this._updateScrollMode();this.viewer.removeAttribute("lang");this.viewer.classList.remove(h)}#ensurePageViewVisible(){if(this._scrollMode!==y.ScrollMode.PAGE){throw new Error("#ensurePageViewVisible: Invalid scrollMode value.")}const e=this._currentPageNumber,t=this.#scrollModePageState,i=this.viewer;i.textContent="";t.pages.length=0;if(this._spreadMode===y.SpreadMode.NONE&&!this.isInPresentationMode){const n=this._pages[e-1];i.append(n.div);t.pages.push(n)}else{const s=new Set,r=this._spreadMode-1;if(r===-1){s.add(e-1)}else if(e%2!==r){s.add(e-1);s.add(e)}else{s.add(e-2);s.add(e-1)}const a=document.createElement("div");a.className="spread";if(this.isInPresentationMode){const o=document.createElement("div");o.className="dummyPage";a.append(o)}for(const l of s){const n=this._pages[l];if(!n){continue}a.append(n.div);t.pages.push(n)}i.append(a)}t.scrollDown=e>=t.previousPageNumber;t.previousPageNumber=e}_scrollUpdate(){if(this.pagesCount===0){return}this.update()}#scrollIntoView(e,t=null){const{div:i,id:n}=e;if(this._scrollMode===y.ScrollMode.PAGE){this._setCurrentPageNumber(n);this.#ensurePageViewVisible();this.update()}if(!t&&!this.isInPresentationMode){const s=i.offsetLeft+i.clientLeft,r=s+i.clientWidth;const{scrollLeft:a,clientWidth:o}=this.container;if(this._scrollMode===y.ScrollMode.HORIZONTAL||s<a||r>a+o){t={left:0,top:0}}}(0,y.scrollIntoView)(i,t)}#isSameScale(e){return e===this._currentScale||Math.abs(e-this._currentScale)<1e-15}_setScaleUpdatePages(e,t,i=false,n=false){this._currentScaleValue=t.toString();if(this.#isSameScale(e)){if(n){this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:t})}return}y.docStyle.setProperty("--scale-factor",e*b.PixelsPerInch.PDF_TO_CSS_UNITS);const s={scale:e};for(const r of this._pages){r.update(s)}this._currentScale=e;if(!i){let e=this._currentPageNumber,t;if(this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)){e=this._location.pageNumber;t=[null,{name:"XYZ"},this._location.left,this._location.top,null]}this.scrollPageIntoView({pageNumber:e,destArray:t,allowNegativeOffset:true})}this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:n?t:undefined});if(this.defaultRenderingQueue){this.update()}this.updateContainerHeightCss()}get _pageWidthScaleFactor(){if(this._spreadMode!==y.SpreadMode.NONE&&this._scrollMode!==y.ScrollMode.HORIZONTAL){return 2}return 1}_setScale(i,n=false){let s=parseFloat(i);if(s>0){this._setScaleUpdatePages(s,i,n,false)}else{const r=this._pages[this._currentPageNumber-1];if(!r){return}let e=y.SCROLLBAR_PADDING,t=y.VERTICAL_PADDING;if(this.isInPresentationMode){e=t=4}else if(this.removePageBorders){e=t=0}else if(this._scrollMode===y.ScrollMode.HORIZONTAL){[e,t]=[t,e]}const a=(this.container.clientWidth-e)/r.width*r.scale/this._pageWidthScaleFactor;const o=(this.container.clientHeight-t)/r.height*r.scale;switch(i){case"page-actual":s=1;break;case"page-width":s=a;break;case"page-height":s=o;break;case"page-fit":s=Math.min(a,o);break;case"auto":const l=(0,y.isPortraitOrientation)(r)?a:Math.min(o,a);s=Math.min(y.MAX_AUTO_SCALE,l);break;default:console.error(`_setScale: "${i}" is an unknown zoom value.`);return}this._setScaleUpdatePages(s,i,n,true)}}#resetCurrentPageView(){const e=this._pages[this._currentPageNumber-1];if(this.isInPresentationMode){this._setScale(this._currentScaleValue,true)}this.#scrollIntoView(e)}pageLabelToPageNumber(e){if(!this._pageLabels){return null}const t=this._pageLabels.indexOf(e);if(t<0){return null}return t+1}scrollPageIntoView({pageNumber:e,destArray:t=null,allowNegativeOffset:i=false,ignoreDestinationZoom:n=false}){if(!this.pdfDocument){return}const s=Number.isInteger(e)&&this._pages[e-1];if(!s){console.error(`scrollPageIntoView: "${e}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!t){this._setCurrentPageNumber(e,true);return}let r=0,a=0;let o=0,l=0,d,c;const h=s.rotation%180!==0;const u=(h?s.height:s.width)/s.scale/b.PixelsPerInch.PDF_TO_CSS_UNITS;const p=(h?s.width:s.height)/s.scale/b.PixelsPerInch.PDF_TO_CSS_UNITS;let f=0;switch(t[1].name){case"XYZ":r=t[2];a=t[3];f=t[4];r=r!==null?r:0;a=a!==null?a:p;break;case"Fit":case"FitB":f="page-fit";break;case"FitH":case"FitBH":a=t[2];f="page-width";if(a===null&&this._location){r=this._location.left;a=this._location.top}else if(typeof a!=="number"||a<0){a=p}break;case"FitV":case"FitBV":r=t[2];o=u;l=p;f="page-height";break;case"FitR":r=t[2];a=t[3];o=t[4]-r;l=t[5]-a;const _=this.removePageBorders?0:y.SCROLLBAR_PADDING;const w=this.removePageBorders?0:y.VERTICAL_PADDING;d=(this.container.clientWidth-_)/o/b.PixelsPerInch.PDF_TO_CSS_UNITS;c=(this.container.clientHeight-w)/l/b.PixelsPerInch.PDF_TO_CSS_UNITS;f=Math.min(Math.abs(d),Math.abs(c));break;default:console.error(`scrollPageIntoView: "${t[1].name}" is not a valid destination type.`);return}if(!n){if(f&&f!==this._currentScale){this.currentScaleValue=f}else if(this._currentScale===y.UNKNOWN_SCALE){this.currentScaleValue=y.DEFAULT_SCALE_VALUE}}if(f==="page-fit"&&!t[4]){this.#scrollIntoView(s);return}const g=[s.viewport.convertToViewportPoint(r,a),s.viewport.convertToViewportPoint(r+o,a+l)];let m=Math.min(g[0][0],g[1][0]);let v=Math.min(g[0][1],g[1][1]);if(!i){m=Math.max(m,0);v=Math.max(v,0)}this.#scrollIntoView(s,{left:m,top:v})}_updateLocation(e){const t=this._currentScale;const i=this._currentScaleValue;const n=parseFloat(i)===t?Math.round(t*1e4)/100:i;const s=e.id;const r=this._pages[s-1];const a=this.container;const o=r.getPagePoint(a.scrollLeft-e.x,a.scrollTop-e.y);const l=Math.round(o[0]);const d=Math.round(o[1]);let c=`#page=${s}`;if(!this.isInPresentationMode){c+=`&zoom=${n},${l},${d}`}this._location={pageNumber:s,scale:n,top:d,left:l,rotation:this._pagesRotation,pdfOpenParams:c}}update(){const e=this._getVisiblePages();const t=e.views,i=t.length;if(i===0){return}const n=Math.max(c,2*i+1);this.#buffer.resize(n,e.ids);this.renderingQueue.renderHighestPriority(e);const s=this._spreadMode===y.SpreadMode.NONE&&(this._scrollMode===y.ScrollMode.PAGE||this._scrollMode===y.ScrollMode.VERTICAL);const r=this._currentPageNumber;let a=false;for(const o of t){if(o.percent<100){break}if(o.id===r&&s){a=true;break}}this._setCurrentPageNumber(a?r:t[0].id);this._updateLocation(e.first);this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(e){return this.container.contains(e)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===y.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===y.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?false:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?false:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const e=this._scrollMode===y.ScrollMode.PAGE?this.#scrollModePageState.pages:this._pages,t=this._scrollMode===y.ScrollMode.HORIZONTAL,i=t&&this._isContainerRtl;return(0,y.getVisibleElements)({scrollEl:this.container,views:e,sortByVisibility:true,horizontal:t,rtl:i})}isPageVisible(e){if(!this.pdfDocument){return false}if(!(Number.isInteger(e)&&e>0&&e<=this.pagesCount)){console.error(`isPageVisible: "${e}" is not a valid page.`);return false}return this._getVisiblePages().ids.has(e)}isPageCached(e){if(!this.pdfDocument){return false}if(!(Number.isInteger(e)&&e>0&&e<=this.pagesCount)){console.error(`isPageCached: "${e}" is not a valid page.`);return false}const t=this._pages[e-1];return this.#buffer.has(t)}cleanup(){for(const e of this._pages){if(e.renderingState!==y.RenderingStates.FINISHED){e.reset()}}}_cancelRendering(){for(const e of this._pages){e.cancelRendering()}}async#ensurePdfPageLoaded(e){if(e.pdfPage){return e.pdfPage}try{const t=await this.pdfDocument.getPage(e.id);if(!e.pdfPage){e.setPdfPage(t)}if(!this.linkService._cachedPageNumber?.(t.ref)){this.linkService.cachePageRef(e.id,t.ref)}return t}catch(e){console.error("Unable to get page for page view",e);return null}}#getScrollAhead(e){if(e.first?.id===1){return true}else if(e.last?.id===this.pagesCount){return false}switch(this._scrollMode){case y.ScrollMode.PAGE:return this.#scrollModePageState.scrollDown;case y.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}#toggleLoadingIconSpinner(e){for(const t of e){const i=this._pages[t-1];i?.toggleLoadingIconSpinner(true)}for(const i of this.#buffer){if(e.has(i.id)){continue}i.toggleLoadingIconSpinner(false)}}forceRendering(e){const t=e||this._getVisiblePages();const i=this.#getScrollAhead(t);const n=this._spreadMode!==y.SpreadMode.NONE&&this._scrollMode!==y.ScrollMode.HORIZONTAL;const s=this.renderingQueue.getHighestPriority(t,this._pages,i,n);this.#toggleLoadingIconSpinner(t.ids);if(s){this.#ensurePdfPageLoaded(s).then(()=>{this.renderingQueue.renderView(s)});return true}return false}createTextLayerBuilder({textLayerDiv:e,pageIndex:t,viewport:i,enhanceTextSelection:n=false,eventBus:s,highlighter:r,accessibilityManager:a=null}){return new l.TextLayerBuilder({textLayerDiv:e,eventBus:s,pageIndex:t,viewport:i,enhanceTextSelection:this.isInPresentationMode?false:n,highlighter:r,accessibilityManager:a})}createTextHighlighter({pageIndex:e,eventBus:t}){return new o.TextHighlighter({eventBus:t,pageIndex:e,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder({pageDiv:e,pdfPage:t,annotationStorage:i=this.pdfDocument?.annotationStorage,imageResourcesPath:n="",renderForms:s=true,l10n:r=p.NullL10n,enableScripting:a=this.enableScripting,hasJSActionsPromise:o=this.pdfDocument?.hasJSActions(),mouseState:l=this._scriptingManager?.mouseState,fieldObjectsPromise:d=this.pdfDocument?.getFieldObjects(),annotationCanvasMap:c=null,accessibilityManager:h=null}){return new u.AnnotationLayerBuilder({pageDiv:e,pdfPage:t,annotationStorage:i,imageResourcesPath:n,renderForms:s,linkService:this.linkService,downloadManager:this.downloadManager,l10n:r,enableScripting:a,hasJSActionsPromise:o,mouseState:l,fieldObjectsPromise:d,annotationCanvasMap:c,accessibilityManager:h})}createAnnotationEditorLayerBuilder({uiManager:e=this.#annotationEditorUIManager,pageDiv:t,pdfPage:i,accessibilityManager:n=null,l10n:s,annotationStorage:r=this.pdfDocument?.annotationStorage}){return new a.AnnotationEditorLayerBuilder({uiManager:e,pageDiv:t,pdfPage:i,annotationStorage:r,accessibilityManager:n,l10n:s})}createXfaLayerBuilder({pageDiv:e,pdfPage:t,annotationStorage:i=this.pdfDocument?.annotationStorage}){return new d.XfaLayerBuilder({pageDiv:e,pdfPage:t,annotationStorage:i,linkService:this.linkService})}createStructTreeLayerBuilder({pdfPage:e}){return new r.StructTreeLayerBuilder({pdfPage:e})}get hasEqualPageSizes(){const i=this._pages[0];for(let e=1,t=this._pages.length;e<t;++e){const n=this._pages[e];if(n.width!==i.width||n.height!==i.height){return false}}return true}getPagesOverview(){return this._pages.map(e=>{const t=e.pdfPage.getViewport({scale:1});if(!this.enablePrintAutoRotate||(0,y.isPortraitOrientation)(t)){return{width:t.width,height:t.height,rotation:t.rotation}}return{width:t.height,height:t.width,rotation:(t.rotation-90)%360}})}get optionalContentConfigPromise(){if(!this.pdfDocument){return Promise.resolve(null)}if(!this._optionalContentConfigPromise){console.error("optionalContentConfigPromise: Not initialized yet.");return this.pdfDocument.getOptionalContentConfig()}return this._optionalContentConfigPromise}set optionalContentConfigPromise(e){if(!(e instanceof Promise)){throw new Error(`Invalid optionalContentConfigPromise: ${e}`)}if(!this.pdfDocument){return}if(!this._optionalContentConfigPromise){return}this._optionalContentConfigPromise=e;const t={optionalContentConfigPromise:e};for(const i of this._pages){i.update(t)}this.update();this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:e})}get scrollMode(){return this._scrollMode}set scrollMode(e){if(this._scrollMode===e){return}if(!(0,y.isValidScrollMode)(e)){throw new Error(`Invalid scroll mode: ${e}`)}if(this.pagesCount>w.FORCE_SCROLL_MODE_PAGE){return}this._previousScrollMode=this._scrollMode;this._scrollMode=e;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e});this._updateScrollMode(this._currentPageNumber)}_updateScrollMode(e=null){const t=this._scrollMode,i=this.viewer;i.classList.toggle("scrollHorizontal",t===y.ScrollMode.HORIZONTAL);i.classList.toggle("scrollWrapped",t===y.ScrollMode.WRAPPED);if(!this.pdfDocument||!e){return}if(t===y.ScrollMode.PAGE){this.#ensurePageViewVisible()}else if(this._previousScrollMode===y.ScrollMode.PAGE){this._updateSpreadMode()}if(this._currentScaleValue&&isNaN(this._currentScaleValue)){this._setScale(this._currentScaleValue,true)}this._setCurrentPageNumber(e,true);this.update()}get spreadMode(){return this._spreadMode}set spreadMode(e){if(this._spreadMode===e){return}if(!(0,y.isValidSpreadMode)(e)){throw new Error(`Invalid spread mode: ${e}`)}this._spreadMode=e;this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e});this._updateSpreadMode(this._currentPageNumber)}_updateSpreadMode(e=null){if(!this.pdfDocument){return}const n=this.viewer,s=this._pages;if(this._scrollMode===y.ScrollMode.PAGE){this.#ensurePageViewVisible()}else{n.textContent="";if(this._spreadMode===y.SpreadMode.NONE){for(const t of this._pages){n.append(t.div)}}else{const r=this._spreadMode-1;let i=null;for(let e=0,t=s.length;e<t;++e){if(i===null){i=document.createElement("div");i.className="spread";n.append(i)}else if(e%2===r){i=i.cloneNode(false);n.append(i)}i.append(s[e].div)}}}if(!e){return}if(this._currentScaleValue&&isNaN(this._currentScaleValue)){this._setScale(this._currentScaleValue,true)}this._setCurrentPageNumber(e,true);this.update()}_getPageAdvance(i,e=false){switch(this._scrollMode){case y.ScrollMode.WRAPPED:{const{views:t}=this._getVisiblePages(),n=new Map;for(const{id:s,y:r,percent:a,widthPercent:o}of t){if(a===0||o<100){continue}let e=n.get(r);if(!e){n.set(r,e||=[])}e.push(s)}for(const l of n.values()){const d=l.indexOf(i);if(d===-1){continue}const c=l.length;if(c===1){break}if(e){for(let e=d-1,t=0;e>=t;e--){const h=l[e],u=l[e+1]-1;if(h<u){return i-u}}}else{for(let e=d+1,t=c;e<t;e++){const h=l[e],u=l[e-1]+1;if(h>u){return u-i}}}if(e){const p=l[0];if(p<i){return i-p+1}}else{const f=l[c-1];if(f>i){return f-i+1}}break}break}case y.ScrollMode.HORIZONTAL:{break}case y.ScrollMode.PAGE:case y.ScrollMode.VERTICAL:{if(this._spreadMode===y.SpreadMode.NONE){break}const g=this._spreadMode-1;if(e&&i%2!==g){break}else if(!e&&i%2===g){break}const{views:t}=this._getVisiblePages(),u=e?i-1:i+1;for(const{id:s,percent:a,widthPercent:o}of t){if(s!==u){continue}if(a>0&&o===100){return 2}break}break}}return 1}nextPage(){const e=this._currentPageNumber,t=this.pagesCount;if(e>=t){return false}const i=this._getPageAdvance(e,false)||1;this.currentPageNumber=Math.min(e+i,t);return true}previousPage(){const e=this._currentPageNumber;if(e<=1){return false}const t=this._getPageAdvance(e,true)||1;this.currentPageNumber=Math.max(e-t,1);return true}increaseScale(e=1){let t=this._currentScale;do{t=(t*y.DEFAULT_SCALE_DELTA).toFixed(2);t=Math.ceil(t*10)/10;t=Math.min(y.MAX_SCALE,t)}while(--e>0&&t<y.MAX_SCALE);this.currentScaleValue=t}decreaseScale(e=1){let t=this._currentScale;do{t=(t/y.DEFAULT_SCALE_DELTA).toFixed(2);t=Math.floor(t*10)/10;t=Math.max(y.MIN_SCALE,t)}while(--e>0&&t>y.MIN_SCALE);this.currentScaleValue=t}updateContainerHeightCss(){const e=this.container.clientHeight;if(e!==this.#previousContainerHeight){this.#previousContainerHeight=e;y.docStyle.setProperty("--viewer-container-height",`${e}px`)}}get annotationEditorMode(){return this.#annotationEditorUIManager?this.#annotationEditorMode:b.AnnotationEditorType.DISABLE}set annotationEditorMode(e){if(!this.#annotationEditorUIManager){throw new Error(`The AnnotationEditor is not enabled.`)}if(this.#annotationEditorMode===e){return}if(!P(e)){throw new Error(`Invalid AnnotationEditor mode: ${e}`)}if(!this.pdfDocument){return}this.#annotationEditorMode=e;this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:e});this.#annotationEditorUIManager.updateMode(e)}set annotationEditorParams({type:e,value:t}){if(!this.#annotationEditorUIManager){throw new Error(`The AnnotationEditor is not enabled.`)}this.#annotationEditorUIManager.updateParams(e,t)}refresh(){if(!this.pdfDocument){return}const e={};for(const t of this._pages){t.update(e)}this.update()}}t.BaseViewer=g},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.AnnotationEditorLayerBuilder=void 0;var s=i(5);var n=i(31);class r{#uiManager;constructor(e){this.pageDiv=e.pageDiv;this.pdfPage=e.pdfPage;this.annotationStorage=e.annotationStorage||null;this.accessibilityManager=e.accessibilityManager;this.l10n=e.l10n||n.NullL10n;this.annotationEditorLayer=null;this.div=null;this._cancelled=false;this.#uiManager=e.uiManager}async render(e,t="display"){if(t!=="display"){return}if(this._cancelled){return}const i=e.clone({dontFlip:true});if(this.div){this.annotationEditorLayer.update({viewport:i});this.show();return}this.div=document.createElement("div");this.div.className="annotationEditorLayer";this.div.tabIndex=0;this.pageDiv.append(this.div);this.annotationEditorLayer=new s.AnnotationEditorLayer({uiManager:this.#uiManager,div:this.div,annotationStorage:this.annotationStorage,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage._pageIndex,l10n:this.l10n,viewport:i});const n={viewport:i,div:this.div,annotations:null,intent:t};this.annotationEditorLayer.render(n)}cancel(){this._cancelled=true;this.destroy()}hide(){if(!this.div){return}this.div.hidden=true}show(){if(!this.div){return}this.div.hidden=false}destroy(){if(!this.div){return}this.pageDiv=null;this.annotationEditorLayer.destroy();this.div.remove()}}t.AnnotationEditorLayerBuilder=r},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.NullL10n=void 0;t.fixupLangCode=r;t.getL10nFallback=n;const i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text_default_content:"Enter text",editor_free_text_aria_label:"FreeText Editor",editor_ink_aria_label:"Ink Editor",editor_ink_canvas_aria_label:"User-created image"};function n(e,t){switch(e){case"find_match_count":e=`find_match_count[${t.total===1?"one":"other"}]`;break;case"find_match_count_limit":e=`find_match_count_limit[${t.limit===1?"one":"other"}]`;break}return i[e]||""}const s={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function r(e){return s[e?.toLowerCase()]||e}function a(e,i){if(!i){return e}return e.replace(/\{\{\s*(\w+)\s*\}\}/g,(e,t)=>{return t in i?i[t]:"{{"+t+"}}"})}const o={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(e,t=null,i=n(e,t)){return a(i,t)},async translate(e){}};t.NullL10n=o},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.AnnotationLayerBuilder=void 0;var a=i(5);var f=i(31);class n{constructor({pageDiv:e,pdfPage:t,linkService:i,downloadManager:n,annotationStorage:s=null,imageResourcesPath:r="",renderForms:a=true,l10n:o=f.NullL10n,enableScripting:l=false,hasJSActionsPromise:d=null,fieldObjectsPromise:c=null,mouseState:h=null,annotationCanvasMap:u=null,accessibilityManager:p=null}){this.pageDiv=e;this.pdfPage=t;this.linkService=i;this.downloadManager=n;this.imageResourcesPath=r;this.renderForms=a;this.l10n=o;this.annotationStorage=s;this.enableScripting=l;this._hasJSActionsPromise=d;this._fieldObjectsPromise=c;this._mouseState=h;this._annotationCanvasMap=u;this._accessibilityManager=p;this.div=null;this._cancelled=false}async render(e,t="display"){const[i,n=false,s=null]=await Promise.all([this.pdfPage.getAnnotations({intent:t}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled||i.length===0){return}const r={viewport:e.clone({dontFlip:true}),div:this.div,annotations:i,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:n,fieldObjects:s,mouseState:this._mouseState,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager};if(this.div){a.AnnotationLayer.update(r)}else{this.div=document.createElement("div");this.div.className="annotationLayer";this.pageDiv.append(this.div);r.div=this.div;a.AnnotationLayer.render(r);this.l10n.translate(this.div)}}cancel(){this._cancelled=true}hide(){if(!this.div){return}this.div.hidden=true}}t.AnnotationLayerBuilder=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFPageView=void 0;var E=i(5);var S=i(1);var n=i(2);var r=i(31);var L=i(34);const a=n.compatibilityParams.maxCanvasPixels||16777216;class s{#annotationMode=E.AnnotationMode.ENABLE_FORMS;#useThumbnailCanvas={initialOptionalContent:true,regularAnnotations:true};constructor(e){const t=e.container;const i=e.defaultViewport;this.id=e.id;this.renderingId="page"+this.id;this.pdfPage=null;this.pageLabel=null;this.rotation=0;this.scale=e.scale||S.DEFAULT_SCALE;this.viewport=i;this.pdfPageRotate=i.rotation;this._optionalContentConfigPromise=e.optionalContentConfigPromise||null;this.hasRestrictedScaling=false;this.textLayerMode=e.textLayerMode??S.TextLayerMode.ENABLE;this.#annotationMode=e.annotationMode??E.AnnotationMode.ENABLE_FORMS;this.imageResourcesPath=e.imageResourcesPath||"";this.useOnlyCssZoom=e.useOnlyCssZoom||false;this.maxCanvasPixels=e.maxCanvasPixels||a;this.pageColors=e.pageColors||null;this.eventBus=e.eventBus;this.renderingQueue=e.renderingQueue;this.textLayerFactory=e.textLayerFactory;this.annotationLayerFactory=e.annotationLayerFactory;this.annotationEditorLayerFactory=e.annotationEditorLayerFactory;this.xfaLayerFactory=e.xfaLayerFactory;this.textHighlighter=e.textHighlighterFactory?.createTextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus});this.structTreeLayerFactory=e.structTreeLayerFactory;this.renderer=e.renderer||S.RendererType.CANVAS;this.l10n=e.l10n||r.NullL10n;this.paintTask=null;this.paintedViewportMap=new WeakMap;this.renderingState=S.RenderingStates.INITIAL;this.resume=null;this._renderError=null;this._isStandalone=!this.renderingQueue?.hasViewer();this._annotationCanvasMap=null;this.annotationLayer=null;this.annotationEditorLayer=null;this.textLayer=null;this.zoomLayer=null;this.xfaLayer=null;this.structTreeLayer=null;const n=document.createElement("div");n.className="page";n.style.width=Math.floor(this.viewport.width)+"px";n.style.height=Math.floor(this.viewport.height)+"px";n.setAttribute("data-page-number",this.id);n.setAttribute("role","region");this.l10n.get("page_landmark",{page:this.id}).then(e=>{n.setAttribute("aria-label",e)});this.div=n;t?.append(n);if(this._isStandalone){const{optionalContentConfigPromise:s}=e;if(s){s.then(e=>{if(s!==this._optionalContentConfigPromise){return}this.#useThumbnailCanvas.initialOptionalContent=e.hasInitialVisibility})}}}setPdfPage(e){this.pdfPage=e;this.pdfPageRotate=e.rotate;const t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:this.scale*E.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:t});this.reset()}destroy(){this.reset();if(this.pdfPage){this.pdfPage.cleanup()}}async _renderAnnotationLayer(){let t=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(e){console.error(`_renderAnnotationLayer: "${e}".`);t=e}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:t})}}async _renderAnnotationEditorLayer(){let t=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(e){console.error(`_renderAnnotationEditorLayer: "${e}".`);t=e}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:t})}}async _renderXfaLayer(){let t=null;try{const e=await this.xfaLayer.render(this.viewport,"display");if(this.textHighlighter){this._buildXfaTextContentItems(e.textDivs)}}catch(e){console.error(`_renderXfaLayer: "${e}".`);t=e}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:t})}}async _buildXfaTextContentItems(e){const t=await this.pdfPage.getTextContent();const i=[];for(const n of t.items){i.push(n.str)}this.textHighlighter.setTextMapping(e,i);this.textHighlighter.enable()}_resetZoomLayer(e=false){if(!this.zoomLayer){return}const t=this.zoomLayer.firstChild;this.paintedViewportMap.delete(t);t.width=0;t.height=0;if(e){this.zoomLayer.remove()}this.zoomLayer=null}reset({keepZoomLayer:e=false,keepAnnotationLayer:t=false,keepAnnotationEditorLayer:i=false,keepXfaLayer:n=false}={}){this.cancelRendering({keepAnnotationLayer:t,keepAnnotationEditorLayer:i,keepXfaLayer:n});this.renderingState=S.RenderingStates.INITIAL;const s=this.div;s.style.width=Math.floor(this.viewport.width)+"px";s.style.height=Math.floor(this.viewport.height)+"px";const r=s.childNodes,a=e&&this.zoomLayer||null,o=t&&this.annotationLayer?.div||null,l=i&&this.annotationEditorLayer?.div||null,d=n&&this.xfaLayer?.div||null;for(let e=r.length-1;e>=0;e--){const c=r[e];switch(c){case a:case o:case l:case d:continue}c.remove()}s.removeAttribute("data-loaded");if(o){this.annotationLayer.hide()}if(l){this.annotationEditorLayer.hide()}else{this.annotationEditorLayer?.destroy()}if(d){this.xfaLayer.hide()}if(!a){if(this.canvas){this.paintedViewportMap.delete(this.canvas);this.canvas.width=0;this.canvas.height=0;delete this.canvas}this._resetZoomLayer()}if(this.svg){this.paintedViewportMap.delete(this.svg);delete this.svg}this.loadingIconDiv=document.createElement("div");this.loadingIconDiv.className="loadingIcon notVisible";if(this._isStandalone){this.toggleLoadingIconSpinner(true)}this.loadingIconDiv.setAttribute("role","img");this.l10n.get("loading").then(e=>{this.loadingIconDiv?.setAttribute("aria-label",e)});s.append(this.loadingIconDiv)}update({scale:e=0,rotation:t=null,optionalContentConfigPromise:i=null}){this.scale=e||this.scale;if(typeof t==="number"){this.rotation=t}if(i instanceof Promise){this._optionalContentConfigPromise=i;i.then(e=>{if(i!==this._optionalContentConfigPromise){return}this.#useThumbnailCanvas.initialOptionalContent=e.hasInitialVisibility})}const n=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*E.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:n});if(this._isStandalone){S.docStyle.setProperty("--scale-factor",this.viewport.scale)}if(this.svg){this.cssTransform({target:this.svg,redrawAnnotationLayer:true,redrawAnnotationEditorLayer:true,redrawXfaLayer:true});this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:true,timestamp:performance.now(),error:this._renderError});return}let s=false;if(this.canvas&&this.maxCanvasPixels>0){const r=this.outputScale;if((Math.floor(this.viewport.width)*r.sx|0)*(Math.floor(this.viewport.height)*r.sy|0)>this.maxCanvasPixels){s=true}}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&s){this.cssTransform({target:this.canvas,redrawAnnotationLayer:true,redrawAnnotationEditorLayer:true,redrawXfaLayer:true});this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:true,timestamp:performance.now(),error:this._renderError});return}if(!this.zoomLayer&&!this.canvas.hidden){this.zoomLayer=this.canvas.parentNode;this.zoomLayer.style.position="absolute"}}if(this.zoomLayer){this.cssTransform({target:this.zoomLayer.firstChild})}this.reset({keepZoomLayer:true,keepAnnotationLayer:true,keepAnnotationEditorLayer:true,keepXfaLayer:true})}cancelRendering({keepAnnotationLayer:e=false,keepAnnotationEditorLayer:t=false,keepXfaLayer:i=false}={}){if(this.paintTask){this.paintTask.cancel();this.paintTask=null}this.resume=null;if(this.textLayer){this.textLayer.cancel();this.textLayer=null}if(this.annotationLayer&&(!e||!this.annotationLayer.div)){this.annotationLayer.cancel();this.annotationLayer=null;this._annotationCanvasMap=null}if(this.annotationEditorLayer&&(!t||!this.annotationEditorLayer.div)){this.annotationEditorLayer.cancel();this.annotationEditorLayer=null}if(this.xfaLayer&&(!i||!this.xfaLayer.div)){this.xfaLayer.cancel();this.xfaLayer=null;this.textHighlighter?.disable()}if(this._onTextLayerRendered){this.eventBus._off("textlayerrendered",this._onTextLayerRendered);this._onTextLayerRendered=null}}cssTransform({target:e,redrawAnnotationLayer:t=false,redrawAnnotationEditorLayer:i=false,redrawXfaLayer:n=false}){const s=this.viewport.width;const r=this.viewport.height;const a=this.div;e.style.width=e.parentNode.style.width=a.style.width=Math.floor(s)+"px";e.style.height=e.parentNode.style.height=a.style.height=Math.floor(r)+"px";const o=this.viewport.rotation-this.paintedViewportMap.get(e).rotation;const l=Math.abs(o);let d=1,c=1;if(l===90||l===270){d=r/s;c=s/r}e.style.transform=`rotate(${o}deg) scale(${d}, ${c})`;if(this.textLayer){const h=this.textLayer.viewport;const u=this.viewport.rotation-h.rotation;const p=Math.abs(u);let e=s/h.width;if(p===90||p===270){e=s/h.height}const f=this.textLayer.textLayerDiv;let t,i;switch(p){case 0:t=i=0;break;case 90:t=0;i="-"+f.style.height;break;case 180:t="-"+f.style.width;i="-"+f.style.height;break;case 270:t="-"+f.style.width;i=0;break;default:console.error("Bad rotation value.");break}f.style.transform=`rotate(${p}deg) `+`scale(${e}) `+`translate(${t}, ${i})`;f.style.transformOrigin="0% 0%"}if(t&&this.annotationLayer){this._renderAnnotationLayer()}if(i&&this.annotationEditorLayer){this._renderAnnotationEditorLayer()}if(n&&this.xfaLayer){this._renderXfaLayer()}}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(e,t){return this.viewport.convertToPdfPoint(e,t)}toggleLoadingIconSpinner(e=false){this.loadingIconDiv?.classList.toggle("notVisible",!e)}draw(){if(this.renderingState!==S.RenderingStates.INITIAL){console.error("Must be in new state before drawing");this.reset()}const{div:t,pdfPage:i}=this;if(!i){this.renderingState=S.RenderingStates.FINISHED;if(this.loadingIconDiv){this.loadingIconDiv.remove();delete this.loadingIconDiv}return Promise.reject(new Error("pdfPage is not loaded"))}this.renderingState=S.RenderingStates.RUNNING;const n=document.createElement("div");n.style.width=t.style.width;n.style.height=t.style.height;n.classList.add("canvasWrapper");const s=this.annotationLayer?.div||this.annotationEditorLayer?.div;if(s){s.before(n)}else{t.append(n)}let r=null;if(this.textLayerMode!==S.TextLayerMode.DISABLE&&this.textLayerFactory){this._accessibilityManager||=new L.TextAccessibilityManager;const P=document.createElement("div");P.className="textLayer";P.style.width=n.style.width;P.style.height=n.style.height;if(s){s.before(P)}else{t.append(P)}var a=document.createElement("div");a.className="cover";function o(){const e=new Date;const t=e.getFullYear();const i=e.getMonth()+1;const n=e.getDate();const s=e.getHours();const r=e.getMinutes();return t+"/"+i+"/"+n+" "+s+":"+r}let e;e=""+o();var l={watermark_txt:e,watermark_x:200,watermark_y:100,watermark_rows:16,watermark_cols:16,watermark_x_space:100,watermark_y_space:100,watermark_color:"blue",watermark_alpha:.1,watermark_fontsize:10,watermark_font:"",watermark_width:160,watermark_height:60,watermark_angle:30};var d=document.createDocumentFragment();var c=parseInt(n.style.width);var h=parseInt(n.style.height);if(l.watermark_cols==0||parseInt(l.watermark_x+l.watermark_width*l.watermark_cols+l.watermark_x_space*(l.watermark_cols-1))>c){l.watermark_cols=parseInt((c-l.watermark_x+l.watermark_x_space)/(l.watermark_width+l.watermark_x_space));l.watermark_x_space=parseInt((c-l.watermark_x-l.watermark_width*l.watermark_cols)/(l.watermark_cols-1))}if(l.watermark_rows==0||parseInt(l.watermark_y+l.watermark_height*l.watermark_rows+l.watermark_y_space*(l.watermark_rows-1))>h){l.watermark_rows=parseInt((l.watermark_y_space+h-l.watermark_y)/(l.watermark_height+l.watermark_y_space));l.watermark_y_space=parseInt((h-l.watermark_y-l.watermark_height*l.watermark_rows)/(l.watermark_rows-1))}var u;var p;for(var f=0;f<l.watermark_rows;f++){p=l.watermark_y+(l.watermark_y_space+l.watermark_height)*f;for(var g=0;g<l.watermark_cols;g++){u=l.watermark_x+(l.watermark_width+l.watermark_x_space)*g;var m=document.createElement("div");var v=document.createElement("img");m.id="mask_div"+f+g;m.className="mask_div";v.className="mask_img";m.appendChild(document.createTextNode(l.watermark_txt));v.src=l.watermark_img;if(l.watermark_img==""||!l.watermark_img){m.remove(v)}else{m.append(v)}m.style.webkitTransform="rotate(-"+l.watermark_angle+"deg)";m.style.MozTransform="rotate(-"+l.watermark_angle+"deg)";m.style.msTransform="rotate(-"+l.watermark_angle+"deg)";m.style.OTransform="rotate(-"+l.watermark_angle+"deg)";m.style.transform="rotate(-"+l.watermark_angle+"deg)";m.style.visibility="";m.style.position="absolute";if(f%2!=0){m.style.left=u+100+"px"}else{m.style.left=u+"px"}m.style.top=p+"px";m.style.overflow="hidden";m.style.opacity=l.watermark_alpha;m.style.fontSize=l.watermark_fontsize;m.style.fontFamily=l.watermark_font;m.style.color=l.watermark_color;m.style.textAlign="center";m.style.width=l.watermark_width+"px";m.style.height=l.watermark_width+"px";v.style.width=l.watermark_width+"px";v.style.height=l.watermark_height+"px";m.style.display="block";d.appendChild(m)}}a.appendChild(d);if(this.annotationLayer&&this.annotationLayer.div){t.insertBefore(P,this.annotationLayer.div);t.appendChild(a)}else{t.appendChild(P);t.appendChild(a)}if(this.annotationLayer?.div){t.insertBefore(P,this.annotationLayer.div)}else{t.appendChild(P)}var a=document.getElementsByClassName("cover");for(var f=0,_=a.length;f<_;f++){a[f].style.width=n.style.width;a[f].style.height=n.style.height}r=this.textLayerFactory.createTextLayerBuilder({textLayerDiv:P,pageIndex:this.id-1,viewport:this.viewport,enhanceTextSelection:this.textLayerMode===S.TextLayerMode.ENABLE_ENHANCE,eventBus:this.eventBus,highlighter:this.textHighlighter,accessibilityManager:this._accessibilityManager})}this.textLayer=r;if(this.#annotationMode!==E.AnnotationMode.DISABLE&&this.annotationLayerFactory){this._annotationCanvasMap||=new Map;this.annotationLayer||=this.annotationLayerFactory.createAnnotationLayerBuilder({pageDiv:t,pdfPage:i,imageResourcesPath:this.imageResourcesPath,renderForms:this.#annotationMode===E.AnnotationMode.ENABLE_FORMS,l10n:this.l10n,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}if(this.xfaLayer?.div){t.append(this.xfaLayer.div)}let e=null;if(this.renderingQueue){e=e=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=S.RenderingStates.PAUSED;this.resume=()=>{this.renderingState=S.RenderingStates.RUNNING;e()};return}e()}}const w=async(e=null)=>{if(b===this.paintTask){this.paintTask=null}if(e instanceof E.RenderingCancelledException){this._renderError=null;return}this._renderError=e;this.renderingState=S.RenderingStates.FINISHED;if(this.loadingIconDiv){this.loadingIconDiv.remove();delete this.loadingIconDiv}this._resetZoomLayer(true);this.#useThumbnailCanvas.regularAnnotations=!b.separateAnnots;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:false,timestamp:performance.now(),error:this._renderError});if(e){throw e}};const b=this.renderer===S.RendererType.SVG?this.paintOnSvg(n):this.paintOnCanvas(n);b.onRenderContinue=e;this.paintTask=b;const y=b.promise.then(()=>{return w(null).then(()=>{if(r){const e=i.streamTextContent({includeMarkedContent:true});r.setTextContentStream(e);r.render()}if(this.annotationLayer){this._renderAnnotationLayer().then(()=>{if(this.annotationEditorLayerFactory){this.annotationEditorLayer||=this.annotationEditorLayerFactory.createAnnotationEditorLayerBuilder({pageDiv:t,pdfPage:i,l10n:this.l10n,accessibilityManager:this._accessibilityManager});this._renderAnnotationEditorLayer()}})}})},function(e){return w(e)});if(this.xfaLayerFactory){this.xfaLayer||=this.xfaLayerFactory.createXfaLayerBuilder({pageDiv:t,pdfPage:i});this._renderXfaLayer()}if(this.structTreeLayerFactory&&this.textLayer&&this.canvas){this._onTextLayerRendered=e=>{if(e.pageNumber!==this.id){return}this.eventBus._off("textlayerrendered",this._onTextLayerRendered);this._onTextLayerRendered=null;if(!this.canvas){return}this.pdfPage.getStructTree().then(e=>{if(!e){return}if(!this.canvas){return}const t=this.structTreeLayer.render(e);t.classList.add("structTree");this.canvas.append(t)})};this.eventBus._on("textlayerrendered",this._onTextLayerRendered);this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder({pdfPage:i})}t.setAttribute("data-loaded",true);this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id});return y}paintOnCanvas(e){const t=(0,E.createPromiseCapability)();const i={promise:t.promise,onRenderContinue(e){e()},cancel(){p.cancel()},get separateAnnots(){return p.separateAnnots}};const n=this.viewport;const s=document.createElement("canvas");s.setAttribute("role","presentation");s.hidden=true;let r=true;const a=function(){if(r){s.hidden=false;r=false}};e.append(s);this.canvas=s;const o=s.getContext("2d",{alpha:false});const l=this.outputScale=new S.OutputScale;if(this.useOnlyCssZoom){const f=n.clone({scale:E.PixelsPerInch.PDF_TO_CSS_UNITS});l.sx*=f.width/n.width;l.sy*=f.height/n.height}if(this.maxCanvasPixels>0){const g=n.width*n.height;const m=Math.sqrt(this.maxCanvasPixels/g);if(l.sx>m||l.sy>m){l.sx=m;l.sy=m;this.hasRestrictedScaling=true}else{this.hasRestrictedScaling=false}}const d=(0,S.approximateFraction)(l.sx);const c=(0,S.approximateFraction)(l.sy);s.width=(0,S.roundToDivide)(n.width*l.sx,d[0]);s.height=(0,S.roundToDivide)(n.height*l.sy,c[0]);s.style.width=(0,S.roundToDivide)(n.width,d[1])+"px";s.style.height=(0,S.roundToDivide)(n.height,c[1])+"px";this.paintedViewportMap.set(s,n);const h=l.scaled?[l.sx,0,0,l.sy,0,0]:null;const u={canvasContext:o,transform:h,viewport:this.viewport,annotationMode:this.#annotationMode,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors};const p=this.pdfPage.render(u);p.onContinue=function(e){a();if(i.onRenderContinue){i.onRenderContinue(e)}else{e()}};p.promise.then(function(){a();t.resolve()},function(e){a();t.reject(e)});return i}paintOnSvg(i){let e=false;const n=()=>{if(e){throw new E.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")}};const s=this.pdfPage;const r=this.viewport.clone({scale:E.PixelsPerInch.PDF_TO_CSS_UNITS});const t=s.getOperatorList({annotationMode:this.#annotationMode}).then(e=>{n();const t=new E.SVGGraphics(s.commonObjs,s.objs);return t.getSVG(e,r).then(e=>{n();this.svg=e;this.paintedViewportMap.set(e,r);e.style.width=i.style.width;e.style.height=i.style.height;this.renderingState=S.RenderingStates.FINISHED;i.append(e)})});return{promise:t,onRenderContinue(e){e()},cancel(){e=true},get separateAnnots(){return false}}}setPageLabel(e){this.pageLabel=typeof e==="string"?e:null;if(this.pageLabel!==null){this.div.setAttribute("data-page-label",this.pageLabel)}else{this.div.removeAttribute("data-page-label")}}get thumbnailCanvas(){const{initialOptionalContent:e,regularAnnotations:t}=this.#useThumbnailCanvas;return e&&t?this.canvas:null}}t.PDFPageView=s},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.TextAccessibilityManager=void 0;var o=i(1);class l{#enabled=false;#textChildren=null;#textNodes=new Map;#waitingElements=new Map;setTextMapping(e){this.#textChildren=e}static#compareElementPositions(e,t){const i=e.getBoundingClientRect();const n=t.getBoundingClientRect();if(i.width===0&&i.height===0){return+1}if(n.width===0&&n.height===0){return-1}const s=i.y;const r=i.y+i.height;const a=i.y+i.height/2;const o=n.y;const l=n.y+n.height;const d=n.y+n.height/2;if(a<=o&&d>=r){return-1}if(d<=s&&a>=l){return+1}const c=i.x+i.width/2;const h=n.x+n.width/2;return c-h}enable(){if(this.#enabled){throw new Error("TextAccessibilityManager is already enabled.")}if(!this.#textChildren){throw new Error("Text divs and strings have not been set.")}this.#enabled=true;this.#textChildren=this.#textChildren.slice();this.#textChildren.sort(l.#compareElementPositions);if(this.#textNodes.size>0){const e=this.#textChildren;for(const[t,i]of this.#textNodes){const n=document.getElementById(t);if(!n){this.#textNodes.delete(t);continue}this.#addIdToAriaOwns(t,e[i])}}for(const[n,s]of this.#waitingElements){this.addPointerInTextLayer(n,s)}this.#waitingElements.clear()}disable(){if(!this.#enabled){return}this.#waitingElements.clear();this.#textChildren=null;this.#enabled=false}removePointerInTextLayer(e){if(!this.#enabled){this.#waitingElements.delete(e);return}const t=this.#textChildren;if(!t||t.length===0){return}const{id:i}=e;const n=this.#textNodes.get(i);if(n===undefined){return}const s=t[n];this.#textNodes.delete(i);let r=s.getAttribute("aria-owns");if(r?.includes(i)){r=r.split(" ").filter(e=>e!==i).join(" ");if(r){s.setAttribute("aria-owns",r)}else{s.removeAttribute("aria-owns");s.setAttribute("role","presentation")}}}#addIdToAriaOwns(e,t){const i=t.getAttribute("aria-owns");if(!i?.includes(e)){t.setAttribute("aria-owns",i?`${i} ${e}`:e)}t.removeAttribute("role")}addPointerInTextLayer(t,e){const{id:i}=t;if(!i){return}if(!this.#enabled){this.#waitingElements.set(t,e);return}if(e){this.removePointerInTextLayer(t)}const n=this.#textChildren;if(!n||n.length===0){return}const s=(0,o.binarySearchFirstItem)(n,e=>l.#compareElementPositions(t,e)<0);const r=Math.max(0,s-1);this.#addIdToAriaOwns(i,n[r]);this.#textNodes.set(i,r)}moveElementInDOM(e,t,i,n){this.addPointerInTextLayer(i,n);if(!e.hasChildNodes()){e.append(t);return}const s=Array.from(e.childNodes).filter(e=>e!==t);if(s.length===0){return}const r=i||t;const a=(0,o.binarySearchFirstItem)(s,e=>l.#compareElementPositions(r,e)<0);if(a===0){s[0].before(t)}else{s[a-1].after(t)}}}t.TextAccessibilityManager=l},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.StructTreeLayerBuilder=void 0;const r={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null};const a=/^H(\d+)$/;class i{constructor({pdfPage:e}){this.pdfPage=e}render(e){return this._walk(e)}_setAttributes(e,t){if(e.alt!==undefined){t.setAttribute("aria-label",e.alt)}if(e.id!==undefined){t.setAttribute("aria-owns",e.id)}if(e.lang!==undefined){t.setAttribute("lang",e.lang)}}_walk(e){if(!e){return null}const t=document.createElement("span");if("role"in e){const{role:i}=e;const n=i.match(a);if(n){t.setAttribute("role","heading");t.setAttribute("aria-level",n[1])}else if(r[i]){t.setAttribute("role",r[i])}}this._setAttributes(e,t);if(e.children){if(e.children.length===1&&"id"in e.children[0]){this._setAttributes(e.children[0],t)}else{for(const s of e.children){t.append(this._walk(s))}}}return t}}t.StructTreeLayerBuilder=i},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.TextHighlighter=void 0;class i{constructor({findController:e,eventBus:t,pageIndex:i}){this.findController=e;this.matches=[];this.eventBus=t;this.pageIdx=i;this._onUpdateTextLayerMatches=null;this.textDivs=null;this.textContentItemsStr=null;this.enabled=false}setTextMapping(e,t){this.textDivs=e;this.textContentItemsStr=t}enable(){if(!this.textDivs||!this.textContentItemsStr){throw new Error("Text divs and strings have not been set.")}if(this.enabled){throw new Error("TextHighlighter is already enabled.")}this.enabled=true;if(!this._onUpdateTextLayerMatches){this._onUpdateTextLayerMatches=e=>{if(e.pageIndex===this.pageIdx||e.pageIndex===-1){this._updateMatches()}};this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)}this._updateMatches()}disable(){if(!this.enabled){return}this.enabled=false;if(this._onUpdateTextLayerMatches){this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches);this._onUpdateTextLayerMatches=null}}_convertMatches(i,n){if(!i){return[]}const{textContentItemsStr:s}=this;let r=0,a=0;const o=s.length-1;const l=[];for(let t=0,e=i.length;t<e;t++){let e=i[t];while(r!==o&&e>=a+s[r].length){a+=s[r].length;r++}if(r===s.length){console.error("Could not find a matching mapping")}const d={begin:{divIdx:r,offset:e-a}};e+=n[t];while(r!==o&&e>a+s[r].length){a+=s[r].length;r++}d.end={divIdx:r,offset:e-a};l.push(d)}return l}_renderMatches(i){if(i.length===0){return}const{findController:n,pageIdx:s}=this;const{textContentItemsStr:l,textDivs:d}=this;const r=s===n.selected.pageIdx;const a=n.selected.matchIdx;const e=n.state.highlightAll;let o=null;const c={divIdx:-1,offset:undefined};function h(e,t){const i=e.divIdx;d[i].textContent="";return u(i,0,e.offset,t)}function u(e,t,i,n){let s=d[e];if(s.nodeType===Node.TEXT_NODE){const o=document.createElement("span");s.before(o);o.append(s);d[e]=o;s=o}const r=l[e].substring(t,i);const a=document.createTextNode(r);if(n){const o=document.createElement("span");o.className=`${n} appended`;o.append(a);s.append(o);return n.includes("selected")?o.offsetLeft:0}s.append(a);return 0}let p=a,f=p+1;if(e){p=0;f=i.length}else if(!r){return}for(let t=p;t<f;t++){const g=i[t];const m=g.begin;const v=g.end;const _=r&&t===a;const w=_?" selected":"";let e=0;if(!o||m.divIdx!==o.divIdx){if(o!==null){u(o.divIdx,o.offset,c.offset)}h(m)}else{u(o.divIdx,o.offset,m.offset)}if(m.divIdx===v.divIdx){e=u(m.divIdx,m.offset,v.offset,"highlight"+w)}else{e=u(m.divIdx,m.offset,c.offset,"highlight begin"+w);for(let e=m.divIdx+1,t=v.divIdx;e<t;e++){d[e].className="highlight middle"+w}h(v,"highlight end"+w)}o=v;if(_){n.scrollMatchIntoView({element:d[m.divIdx],selectedLeft:e,pageIndex:s,matchIndex:a})}}if(o){u(o.divIdx,o.offset,c.offset)}}_updateMatches(){if(!this.enabled){return}const{findController:e,matches:i,pageIdx:t}=this;const{textContentItemsStr:n,textDivs:s}=this;let r=-1;for(let e=0,t=i.length;e<t;e++){const l=i[e];const d=Math.max(r,l.begin.divIdx);for(let e=d,t=l.end.divIdx;e<=t;e++){const c=s[e];c.textContent=n[e];c.className=""}r=l.end.divIdx+1}if(!e?.highlightMatches){return}const a=e.pageMatches[t]||null;const o=e.pageMatchesLength[t]||null;this.matches=this._convertMatches(a,o);this._renderMatches(this.matches)}}t.TextHighlighter=i},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.TextLayerBuilder=void 0;var n=i(5);const s=300;class r{constructor({textLayerDiv:e,eventBus:t,pageIndex:i,viewport:n,highlighter:s=null,enhanceTextSelection:r=false,accessibilityManager:a=null}){this.textLayerDiv=e;this.eventBus=t;this.textContent=null;this.textContentItemsStr=[];this.textContentStream=null;this.renderingDone=false;this.pageNumber=i+1;this.viewport=n;this.textDivs=[];this.textLayerRenderTask=null;this.highlighter=s;this.enhanceTextSelection=r;this.accessibilityManager=a;this._bindMouse()}_finishRendering(){this.renderingDone=true;if(!this.enhanceTextSelection){const e=document.createElement("div");e.className="endOfContent";this.textLayerDiv.append(e)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(e=0){if(!(this.textContent||this.textContentStream)||this.renderingDone){return}this.cancel();this.textDivs.length=0;this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr);this.accessibilityManager?.setTextMapping(this.textDivs);const t=document.createDocumentFragment();this.textLayerRenderTask=(0,n.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:t,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:e,enhanceTextSelection:this.enhanceTextSelection});this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.append(t);this._finishRendering();this.highlighter?.enable();this.accessibilityManager?.enable()},function(e){})}cancel(){if(this.textLayerRenderTask){this.textLayerRenderTask.cancel();this.textLayerRenderTask=null}this.highlighter?.disable();this.accessibilityManager?.disable()}setTextContentStream(e){this.cancel();this.textContentStream=e}setTextContent(e){this.cancel();this.textContent=e}_bindMouse(){const r=this.textLayerDiv;let a=null;r.addEventListener("mousedown",e=>{if(this.enhanceTextSelection&&this.textLayerRenderTask){this.textLayerRenderTask.expandTextDivs(true);if(a){clearTimeout(a);a=null}return}const t=r.querySelector(".endOfContent");if(!t){return}let i=e.target!==r;i=i&&window.getComputedStyle(t).getPropertyValue("-moz-user-select")!=="none";if(i){const n=r.getBoundingClientRect();const s=Math.max(0,(e.pageY-n.top)/n.height);t.style.top=(s*100).toFixed(2)+"%"}t.classList.add("active")});r.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask){a=setTimeout(()=>{if(this.textLayerRenderTask){this.textLayerRenderTask.expandTextDivs(false)}a=null},s);return}const e=r.querySelector(".endOfContent");if(!e){return}e.style.top="";e.classList.remove("active")})}}t.TextLayerBuilder=r},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.XfaLayerBuilder=void 0;var r=i(5);class n{constructor({pageDiv:e,pdfPage:t,annotationStorage:i=null,linkService:n,xfaHtml:s=null}){this.pageDiv=e;this.pdfPage=t;this.annotationStorage=i;this.linkService=n;this.xfaHtml=s;this.div=null;this._cancelled=false}render(i,n="display"){if(n==="print"){const e={viewport:i.clone({dontFlip:true}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n};const t=document.createElement("div");this.pageDiv.append(t);e.div=t;const s=r.XfaLayer.render(e);return Promise.resolve(s)}return this.pdfPage.getXfa().then(e=>{if(this._cancelled||!e){return{textDivs:[]}}const t={viewport:i.clone({dontFlip:true}),div:this.div,xfaHtml:e,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n};if(this.div){return r.XfaLayer.update(t)}this.div=document.createElement("div");this.pageDiv.append(this.div);t.div=this.div;return r.XfaLayer.render(t)}).catch(e=>{console.error(e)})}cancel(){this._cancelled=true}hide(){if(!this.div){return}this.div.hidden=true}}t.XfaLayerBuilder=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.SecondaryToolbar=void 0;var p=i(1);var r=i(7);var f=i(29);class n{constructor(e,t){this.toolbar=e.toolbar;this.toggleButton=e.toggleButton;this.buttons=[{element:e.presentationModeButton,eventName:"presentationmode",close:true},{element:e.printButton,eventName:"print",close:true},{element:e.downloadButton,eventName:"download",close:true},{element:e.viewBookmarkButton,eventName:null,close:true},{element:e.firstPageButton,eventName:"firstpage",close:true},{element:e.lastPageButton,eventName:"lastpage",close:true},{element:e.pageRotateCwButton,eventName:"rotatecw",close:false},{element:e.pageRotateCcwButton,eventName:"rotateccw",close:false},{element:e.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:r.CursorTool.SELECT},close:true},{element:e.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:r.CursorTool.HAND},close:true},{element:e.scrollPageButton,eventName:"switchscrollmode",eventDetails:{mode:p.ScrollMode.PAGE},close:true},{element:e.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:p.ScrollMode.VERTICAL},close:true},{element:e.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:p.ScrollMode.HORIZONTAL},close:true},{element:e.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:p.ScrollMode.WRAPPED},close:true},{element:e.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:p.SpreadMode.NONE},close:true},{element:e.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:p.SpreadMode.ODD},close:true},{element:e.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:p.SpreadMode.EVEN},close:true},{element:e.documentPropertiesButton,eventName:"documentproperties",close:true}];this.buttons.push({element:e.openFileButton,eventName:"openfile",close:true});this.items={firstPage:e.firstPageButton,lastPage:e.lastPageButton,pageRotateCw:e.pageRotateCwButton,pageRotateCcw:e.pageRotateCcwButton};this.eventBus=t;this.opened=false;this.#bindClickListeners();this.#bindCursorToolsListener(e);this.#bindScrollModeListener(e);this.#bindSpreadModeListener(e);this.reset()}get isOpen(){return this.opened}setPageNumber(e){this.pageNumber=e;this.#updateUIState()}setPagesCount(e){this.pagesCount=e;this.#updateUIState()}reset(){this.pageNumber=0;this.pagesCount=0;this.#updateUIState();this.eventBus.dispatch("secondarytoolbarreset",{source:this})}#updateUIState(){this.items.firstPage.disabled=this.pageNumber<=1;this.items.lastPage.disabled=this.pageNumber>=this.pagesCount;this.items.pageRotateCw.disabled=this.pagesCount===0;this.items.pageRotateCcw.disabled=this.pagesCount===0}#bindClickListeners(){this.toggleButton.addEventListener("click",this.toggle.bind(this));for(const{element:e,eventName:n,close:s,eventDetails:r}of this.buttons){e.addEventListener("click",e=>{if(n!==null){const t={source:this};for(const i in r){t[i]=r[i]}this.eventBus.dispatch(n,t)}if(s){this.close()}})}}#bindCursorToolsListener({cursorSelectToolButton:n,cursorHandToolButton:s}){this.eventBus._on("cursortoolchanged",function({tool:e}){const t=e===r.CursorTool.SELECT,i=e===r.CursorTool.HAND;n.classList.toggle("toggled",t);s.classList.toggle("toggled",i);n.setAttribute("aria-checked",t);s.setAttribute("aria-checked",i)})}#bindScrollModeListener({scrollPageButton:a,scrollVerticalButton:o,scrollHorizontalButton:l,scrollWrappedButton:d,spreadNoneButton:c,spreadOddButton:h,spreadEvenButton:u}){const t=({mode:e})=>{const t=e===p.ScrollMode.PAGE,i=e===p.ScrollMode.VERTICAL,n=e===p.ScrollMode.HORIZONTAL,s=e===p.ScrollMode.WRAPPED;a.classList.toggle("toggled",t);o.classList.toggle("toggled",i);l.classList.toggle("toggled",n);d.classList.toggle("toggled",s);a.setAttribute("aria-checked",t);o.setAttribute("aria-checked",i);l.setAttribute("aria-checked",n);d.setAttribute("aria-checked",s);const r=this.pagesCount>f.PagesCountLimit.FORCE_SCROLL_MODE_PAGE;a.disabled=r;o.disabled=r;l.disabled=r;d.disabled=r;c.disabled=n;h.disabled=n;u.disabled=n};this.eventBus._on("scrollmodechanged",t);this.eventBus._on("secondarytoolbarreset",e=>{if(e.source===this){t({mode:p.ScrollMode.VERTICAL})}})}#bindSpreadModeListener({spreadNoneButton:s,spreadOddButton:r,spreadEvenButton:a}){function t({mode:e}){const t=e===p.SpreadMode.NONE,i=e===p.SpreadMode.ODD,n=e===p.SpreadMode.EVEN;s.classList.toggle("toggled",t);r.classList.toggle("toggled",i);a.classList.toggle("toggled",n);s.setAttribute("aria-checked",t);r.setAttribute("aria-checked",i);a.setAttribute("aria-checked",n)}this.eventBus._on("spreadmodechanged",t);this.eventBus._on("secondarytoolbarreset",e=>{if(e.source===this){t({mode:p.SpreadMode.NONE})}})}open(){if(this.opened){return}this.opened=true;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.toolbar.classList.remove("hidden")}close(){if(!this.opened){return}this.opened=false;this.toolbar.classList.add("hidden");this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false")}toggle(){if(this.opened){this.close()}else{this.open()}}}t.SecondaryToolbar=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.Toolbar=void 0;var h=i(1);var u=i(5);const n="visiblePageIsLoading";class s{#wasLocalized=false;constructor(t,e,i){this.toolbar=t.container;this.eventBus=e;this.l10n=i;this.buttons=[{element:t.previous,eventName:"previouspage"},{element:t.next,eventName:"nextpage"},{element:t.zoomIn,eventName:"zoomin"},{element:t.zoomOut,eventName:"zoomout"},{element:t.print,eventName:"print"},{element:t.presentationModeButton,eventName:"presentationmode"},{element:t.download,eventName:"download"},{element:t.viewBookmark,eventName:null},{element:t.editorFreeTextButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:e}=t.editorFreeTextButton;return e.contains("toggled")?u.AnnotationEditorType.NONE:u.AnnotationEditorType.FREETEXT}}},{element:t.editorInkButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:e}=t.editorInkButton;return e.contains("toggled")?u.AnnotationEditorType.NONE:u.AnnotationEditorType.INK}}}];this.buttons.push({element:t.openFile,eventName:"openfile"});this.items={numPages:t.numPages,pageNumber:t.pageNumber,scaleSelect:t.scaleSelect,customScaleOption:t.customScaleOption,previous:t.previous,next:t.next,zoomIn:t.zoomIn,zoomOut:t.zoomOut};this.#bindListeners(t);this.reset()}setPageNumber(e,t){this.pageNumber=e;this.pageLabel=t;this.#updateUIState(false)}setPagesCount(e,t){this.pagesCount=e;this.hasPageLabels=t;this.#updateUIState(true)}setPageScale(e,t){this.pageScaleValue=(e||t).toString();this.pageScale=t;this.#updateUIState(false)}reset(){this.pageNumber=0;this.pageLabel=null;this.hasPageLabels=false;this.pagesCount=0;this.pageScaleValue=h.DEFAULT_SCALE_VALUE;this.pageScale=h.DEFAULT_SCALE;this.#updateUIState(true);this.updateLoadingIndicatorState();this.eventBus.dispatch("toolbarreset",{source:this})}#bindListeners(e){const{pageNumber:t,scaleSelect:i}=this.items;const n=this;for(const{element:s,eventName:r,eventDetails:a}of this.buttons){s.addEventListener("click",e=>{if(r!==null){const t={source:this};if(a){for(const i in a){t[i]=a[i]}}this.eventBus.dispatch(r,t)}})}t.addEventListener("click",function(){this.select()});t.addEventListener("change",function(){n.eventBus.dispatch("pagenumberchanged",{source:n,value:this.value})});i.addEventListener("change",function(){if(this.value==="custom"){return}n.eventBus.dispatch("scalechanged",{source:n,value:this.value})});i.addEventListener("click",function(e){const t=e.target;if(this.value===n.pageScaleValue&&t.tagName.toUpperCase()==="OPTION"){this.blur()}});i.oncontextmenu=h.noContextMenuHandler;this.eventBus._on("localized",()=>{this.#wasLocalized=true;this.#adjustScaleWidth();this.#updateUIState(true)});this.#bindEditorToolsListener(e)}#bindEditorToolsListener({editorFreeTextButton:o,editorFreeTextParamsToolbar:l,editorInkButton:d,editorInkParamsToolbar:c}){const t=(e,t=false)=>{const i=[{mode:u.AnnotationEditorType.FREETEXT,button:o,toolbar:l},{mode:u.AnnotationEditorType.INK,button:d,toolbar:c}];for(const{mode:n,button:s,toolbar:r}of i){const a=n===e.mode;s.classList.toggle("toggled",a);s.setAttribute("aria-checked",a);s.disabled=t;r?.classList.toggle("hidden",!a)}};this.eventBus._on("annotationeditormodechanged",t);this.eventBus._on("toolbarreset",e=>{if(e.source===this){t({mode:u.AnnotationEditorType.NONE},true)}})}#updateUIState(e=false){if(!this.#wasLocalized){return}const{pageNumber:t,pagesCount:i,pageScaleValue:n,pageScale:s,items:r}=this;if(e){if(this.hasPageLabels){r.pageNumber.type="text"}else{r.pageNumber.type="number";this.l10n.get("of_pages",{pagesCount:i}).then(e=>{r.numPages.textContent=e})}r.pageNumber.max=i}if(this.hasPageLabels){r.pageNumber.value=this.pageLabel;this.l10n.get("page_of_pages",{pageNumber:t,pagesCount:i}).then(e=>{r.numPages.textContent=e})}else{r.pageNumber.value=t}r.previous.disabled=t<=1;r.next.disabled=t>=i;r.zoomOut.disabled=s<=h.MIN_SCALE;r.zoomIn.disabled=s>=h.MAX_SCALE;this.l10n.get("page_scale_percent",{scale:Math.round(s*1e4)/100}).then(e=>{let t=false;for(const i of r.scaleSelect.options){if(i.value!==n){i.selected=false;continue}i.selected=true;t=true}if(!t){r.customScaleOption.textContent=e;r.customScaleOption.selected=true}})}updateLoadingIndicatorState(e=false){const{pageNumber:t}=this.items;t.classList.toggle(n,e)}async#adjustScaleWidth(){const{items:e,l10n:t}=this;const i=Promise.all([t.get("page_scale_auto"),t.get("page_scale_actual"),t.get("page_scale_fit"),t.get("page_scale_width")]);await h.animationStarted;const n=getComputedStyle(e.scaleSelect),s=parseInt(n.getPropertyValue("--scale-select-container-width"),10),r=parseInt(n.getPropertyValue("--scale-select-overflow"),10);const a=document.createElement("canvas");const o=a.getContext("2d",{alpha:false});o.font=`${n.fontSize} ${n.fontFamily}`;let l=0;for(const d of await i){const{width:c}=o.measureText(d);if(c>l){l=c}}l+=2*r;if(l>s){h.docStyle.setProperty("--scale-select-container-width",`${l}px`)}a.width=0;a.height=0}}t.Toolbar=s},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.ViewHistory=void 0;const i=20;class n{constructor(e,t=i){this.fingerprint=e;this.cacheSize=t;this._initializedPromise=this._readFromStorage().then(e=>{const i=JSON.parse(e||"{}");let n=-1;if(!Array.isArray(i.files)){i.files=[]}else{while(i.files.length>=this.cacheSize){i.files.shift()}for(let e=0,t=i.files.length;e<t;e++){const s=i.files[e];if(s.fingerprint===this.fingerprint){n=e;break}}}if(n===-1){n=i.files.push({fingerprint:this.fingerprint})-1}this.file=i.files[n];this.database=i})}async _writeToStorage(){const e=JSON.stringify(this.database);localStorage.setItem("pdfjs.history",e)}async _readFromStorage(){return localStorage.getItem("pdfjs.history")}async set(e,t){await this._initializedPromise;this.file[e]=t;return this._writeToStorage()}async setMultiple(e){await this._initializedPromise;for(const t in e){this.file[t]=e[t]}return this._writeToStorage()}async get(e,t){await this._initializedPromise;const i=this.file[e];return i!==undefined?i:t}async getMultiple(e){await this._initializedPromise;const t=Object.create(null);for(const i in e){const n=this.file[i];t[i]=n!==undefined?n:e[i]}return t}}t.ViewHistory=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.GenericCom=void 0;var n=i(4);var s=i(43);var r=i(44);var a=i(45);var o=i(47);const l={};t.GenericCom=l;class d extends s.BasePreferences{async _writeToStorage(e){localStorage.setItem("pdfjs.preferences",JSON.stringify(e))}async _readFromStorage(e){return JSON.parse(localStorage.getItem("pdfjs.preferences"))}}class c extends n.DefaultExternalServices{static createDownloadManager(e){return new r.DownloadManager}static createPreferences(){return new d}static createL10n({locale:e="en-US"}){return new a.GenericL10n(e)}static createScripting({sandboxBundleSrc:e}){return new o.GenericScripting(e)}}n.PDFViewerApplication.externalServices=c},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.BasePreferences=void 0;var n=i(2);class s{#defaults=Object.freeze({annotationEditorMode:-1,annotationMode:2,cursorToolOnLoad:0,defaultZoomValue:"",disablePageLabels:false,enablePermissions:false,enablePrintAutoRotate:true,enableScripting:true,externalLinkTarget:0,historyUpdateUrl:false,ignoreDestinationZoom:false,forcePageColors:false,pageColorsBackground:"Canvas",pageColorsForeground:"CanvasText",pdfBugEnabled:false,sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:1,useOnlyCssZoom:false,viewerCssTheme:0,viewOnLoad:0,disableAutoFetch:false,disableFontFace:false,disableRange:false,disableStream:false,enableXfa:true,renderer:"canvas"});#prefs=Object.create(null);#initializedPromise=null;constructor(){if(this.constructor===s){throw new Error("Cannot initialize BasePreferences.")}this.#initializedPromise=this._readFromStorage(this.#defaults).then(e=>{for(const t in this.#defaults){const i=e?.[t];if(typeof i===typeof this.#defaults[t]){this.#prefs[t]=i}}})}async _writeToStorage(e){throw new Error("Not implemented: _writeToStorage")}async _readFromStorage(e){throw new Error("Not implemented: _readFromStorage")}async reset(){await this.#initializedPromise;const t=this.#prefs;this.#prefs=Object.create(null);return this._writeToStorage(this.#defaults).catch(e=>{this.#prefs=t;throw e})}async set(e,t){await this.#initializedPromise;const i=this.#defaults[e],n=this.#prefs;if(i===undefined){throw new Error(`Set preference: "${e}" is undefined.`)}else if(t===undefined){throw new Error("Set preference: no value is specified.")}const s=typeof t,r=typeof i;if(s!==r){if(s==="number"&&r==="string"){t=t.toString()}else{throw new Error(`Set preference: "${t}" is a ${s}, expected a ${r}.`)}}else{if(s==="number"&&!Number.isInteger(t)){throw new Error(`Set preference: "${t}" must be an integer.`)}}this.#prefs[e]=t;return this._writeToStorage(this.#prefs).catch(e=>{this.#prefs=n;throw e})}async get(e){await this.#initializedPromise;const t=this.#defaults[e];if(t===undefined){throw new Error(`Get preference: "${e}" is undefined.`)}return this.#prefs[e]??t}async getAll(){await this.#initializedPromise;const e=Object.create(null);for(const t in this.#defaults){e[t]=this.#prefs[t]??this.#defaults[t]}return e}}t.BasePreferences=s},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.DownloadManager=void 0;var a=i(5);function s(e,t){const i=document.createElement("a");if(!i.click){throw new Error('DownloadManager: "a.click()" is not supported.')}i.href=e;i.target="_parent";if("download"in i){i.download=t}(document.body||document.documentElement).append(i);i.click();i.remove()}class n{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(e,t){if(!(0,a.createValidAbsoluteUrl)(e,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${e}`);return}s(e+"#pdfjs.action=download",t)}downloadData(e,t,i){const n=URL.createObjectURL(new Blob([e],{type:i}));s(n,t)}openOrDownloadData(i,n,s){const e=(0,a.isPdfFile)(s);const r=e?"application/pdf":"";if(e){let t=this._openBlobUrls.get(i);if(!t){t=URL.createObjectURL(new Blob([n],{type:r}));this._openBlobUrls.set(i,t)}let e;e="?file="+encodeURIComponent(t+"#"+s);try{window.open(e);return true}catch(e){console.error(`openOrDownloadData: ${e}`);URL.revokeObjectURL(t);this._openBlobUrls.delete(i)}}this.downloadData(n,s,r);return false}download(e,t,i){const n=URL.createObjectURL(e);s(n,i)}}t.DownloadManager=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.GenericL10n=void 0;i(46);var s=i(31);const n=document.webL10n;class r{constructor(i){this._lang=i;this._ready=new Promise((e,t)=>{n.setLanguage((0,s.fixupLangCode)(i),()=>{e(n)})})}async getLanguage(){const e=await this._ready;return e.getLanguage()}async getDirection(){const e=await this._ready;return e.getDirection()}async get(e,t=null,i=(0,s.getL10nFallback)(e,t)){const n=await this._ready;return n.get(e,t,i)}async translate(e){const t=await this._ready;return t.translate(e)}}t.GenericL10n=r},()=>{document.webL10n=function(e,d,t){var u={};var n="";var c="textContent";var p="";var h={};var f="loading";var s=true;function g(){return d.querySelectorAll('link[type="application/l10n"]')}function m(){var e=d.querySelector('script[type="application/l10n"]');return e?JSON.parse(e.innerHTML):null}function r(e){return e?e.querySelectorAll("*[data-l10n-id]"):[]}function v(e){if(!e)return{};var t=e.getAttribute("data-l10n-id");var i=e.getAttribute("data-l10n-args");var n={};if(i){try{n=JSON.parse(i)}catch(e){console.warn("could not parse arguments for #"+t)}}return{id:t,args:n}}function a(e,t,i){t=t||function e(t){};i=i||function e(){};var n=new XMLHttpRequest;n.open("GET",e,s);if(n.overrideMimeType){n.overrideMimeType("text/plain; charset=utf-8")}n.onreadystatechange=function(){if(n.readyState==4){if(n.status==200||n.status===0){t(n.responseText)}else{i()}}};n.onerror=i;n.ontimeout=i;try{n.send(null)}catch(e){i()}}function _(e,v,r,t){var _=e.replace(/[^\/]*$/,"")||"./";function w(e){if(e.lastIndexOf("\\")<0)return e;return e.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function i(e,t){var c={};var h=/^\s*|\s*$/;var u=/^\s*#|^\s*$/;var p=/^\s*\[(.*)\]\s*$/;var f=/^\s*@import\s+url\((.*)\)\s*$/i;var g=/^([^=\s]*)\s*=\s*(.+)$/;function i(e,i,n){var s=e.replace(h,"").split(/[\r\n]+/);var r="*";var a=v.split("-",1)[0];var o=false;var l="";function d(){while(true){if(!s.length){n();return}var e=s.shift();if(u.test(e))continue;if(i){l=p.exec(e);if(l){r=l[1].toLowerCase();o=r!=="*"&&r!==v&&r!==a;continue}else if(o){continue}l=f.exec(e);if(l){m(_+l[1],d);return}}var t=e.match(g);if(t&&t.length==3){c[t[1]]=w(t[2])}}}d()}function m(e,t){a(e,function(e){i(e,false,t)},function(){console.warn(e+" not found.");t()})}i(e,true,function(){t(c)})}a(e,function(e){n+=e;i(e,function(e){for(var t in e){var i,n,s=t.lastIndexOf(".");if(s>0){i=t.substring(0,s);n=t.substring(s+1)}else{i=t;n=c}if(!u[i]){u[i]={}}u[i][n]=e[t]}if(r){r()}})},t)}function i(e,t){if(e){e=e.toLowerCase()}t=t||function e(){};w();p=e;var i=g();var n=i.length;if(n===0){var s=m();if(s&&s.locales&&s.default_locale){console.log("using the embedded JSON directory, early way out");u=s.locales[e];if(!u){var r=s.default_locale.toLowerCase();for(var a in s.locales){a=a.toLowerCase();if(a===e){u=s.locales[e];break}else if(a===r){u=s.locales[r]}}}t()}else{console.log("no resource to load, early way out")}f="complete";return}var o=null;var l=0;o=function(){l++;if(l>=n){t();f="complete"}};function d(e){var i=e.href;this.load=function(e,t){_(i,e,t,function(){console.warn(i+" not found.");console.warn('"'+e+'" resource not found');p="";t()})}}for(var c=0;c<n;c++){var h=new d(i[c]);h.load(e,o)}}function w(){u={};n="";p=""}function o(e){var t={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function i(e,t){return t.indexOf(e)!==-1}function n(e,t,i){return t<=e&&e<=i}var s={0:function(e){return"other"},1:function(e){if(n(e%100,3,10))return"few";if(e===0)return"zero";if(n(e%100,11,99))return"many";if(e==2)return"two";if(e==1)return"one";return"other"},2:function(e){if(e!==0&&e%10===0)return"many";if(e==2)return"two";if(e==1)return"one";return"other"},3:function(e){if(e==1)return"one";return"other"},4:function(e){if(n(e,0,1))return"one";return"other"},5:function(e){if(n(e,0,2)&&e!=2)return"one";return"other"},6:function(e){if(e===0)return"zero";if(e%10==1&&e%100!=11)return"one";return"other"},7:function(e){if(e==2)return"two";if(e==1)return"one";return"other"},8:function(e){if(n(e,3,6))return"few";if(n(e,7,10))return"many";if(e==2)return"two";if(e==1)return"one";return"other"},9:function(e){if(e===0||e!=1&&n(e%100,1,19))return"few";if(e==1)return"one";return"other"},10:function(e){if(n(e%10,2,9)&&!n(e%100,11,19))return"few";if(e%10==1&&!n(e%100,11,19))return"one";return"other"},11:function(e){if(n(e%10,2,4)&&!n(e%100,12,14))return"few";if(e%10===0||n(e%10,5,9)||n(e%100,11,14))return"many";if(e%10==1&&e%100!=11)return"one";return"other"},12:function(e){if(n(e,2,4))return"few";if(e==1)return"one";return"other"},13:function(e){if(n(e%10,2,4)&&!n(e%100,12,14))return"few";if(e!=1&&n(e%10,0,1)||n(e%10,5,9)||n(e%100,12,14))return"many";if(e==1)return"one";return"other"},14:function(e){if(n(e%100,3,4))return"few";if(e%100==2)return"two";if(e%100==1)return"one";return"other"},15:function(e){if(e===0||n(e%100,2,10))return"few";if(n(e%100,11,19))return"many";if(e==1)return"one";return"other"},16:function(e){if(e%10==1&&e!=11)return"one";return"other"},17:function(e){if(e==3)return"few";if(e===0)return"zero";if(e==6)return"many";if(e==2)return"two";if(e==1)return"one";return"other"},18:function(e){if(e===0)return"zero";if(n(e,0,2)&&e!==0&&e!=2)return"one";return"other"},19:function(e){if(n(e,2,10))return"few";if(n(e,0,1))return"one";return"other"},20:function(e){if((n(e%10,3,4)||e%10==9)&&!(n(e%100,10,19)||n(e%100,70,79)||n(e%100,90,99)))return"few";if(e%1e6===0&&e!==0)return"many";if(e%10==2&&!i(e%100,[12,72,92]))return"two";if(e%10==1&&!i(e%100,[11,71,91]))return"one";return"other"},21:function(e){if(e===0)return"zero";if(e==1)return"one";return"other"},22:function(e){if(n(e,0,1)||n(e,11,99))return"one";return"other"},23:function(e){if(n(e%10,1,2)||e%20===0)return"one";return"other"},24:function(e){if(n(e,3,10)||n(e,13,19))return"few";if(i(e,[2,12]))return"two";if(i(e,[1,11]))return"one";return"other"}};var r=t[e.replace(/-.*$/,"")];if(!(r in s)){console.warn("plural form unknown for ["+e+"]");return function(){return"other"}}return s[r]}h.plural=function(e,t,i,n){var s=parseFloat(t);if(isNaN(s))return e;if(n!=c)return e;if(!h._pluralRules){h._pluralRules=o(p)}var r="["+h._pluralRules(s)+"]";if(s===0&&i+"[zero]"in u){e=u[i+"[zero]"][n]}else if(s==1&&i+"[one]"in u){e=u[i+"[one]"][n]}else if(s==2&&i+"[two]"in u){e=u[i+"[two]"][n]}else if(i+r in u){e=u[i+r][n]}else if(i+"[other]"in u){e=u[i+"[other]"][n]}return e};function b(e,t,i){var n=u[e];if(!n){console.warn("#"+e+" is undefined.");if(!i){return null}n=i}var s={};for(var r in n){var a=n[r];a=l(a,t,e,r);a=y(a,t,e);s[r]=a}return s}function l(e,t,i,n){var s=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/;var r=s.exec(e);if(!r||!r.length)return e;var a=r[1];var o=r[2];var l;if(t&&o in t){l=t[o]}else if(o in u){l=u[o]}if(a in h){var d=h[a];e=d(e,l,i,n)}return e}function y(e,i,n){var t=/\{\{\s*(.+?)\s*\}\}/g;return e.replace(t,function(e,t){if(i&&t in i){return i[t]}if(t in u){return u[t]}console.log("argument {{"+t+"}} for #"+n+" is undefined.");return e})}function P(e){var t=v(e);if(!t.id)return;var i=b(t.id,t.args);if(!i){console.warn("#"+t.id+" is undefined.");return}if(i[c]){if(E(e)===0){e[c]=i[c]}else{var n=e.childNodes;var s=false;for(var r=0,a=n.length;r<a;r++){if(n[r].nodeType===3&&/\S/.test(n[r].nodeValue)){if(s){n[r].nodeValue=""}else{n[r].nodeValue=i[c];s=true}}}if(!s){var o=d.createTextNode(i[c]);e.prepend(o)}}delete i[c]}for(var l in i){e[l]=i[l]}}function E(e){if(e.children){return e.children.length}if(typeof e.childElementCount!=="undefined"){return e.childElementCount}var t=0;for(var i=0;i<e.childNodes.length;i++){t+=e.nodeType===1?1:0}return t}function S(e){e=e||d.documentElement;var t=r(e);var i=t.length;for(var n=0;n<i;n++){P(t[n])}P(e)}return{get:function(e,t,i){var n=e.lastIndexOf(".");var s=c;if(n>0){s=e.substring(n+1);e=e.substring(0,n)}var r;if(i){r={};r[s]=i}var a=b(e,t,r);if(a&&s in a){return a[s]}return"{{"+e+"}}"},getData:function(){return u},getText:function(){return n},getLanguage:function(){return p},setLanguage:function(e,t){i(e,function(){if(t)t()})},getDirection:function(){var e=["ar","he","fa","ps","ur"];var t=p.split("-",1)[0];return e.indexOf(t)>=0?"rtl":"ltr"},translate:S,getReadyState:function(){return f},ready:function(t){if(!t){return}else if(f=="complete"||f=="interactive"){e.setTimeout(function(){t()})}else if(d.addEventListener){d.addEventListener("localized",function e(){d.removeEventListener("localized",e);t()})}}}}(window,document)},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.GenericScripting=void 0;t.docPropertiesLookup=n;var l=i(5);async function n(e){const t="",i=t.split("#")[0];let{info:n,metadata:s,contentDispositionFilename:r,contentLength:a}=await e.getMetadata();if(!a){const{length:o}=await e.getDownloadInfo();a=o}return{...n,baseURL:i,filesize:a,filename:r||(0,l.getPdfFilenameFromUrl)(t),metadata:s?.getRaw(),authors:s?.get("dc:creator"),numPages:e.numPages,URL:t}}class s{constructor(e){this._ready=(0,l.loadScript)(e,true).then(()=>{return window.pdfjsSandbox.QuickJSSandbox()})}async createSandbox(e){const t=await this._ready;t.create(e)}async dispatchEventInSandbox(e){const t=await this._ready;setTimeout(()=>t.dispatchEvent(e),0)}async destroySandbox(){const e=await this._ready;e.nukeSandbox()}}t.GenericScripting=s},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFPrintService=l;var c=i(5);var n=i(4);var r=i(49);let h=null;let a=null;let s=null;function o(e,t,i,n,s,r,a){const o=h.scratchCanvas;const l=s/c.PixelsPerInch.PDF;o.width=Math.floor(n.width*l);o.height=Math.floor(n.height*l);const d=o.getContext("2d");d.save();d.fillStyle="rgb(255, 255, 255)";d.fillRect(0,0,o.width,o.height);d.restore();return Promise.all([t.getPage(i),a]).then(function([e,t]){const i={canvasContext:d,transform:[l,0,0,l,0,0],viewport:e.getViewport({scale:1,rotation:n.rotation}),intent:"print",annotationMode:c.AnnotationMode.ENABLE_STORAGE,optionalContentConfigPromise:r,printAnnotationStorage:t};return e.render(i).promise})}function l(e,t,i,n,s=null,r=null,a){this.pdfDocument=e;this.pagesOverview=t;this.printContainer=i;this._printResolution=n||150;this._optionalContentConfigPromise=s||e.getOptionalContentConfig();this._printAnnotationStoragePromise=r||Promise.resolve();this.l10n=a;this.currentPage=-1;this.scratchCanvas=document.createElement("canvas")}l.prototype={layout(){this.throwIfInactive();const e=document.querySelector("body");e.setAttribute("data-pdfjsprinting",true);const t=this.pagesOverview.every(function(e){return e.width===this.pagesOverview[0].width&&e.height===this.pagesOverview[0].height},this);if(!t){console.warn("Not all pages have the same size. The printed "+"result may be incorrect!")}this.pageStyleSheet=document.createElement("style");const i=this.pagesOverview[0];this.pageStyleSheet.textContent="@page { size: "+i.width+"pt "+i.height+"pt;}";e.append(this.pageStyleSheet)},destroy(){if(h!==this){return}this.printContainer.textContent="";const e=document.querySelector("body");e.removeAttribute("data-pdfjsprinting");if(this.pageStyleSheet){this.pageStyleSheet.remove();this.pageStyleSheet=null}this.scratchCanvas.width=this.scratchCanvas.height=0;this.scratchCanvas=null;h=null;m().then(function(){if(s.active===a){s.close(a)}})},renderPages(){if(this.pdfDocument.isPureXfa){(0,r.getXfaHtmlForPrinting)(this.printContainer,this.pdfDocument);return Promise.resolve()}const n=this.pagesOverview.length;const s=(e,t)=>{this.throwIfInactive();if(++this.currentPage>=n){f(n,n,this.l10n);e();return}const i=this.currentPage;f(i,n,this.l10n);o(this,this.pdfDocument,i+1,this.pagesOverview[i],this._printResolution,this._optionalContentConfigPromise,this._printAnnotationStoragePromise).then(this.useRenderedPage.bind(this)).then(function(){s(e,t)},t)};return new Promise(s)},useRenderedPage(){this.throwIfInactive();const i=document.createElement("img");const e=this.scratchCanvas;if("toBlob"in e){e.toBlob(function(e){i.src=URL.createObjectURL(e)})}else{i.src=e.toDataURL()}const t=document.createElement("div");t.className="printedPage";t.append(i);this.printContainer.append(t);return new Promise(function(e,t){i.onload=e;i.onerror=t})},performPrint(){this.throwIfInactive();return new Promise(e=>{setTimeout(()=>{if(!this.active){e();return}d.call(window);setTimeout(e,20)},0)})},get active(){return this===h},throwIfInactive(){if(!this.active){throw new Error("This print request was cancelled or completed.")}}};const d=window.print;window.print=function(){if(h){console.warn("Ignored window.print() because of a pending print job.");return}m().then(function(){if(h){s.open(a)}});try{u("beforeprint")}finally{if(!h){console.error("Expected print service to be initialized.");m().then(function(){if(s.active===a){s.close(a)}});return}const e=h;h.renderPages().then(function(){return e.performPrint()}).catch(function(){}).then(function(){if(e.active){p()}})}};function u(e){const t=document.createEvent("CustomEvent");t.initCustomEvent(e,false,false,"custom");window.dispatchEvent(t)}function p(){if(h){h.destroy();u("afterprint")}}function f(e,t,i){a||=document.getElementById("printServiceDialog");const n=Math.round(100*e/t);const s=a.querySelector("progress");const r=a.querySelector(".relative-progress");s.value=n;i.get("print_progress_percent",{progress:n}).then(e=>{r.textContent=e})}window.addEventListener("keydown",function(e){if(e.keyCode===80&&(e.ctrlKey||e.metaKey)&&!e.altKey&&(!e.shiftKey||window.chrome||window.opera)){e.preventDefault();if(e.stopImmediatePropagation){e.stopImmediatePropagation()}else{e.stopPropagation()}}},true);if("onbeforeprint"in window){const v=function(e){if(e.detail!=="custom"&&e.stopImmediatePropagation){e.stopImmediatePropagation()}};window.addEventListener("beforeprint",v);window.addEventListener("afterprint",v)}let g;function m(){if(!g){s=n.PDFViewerApplication.overlayManager;if(!s){throw new Error("The overlay manager has not yet been initialized.")}a||=document.getElementById("printServiceDialog");g=s.register(a,true);document.getElementById("printCancel").onclick=p;a.addEventListener("close",p)}return g}n.PDFPrintServiceFactory.instance={supportsPrinting:true,createPrintService(e,t,i,n,s,r,a){if(h){throw new Error("The print service is created and active.")}h=new l(e,t,i,n,s,r,a);return h}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.getXfaHtmlForPrinting=n;var d=i(5);var c=i(3);var h=i(38);function n(e,t){const i=t.allXfaHtml;const n=new c.SimpleLinkService;const s=Math.round(d.PixelsPerInch.PDF_TO_CSS_UNITS*100)/100;for(const r of i.children){const a=document.createElement("div");a.className="xfaPrintedPage";e.append(a);const o=new h.XfaLayerBuilder({pageDiv:a,pdfPage:null,annotationStorage:t.annotationStorage,linkService:n,xfaHtml:r});const l=(0,d.getXfaPageViewport)(r,{scale:s});o.render(l,"print")}}}];var s={};function c(e){var t=s[e];if(t!==undefined){return t.exports}var i=s[e]={exports:{}};n[e](i,i.exports,c);return i.exports}var h={};(()=>{var e=h;Object.defineProperty(e,"__esModule",{value:true});Object.defineProperty(e,"PDFViewerApplication",{enumerable:true,get:function(){return s.PDFViewerApplication}});e.PDFViewerApplicationConstants=void 0;Object.defineProperty(e,"PDFViewerApplicationOptions",{enumerable:true,get:function(){return i.AppOptions}});var t=c(1);var i=c(2);var n=c(3);var s=c(4);const r="2.16.105";const a="172ccdbe5";const o={LinkTarget:n.LinkTarget,RenderingStates:t.RenderingStates,ScrollMode:t.ScrollMode,SpreadMode:t.SpreadMode};e.PDFViewerApplicationConstants=o;window.PDFViewerApplication=s.PDFViewerApplication;window.PDFViewerApplicationConstants=o;window.PDFViewerApplicationOptions=i.AppOptions;{c(42)}{c(48)}function l(){let e=null;e={container:document.getElementById("errorWrapper"),errorMessage:document.getElementById("errorMessage"),closeButton:document.getElementById("errorClose"),errorMoreInfo:document.getElementById("errorMoreInfo"),moreInfoButton:document.getElementById("errorShowMore"),lessInfoButton:document.getElementById("errorShowLess")};return{appContainer:document.body,mainContainer:document.getElementById("viewerContainer"),viewerContainer:document.getElementById("viewer"),toolbar:{container:document.getElementById("toolbarViewer"),numPages:document.getElementById("numPages"),pageNumber:document.getElementById("pageNumber"),scaleSelect:document.getElementById("scaleSelect"),customScaleOption:document.getElementById("customScaleOption"),previous:document.getElementById("previous"),next:document.getElementById("next"),zoomIn:document.getElementById("zoomIn"),zoomOut:document.getElementById("zoomOut"),viewFind:document.getElementById("viewFind"),openFile:document.getElementById("openFile"),print:document.getElementById("print"),editorFreeTextButton:document.getElementById("editorFreeText"),editorFreeTextParamsToolbar:document.getElementById("editorFreeTextParamsToolbar"),editorInkButton:document.getElementById("editorInk"),editorInkParamsToolbar:document.getElementById("editorInkParamsToolbar"),presentationModeButton:document.getElementById("presentationMode"),download:document.getElementById("download"),viewBookmark:document.getElementById("viewBookmark")},secondaryToolbar:{toolbar:document.getElementById("secondaryToolbar"),toggleButton:document.getElementById("secondaryToolbarToggle"),presentationModeButton:document.getElementById("secondaryPresentationMode"),openFileButton:document.getElementById("secondaryOpenFile"),printButton:document.getElementById("secondaryPrint"),downloadButton:document.getElementById("secondaryDownload"),viewBookmarkButton:document.getElementById("secondaryViewBookmark"),firstPageButton:document.getElementById("firstPage"),lastPageButton:document.getElementById("lastPage"),pageRotateCwButton:document.getElementById("pageRotateCw"),pageRotateCcwButton:document.getElementById("pageRotateCcw"),cursorSelectToolButton:document.getElementById("cursorSelectTool"),cursorHandToolButton:document.getElementById("cursorHandTool"),scrollPageButton:document.getElementById("scrollPage"),scrollVerticalButton:document.getElementById("scrollVertical"),scrollHorizontalButton:document.getElementById("scrollHorizontal"),scrollWrappedButton:document.getElementById("scrollWrapped"),spreadNoneButton:document.getElementById("spreadNone"),spreadOddButton:document.getElementById("spreadOdd"),spreadEvenButton:document.getElementById("spreadEven"),documentPropertiesButton:document.getElementById("documentProperties")},sidebar:{outerContainer:document.getElementById("outerContainer"),sidebarContainer:document.getElementById("sidebarContainer"),toggleButton:document.getElementById("sidebarToggle"),thumbnailButton:document.getElementById("viewThumbnail"),outlineButton:document.getElementById("viewOutline"),attachmentsButton:document.getElementById("viewAttachments"),layersButton:document.getElementById("viewLayers"),thumbnailView:document.getElementById("thumbnailView"),outlineView:document.getElementById("outlineView"),attachmentsView:document.getElementById("attachmentsView"),layersView:document.getElementById("layersView"),outlineOptionsContainer:document.getElementById("outlineOptionsContainer"),currentOutlineItemButton:document.getElementById("currentOutlineItem")},sidebarResizer:{outerContainer:document.getElementById("outerContainer"),resizer:document.getElementById("sidebarResizer")},findBar:{bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFind"),findField:document.getElementById("findInput"),highlightAllCheckbox:document.getElementById("findHighlightAll"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),matchDiacriticsCheckbox:document.getElementById("findMatchDiacritics"),entireWordCheckbox:document.getElementById("findEntireWord"),findMsg:document.getElementById("findMsg"),findResultsCount:document.getElementById("findResultsCount"),findPreviousButton:document.getElementById("findPrevious"),findNextButton:document.getElementById("findNext")},passwordOverlay:{dialog:document.getElementById("passwordDialog"),label:document.getElementById("passwordText"),input:document.getElementById("password"),submitButton:document.getElementById("passwordSubmit"),cancelButton:document.getElementById("passwordCancel")},documentProperties:{dialog:document.getElementById("documentPropertiesDialog"),closeButton:document.getElementById("documentPropertiesClose"),fields:{fileName:document.getElementById("fileNameField"),fileSize:document.getElementById("fileSizeField"),title:document.getElementById("titleField"),author:document.getElementById("authorField"),subject:document.getElementById("subjectField"),keywords:document.getElementById("keywordsField"),creationDate:document.getElementById("creationDateField"),modificationDate:document.getElementById("modificationDateField"),creator:document.getElementById("creatorField"),producer:document.getElementById("producerField"),version:document.getElementById("versionField"),pageCount:document.getElementById("pageCountField"),pageSize:document.getElementById("pageSizeField"),linearized:document.getElementById("linearizedField")}},annotationEditorParams:{editorFreeTextFontSize:document.getElementById("editorFreeTextFontSize"),editorFreeTextColor:document.getElementById("editorFreeTextColor"),editorInkColor:document.getElementById("editorInkColor"),editorInkThickness:document.getElementById("editorInkThickness"),editorInkOpacity:document.getElementById("editorInkOpacity")},errorWrapper:e,printContainer:document.getElementById("printContainer"),openFileInput:document.getElementById("fileInput"),debuggerScriptPath:"./debugger.js"}}function d(){const e=l();const t=document.createEvent("CustomEvent");t.initCustomEvent("webviewerloaded",true,true,{source:window});try{parent.document.dispatchEvent(t)}catch(e){console.error(`webviewerloaded: ${e}`);document.dispatchEvent(t)}s.PDFViewerApplication.run(e)}document.blockUnblockOnload?.(true);if(document.readyState==="interactive"||document.readyState==="complete"){d()}else{document.addEventListener("DOMContentLoaded",d,true)}})()})();